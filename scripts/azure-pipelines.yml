trigger:
  - master
  - development

variables:
  FEATURE_NAME_PREFIX: 'feature/'
  VERBOSITY: 'diagnostic'
  GIT_SHA: $(Build.SourceVersion)
  GIT_BRANCH_NAME: $(Build.SourceBranchName)
  BUILD_NUMBER: $[counter('$(Build.SourceBranchName)_counter', 1)]
  FEATURE_NAME: ''
  PREVIEW_LABEL: 'rc'
  BASE_LINUX_PACKAGES: curl mono-complete msbuild
  NATIVE_LINUX_PACKAGES: $(BASE_LINUX_PACKAGES) python git libfontconfig1-dev clang-3.8 make
  TIZEN_LINUX_PACKAGES: $(BASE_LINUX_PACKAGES) python git zip libxcb-xfixes0 libxcb-render-util0 libwebkitgtk-1.0-0 libxcb-image0 acl libsdl1.2debian libv4l-0 libxcb-randr0 libxcb-shape0 libxcb-icccm4 libsm6 gettext rpm2cpio cpio bridge-utils openvpn
  MANAGED_LINUX_PACKAGES: $(BASE_LINUX_PACKAGES) dotnet-sdk-2.1 ttf-ancient-fonts
  MONO_VERSION: 5_18_1
  XCODE_VERSION: 10.2.1
  CONFIGURATION: 'Release'
  VM_IMAGE_WINDOWS: vs2017-win2016
  VM_IMAGE_MAC: macos-10.14
  VM_IMAGE_LINUX: ubuntu-16.04

resources:
  repositories:
    - repository: xamarin-templates
      type: github
      name: xamarin/yaml-templates
      endpoint: xamarin

jobs:

 # SAMPLES JOBS
  - template: azure-templates-bootstrapper.yml
    parameters:
      name: samples_windows
      displayName: Build Samples (Windows)
      vmImage: $(VM_IMAGE_WINDOWS)
      target: samples
  - template: azure-templates-bootstrapper.yml
    parameters:
      name: samples_macos
      displayName: Build Samples (macOS)
      vmImage: $(VM_IMAGE_MAC)
      target: samples
  - template: azure-templates-bootstrapper.yml
    parameters:
      name: samples_linux
      displayName: Build Samples (Linux)
      vmImage: $(VM_IMAGE_LINUX)
      packages: $(MANAGED_LINUX_PACKAGES)
      target: samples
