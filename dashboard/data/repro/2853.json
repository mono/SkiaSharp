{
  "meta": {
    "schemaVersion": "1.0",
    "number": 2853,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-13T16:00:00Z"
  },
  "conclusion": "reproduced",
  "notes": "Reproduced as reported: TIFF files cannot be decoded by any SkiaSharp API. SKImage.FromEncodedData() returns null, SKBitmap.Decode(byte[]) throws ArgumentNullException (Parameter \u0027codec\u0027), and SKCodec.Create() returns null. This is consistent across all tested versions (2.88.3, 3.119.2, main source). TIFF has never been a supported codec in Skia \u2014 the SkEncodedImageFormat enum does not include TIFF, and no SkTiffCodec exists. This is working-as-designed behavior for an unsupported format, not a defect. Duplicate of #433; feature request tracked in #2993.",
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Create console project with reporter\u0027s SkiaSharp version (2.88.3) and download the TIFF test file from the issue attachment.",
      "layer": "setup",
      "command": "dotnet new console -n Repro --framework net8.0 \u0026\u0026 cd Repro \u0026\u0026 dotnet add package SkiaSharp --version 2.88.3",
      "exitCode": 0,
      "output": "The template \u0022Console App\u0022 was created successfully.\nPackageReference for package \u0027SkiaSharp\u0027 version \u00272.88.3\u0027 added.",
      "filesCreated": [
        {
          "filename": "Program.cs",
          "description": "Console app that tests all TIFF decoding paths: SKImage.FromEncodedData (string/Stream/byte[]), SKBitmap.Decode (string/Stream/byte[]), and SKCodec.Create. Uses the reporter\u0027s TIFF file attachment.",
          "content": "using SkiaSharp;\nusing System;\nusing System.IO;\n\nvar tiffPath = Path.Combine(AppContext.BaseDirectory, \u0022..\u0022, \u0022..\u0022, \u0022..\u0022, \u0022..\u0022, \u0022C 7 142 18-0002.tif\u0022);\ntiffPath = Path.GetFullPath(tiffPath);\n\nConsole.WriteLine($\u0022SkiaSharp version: {typeof(SKBitmap).Assembly.GetName().Version}\u0022);\nConsole.WriteLine($\u0022TIFF file exists: {File.Exists(tiffPath)}\u0022);\nConsole.WriteLine($\u0022TIFF file size: {new FileInfo(tiffPath).Length} bytes\u0022);\n\n// Test 1: SKImage.FromEncodedData(string)\nConsole.WriteLine(\u0022\\nTest 1: SKImage.FromEncodedData(path)\u0022);\nvar image1 = SKImage.FromEncodedData(tiffPath);\nConsole.WriteLine($\u0022  Result: {(image1 == null ? \u0022null\u0022 : $\u0022{image1.Width}x{image1.Height}\u0022)}\u0022);\nimage1?.Dispose();\n\n// Test 2: SKImage.FromEncodedData(Stream)\nConsole.WriteLine(\u0022Test 2: SKImage.FromEncodedData(stream)\u0022);\nusing (var stream = File.OpenRead(tiffPath))\n{\n    var image2 = SKImage.FromEncodedData(stream);\n    Console.WriteLine($\u0022  Result: {(image2 == null ? \u0022null\u0022 : $\u0022{image2.Width}x{image2.Height}\u0022)}\u0022);\n    image2?.Dispose();\n}\n\n// Test 3: SKBitmap.Decode(string)\nConsole.WriteLine(\u0022Test 3: SKBitmap.Decode(path)\u0022);\nvar bitmap1 = SKBitmap.Decode(tiffPath);\nConsole.WriteLine($\u0022  Result: {(bitmap1 == null ? \u0022null\u0022 : $\u0022{bitmap1.Width}x{bitmap1.Height}\u0022)}\u0022);\nbitmap1?.Dispose();\n\n// Test 4: SKBitmap.Decode(byte[]) - throws ArgumentNullException\nConsole.WriteLine(\u0022Test 4: SKBitmap.Decode(byte[])\u0022);\ntry\n{\n    var bytes = File.ReadAllBytes(tiffPath);\n    var bitmap2 = SKBitmap.Decode(bytes);\n    Console.WriteLine($\u0022  Result: {(bitmap2 == null ? \u0022null\u0022 : $\u0022{bitmap2.Width}x{bitmap2.Height}\u0022)}\u0022);\n    bitmap2?.Dispose();\n}\ncatch (Exception ex)\n{\n    Console.WriteLine($\u0022  Exception: {ex.GetType().Name}: {ex.Message}\u0022);\n}\n\n// Test 5: SKCodec.Create\nConsole.WriteLine(\u0022Test 5: SKCodec.Create(path)\u0022);\nvar codec = SKCodec.Create(tiffPath);\nConsole.WriteLine($\u0022  Result: {(codec == null ? \u0022null\u0022 : $\u0022{codec.Info.Width}x{codec.Info.Height}\u0022)}\u0022);\ncodec?.Dispose();\n\nConsole.WriteLine(\u0022\\nSUCCESS: test completed\u0022);"
        }
      ],
      "result": "success"
    },
    {
      "stepNumber": 2,
      "description": "Build the reproduction project.",
      "layer": "csharp",
      "command": "dotnet build",
      "exitCode": 0,
      "output": "Build succeeded. 2 Warning(s) 0 Error(s)",
      "result": "success"
    },
    {
      "stepNumber": 3,
      "description": "Run with reporter\u0027s version (2.88.3). All TIFF decode methods return null; SKBitmap.Decode(byte[]) throws ArgumentNullException as reported.",
      "layer": "csharp",
      "command": "dotnet run",
      "exitCode": 0,
      "output": "SkiaSharp version: 2.88.0.0\nTIFF file exists: True\nTIFF file size: 3977720 bytes\n\nTest 1: SKImage.FromEncodedData(path)\n  Result: null\nTest 2: SKImage.FromEncodedData(stream)\n  Result: null\nTest 3: SKBitmap.Decode(path)\n  Result: null\nTest 4: SKBitmap.Decode(byte[])\n  Exception: ArgumentNullException: Value cannot be null. (Parameter \u0027codec\u0027)\nTest 5: SKCodec.Create(path)\n  Result: null\n\nSUCCESS: test completed",
      "result": "wrong-output"
    },
    {
      "stepNumber": 4,
      "description": "Test with latest stable (3.119.2) in a fresh project directory. Identical results \u2014 TIFF still not decodable.",
      "layer": "csharp",
      "command": "cd /tmp/repro-2853-latest/Repro \u0026\u0026 dotnet run",
      "exitCode": 0,
      "output": "SkiaSharp version: 3.119.0.0\nTIFF file exists: True\nTIFF file size: 3977720 bytes\n\nTest 1: SKImage.FromEncodedData(path)\n  Result: null\nTest 2: SKBitmap.Decode(path)\n  Result: null\nTest 3: SKBitmap.Decode(byte[])\n  Exception: ArgumentNullException: Value cannot be null. (Parameter \u0027codec\u0027)\nTest 4: SKCodec.Create(path)\n  Result: null\n\nSUCCESS: test completed",
      "result": "wrong-output"
    },
    {
      "stepNumber": 5,
      "description": "Test with main branch source (built from source with project references). Identical results \u2014 TIFF codec not present in Skia.",
      "layer": "csharp",
      "command": "TIFF_PATH=\u0022/tmp/repro-2853/C 7 142 18-0002.tif\u0022 dotnet run --project samples/Basic/Console/SkiaSharpSample/SkiaSharpSample.csproj",
      "exitCode": 0,
      "output": "SkiaSharp version: 3.119.0.0\nTIFF file exists: True\nTIFF file size: 3977720 bytes\n\nTest 1: SKImage.FromEncodedData(path)\n  Result: null\nTest 2: SKBitmap.Decode(path)\n  Result: null\nTest 3: SKBitmap.Decode(byte[])\n  Exception: ArgumentNullException: Value cannot be null. (Parameter \u0027codec\u0027)\nTest 4: SKCodec.Create(path)\n  Result: null\n\nSUCCESS: test completed",
      "result": "wrong-output"
    }
  ],
  "environment": {
    "os": "macOS 26.2",
    "arch": "arm64",
    "dotnetVersion": "10.0.2",
    "skiaSharpVersion": "2.88.3",
    "dockerUsed": false,
    "dotnetSdkVersion": "10.0.102"
  },
  "inputs": {
    "triageFile": "ai-triage/2853.json"
  },
  "assessment": "working-as-designed",
  "scope": "universal",
  "reproductionTime": "~8 minutes",
  "versionResults": [
    {
      "version": "2.88.3",
      "source": "nuget",
      "result": "reproduced",
      "notes": "Reporter\u0027s version. All decode methods return null or throw.",
      "platform": "host-macos-arm64"
    },
    {
      "version": "3.119.2",
      "source": "nuget",
      "result": "reproduced",
      "notes": "Latest stable. Identical behavior.",
      "platform": "host-macos-arm64"
    },
    {
      "version": "main (source)",
      "source": "source",
      "result": "reproduced",
      "notes": "Built from main branch. Identical behavior \u2014 TIFF remains unsupported.",
      "platform": "host-macos-arm64"
    }
  ],
  "reproProject": {
    "type": "console",
    "tfm": "net8.0",
    "packages": [
      {
        "name": "SkiaSharp",
        "version": "2.88.3"
      }
    ]
  },
  "artifacts": [
    {
      "filename": "C 7 142 18-0002.tif",
      "description": "Reporter\u0027s TIFF test file (988x664, RGB, uncompressed, 3.9MB). Attached to issue as zip.",
      "source": "issue-attachment",
      "available": true,
      "url": "https://github.com/mono/SkiaSharp/files/15253367/C.7.142.18-0002.zip"
    }
  ],
  "errorMessages": {
    "primaryError": "TIFF decoding fails: SKImage.FromEncodedData returns null, SKBitmap.Decode(byte[]) throws ArgumentNullException (Parameter \u0027codec\u0027), SKCodec.Create returns null",
    "additionalErrors": [
      "ArgumentNullException: Value cannot be null. (Parameter \u0027codec\u0027) \u2014 thrown by SKBitmap.Decode(byte[]) when SKCodec.Create returns null for unsupported format"
    ]
  },
  "feedback": {
    "triageCorrections": [
      {
        "topic": "classification",
        "upstream": "Triage classified as type/bug with 0.4 confidence",
        "corrected": "Confirmed: the reported behavior occurs (reproduced), but this is working-as-designed \u2014 TIFF has never been a supported codec in Skia. This is a feature gap, not a bug."
      }
    ]
  },
  "output": {
    "proposedResponse": {
      "status": "ready",
      "body": "Thanks for reporting this. We\u0027ve confirmed the behavior: TIFF files cannot be decoded by SkiaSharp because TIFF is not a supported image format in Skia (the underlying C\u002B\u002B library).\n\n\u0060SKCodec.Create()\u0060 returns \u0060null\u0060 for unrecognized formats, which causes:\n- \u0060SKImage.FromEncodedData()\u0060 \u2192 returns \u0060null\u0060\n- \u0060SKBitmap.Decode(string)\u0060 / \u0060Decode(Stream)\u0060 \u2192 returns \u0060null\u0060\n- \u0060SKBitmap.Decode(byte[])\u0060 \u2192 throws \u0060ArgumentNullException\u0060 (because the internal \u0060SKCodec.Create\u0060 returns \u0060null\u0060 which is then passed to the \u0060SKCodec\u0060 overload)\n\nThis behavior is consistent across all versions (2.88.3, 3.119.2, and current main).\n\n**Workaround:** Convert the TIFF to PNG with a library like ImageSharp, then load the PNG with SkiaSharp:\n\n\u0060\u0060\u0060csharp\n// dotnet add package SixLabors.ImageSharp\nusing SixLabors.ImageSharp;\nusing SixLabors.ImageSharp.Formats.Png;\n\nusing var image = Image.Load(\u0022image.tif\u0022);\nusing var ms = new MemoryStream();\nimage.Save(ms, new PngEncoder());\nms.Position = 0;\nusing var skImage = SKImage.FromEncodedData(ms);\n\u0060\u0060\u0060\n\nNative TIFF support is tracked as a feature request in #2993. Closing as duplicate of #433.",
      "summary": "TIFF is not supported by Skia \u2014 confirmed with workarounds provided"
    },
    "actionability": {
      "suggestedAction": "close-as-duplicate",
      "confidence": 0.9,
      "reason": "TIFF is not and has never been a supported image format in Skia. This is identical to #433 (closed 2018, maintainer confirmed TIFF unsupported). Feature request tracked in #2993."
    },
    "workarounds": [
      "Use SixLabors.ImageSharp to convert TIFF to PNG, then load the PNG with SkiaSharp",
      "Use BitMiracle.LibTiff.NET to decode TIFF to raw pixels, then create SKBitmap from pixel data",
      "Use Magick.NET to convert TIFF to a supported format before passing to SkiaSharp"
    ],
    "actions": [
      {
        "type": "update-labels",
        "description": "Relabel as feature request since TIFF non-support is by design",
        "risk": "low",
        "confidence": 0.85,
        "labels": [
          "type/feature-request",
          "area/SkiaSharp"
        ]
      },
      {
        "type": "link-duplicate",
        "description": "Mark as duplicate of #433 (TIFF not supported)",
        "risk": "medium",
        "confidence": 0.9,
        "linkedIssue": 433
      },
      {
        "type": "link-related",
        "description": "Cross-reference feature request #2993 for TIFF support",
        "risk": "low",
        "confidence": 0.9,
        "linkedIssue": 2993
      },
      {
        "type": "close-issue",
        "description": "Close as duplicate of #433",
        "risk": "medium",
        "confidence": 0.9
      }
    ]
  }
}