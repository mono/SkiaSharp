{
  "number": 149,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] System.DisposedException SKLottieView Android",
  "body": "**Description**\r\n\r\nWhen switching multiple times between ContentViews which has a SKLottieView on it in a single page, this exception will be thrown eventually. But only on Android, I cannot reproduce this on a Windows build (net6.0-windows10.0.19041.0).\r\n\r\n\u0060\u0060\u0060\u0060\r\nSystem.ObjectDisposedException: \u0027Cannot access a disposed object\r\nObject name: \u0027SkiaSharp.Views.Android.SKCanvasView\u0027.\u0027\r\n\u0060\u0060\u0060\u0060\r\n\r\nCall Stack\r\n\u0060\u0060\u0060\u0060\r\n0xFFFFFFFFFFFFFFFF in Android.Runtime.JNIEnv.monodroid_debugger_unhandled_exception\r\n0x1A in Android.Runtime.JNINativeWrapper._unhandled_exception at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/Android.Runtime/JNINativeWrapper.g.cs:12,5\r\n0x1D in Android.Runtime.JNINativeWrapper.Wrap_JniMarshal_PP_V at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/Android.Runtime/JNINativeWrapper.g.cs:23,26\r\n0x2E in Java.Interop.JniPeerMembers.AssertSelf at /Users/runner/work/1/s/xamarin-android/external/Java.Interop/src/Java.Interop/Java.Interop/JniPeerMembers.cs:152,5\r\n0x1 in Java.Interop.JniPeerMembers.JniInstanceMethods.InvokeVirtualBooleanMethod at /Users/runner/work/1/s/xamarin-android/external/Java.Interop/src/Java.Interop/Java.Interop/JniPeerMembers.JniInstanceMethods_Invoke.cs:64,5\r\n0x12 in Android.Views.View.get_IsAttachedToWindow at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/obj/Release/net6.0/android-31/mcw/Android.Views.View.cs:7989,6\r\n0x1 in Microsoft.Maui.Platform.ViewExtensions.IsLoaded at D:\\a\\_work\\1\\s\\src\\Core\\src\\Platform\\Android\\ViewExtensions.cs:426,4\r\n0x25 in Microsoft.Maui.Controls.VisualElement.get_IsLoaded at D:\\a\\_work\\1\\s\\src\\Controls\\src\\Core\\HandlerImpl\\VisualElement\\VisualElement.Impl.cs:346,5\r\n0x1 in SkiaSharp.Extended.UI.PlatformExtensions.IsLoadedEx\r\n0xD in SkiaSharp.Extended.UI.Controls.SKSurfaceView.InvalidateCore\r\n0x7 in SkiaSharp.Extended.UI.Controls.SKAnimatedSurfaceView.InvalidateCore\r\n0x1 in SkiaSharp.Extended.UI.Controls.SKSurfaceView.Invalidate\r\n0x1 in SkiaSharp.Extended.UI.Controls.SKAnimatedSurfaceView.\u003CUpdateIsAnimationEnabled\u003Eb__12_0\r\n0x6 in Microsoft.Maui.Dispatching.DispatcherExtensions. at D:\\a\\_work\\1\\s\\src\\Core\\src\\Dispatching\\DispatcherExtensions.cs:78,5\r\n0x1B in Microsoft.Maui.Dispatching.DispatcherTimer.OnTimerTick at D:\\a\\_work\\1\\s\\src\\Core\\src\\Dispatching\\Dispatcher.Android.cs:74,4\r\n0xE in Java.Lang.Thread.RunnableImplementor.Run at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/Java.Lang/Thread.cs:36,6\r\n0x8 in Java.Lang.IRunnableInvoker.n_Run at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/obj/Release/net6.0/android-31/mcw/Java.Lang.IRunnable.cs:84,4\r\n0x8 in Android.Runtime.JNINativeWrapper.Wrap_JniMarshal_PP_V at /Users/runner/work/1/s/xamarin-android/src/Mono.Android/Android.Runtime/JNINativeWrapper.g.cs:22,5\r\n\u0060\u0060\u0060\u0060\r\n\r\n\r\n\r\n**Code**\r\n\r\nThe ContentView on the Page\r\n\r\n\u0060\u0060\u0060xaml\r\n\u003CContentView x:Name=\u0022myContentView\u0022\u003E\r\n\t\u003CContentView.Content\u003E\r\n\t\t\u003CContentView /\u003E\r\n\t\u003C/ContentView.Content\u003E\r\n\t\u003CContentView.Triggers\u003E\r\n\t\t\u003CDataTrigger TargetType=\u0022{x:Type ContentView}\u0022\r\n\t\t\t\t\t Binding=\u0022{Binding Source={x:Reference myContentView}, Path=BindingContext.ControlTemplate}\u0022\r\n\t\t\t\t\t Value=\u0022InitialState\u0022\u003E\r\n\t\t\t\u003CSetter Property=\u0022ControlTemplate\u0022 \r\n\t\t\t\t\tValue=\u0022{x:StaticResource InitialState}\u0022/\u003E\r\n\t\t\u003C/DataTrigger\u003E\r\n\t\t\u003CDataTrigger TargetType=\u0022{x:Type ContentView}\u0022\r\n\t\t\t\t\t Binding=\u0022{Binding Source={x:Reference myContentView}, Path=BindingContext.ControlTemplate}\u0022\r\n\t\t\t\t\t Value=\u0022SecondState\u0022\u003E\r\n\t\t\t\u003CSetter Property=\u0022ControlTemplate\u0022 \r\n\t\t\t\t\tValue=\u0022{x:StaticResource SecondState}\u0022/\u003E\r\n\t\t\u003C/DataTrigger\u003E\r\n\t\u003C/ContentView.Triggers\u003E\r\n\u003C/ContentView\u003E\r\n\u0060\u0060\u0060\r\n\r\nThe ControlTemplate\r\n\r\n\u0060\u0060\u0060xaml\r\n\u003C?xml version=\u00221.0\u0022 encoding=\u0022utf-8\u0022 ?\u003E\r\n\u003C?xaml-comp compile=\u0022true\u0022 ?\u003E\r\n\u003CResourceDictionary xmlns=\u0022http://schemas.microsoft.com/dotnet/2021/maui\u0022\r\n             xmlns:x=\u0022http://schemas.microsoft.com/winfx/2009/xaml\u0022\r\n             xmlns:skia=\u0022clr-namespace:SkiaSharp.Extended.UI.Controls;assembly=SkiaSharp.Extended.UI\u0022\r\n             xmlns:vm=\u0022clr-namespace:Basis.App.Maui.InpakkenApp2\u0022\r\n             x:DataType=\u0022vm:MainPageViewModel\u0022\u003E\r\n\r\n    \u003CControlTemplate x:Key=\u0022InitialState\u0022\u003E\r\n        \u003CBorder Margin=\u00220, 8\u0022\r\n                        Padding=\u00228\u0022\r\n                        Style=\u0022{x:StaticResource ChildPanel}\u0022\u003E\r\n\r\n            \u003CGrid RowDefinitions=\u00221*, 1*, 4*, 1*\u0022\r\n                          ColumnDefinitions=\u0022*, 5*, 3*\u0022\u003E\r\n\r\n                \u003Cskia:SKLottieView Source=\u0022green-pulsing-dot.json\u0022\r\n                                           RepeatCount=\u0022-1\u0022/\u003E\r\n\r\n                \u003CLabel Text=\u0022Scan product\u0022\r\n                               Grid.Column=\u00221\u0022\r\n                               VerticalOptions=\u0022Center\u0022\r\n                               Style=\u0022{StaticResource Title}\u0022/\u003E\r\n\r\n                \u003Cskia:SKLottieView Grid.Column=\u00222\u0022\r\n                                           Source=\u0022scan.json\u0022\r\n                                           RepeatCount=\u0022-1\u0022 \r\n                                           /\u003E\r\n\r\n                \u003CLabel Text=\u0022Product info\u0022\r\n                               Style=\u0022{StaticResource SubTitle}\u0022\r\n                               Grid.Row=\u00221\u0022\r\n                               Grid.ColumnSpan=\u00223\u0022\r\n                               HorizontalOptions=\u0022Center\u0022\r\n                               VerticalOptions=\u0022End\u0022/\u003E\r\n\r\n                \u003CImage Source=\u0022placeholder.png\u0022\r\n                               Grid.Row=\u00222\u0022\r\n                               Grid.ColumnSpan=\u00223\u0022/\u003E\r\n\r\n            \u003C/Grid\u003E\r\n        \u003C/Border\u003E\r\n    \u003C/ControlTemplate\u003E\r\n    \r\n    \u003CControlTemplate x:Key=\u0022SecondState\u0022\u003E\r\n        \u003CBorder Margin=\u00220, 8\u0022\r\n                        Padding=\u00228\u0022\r\n                        Style=\u0022{x:StaticResource DonePanel}\u0022\u003E\r\n\r\n            \u003CGrid RowDefinitions=\u00220.5*, 1*, 4*, 1*\u0022\r\n                          ColumnDefinitions=\u00221*, 10*\u0022\u003E\r\n\r\n                \u003CPath Style=\u0022{x:StaticResource SuccessCircle}\u0022/\u003E\r\n\r\n                \u003CLabel Text=\u0022Scan product\u0022\r\n                               Grid.Column=\u00221\u0022\r\n                               VerticalOptions=\u0022Center\u0022\r\n                               Style=\u0022{StaticResource SubTitle}\u0022/\u003E\r\n\r\n                \u003CLabel Text=\u0022Product info\u0022\r\n                               Style=\u0022{StaticResource SubTitle}\u0022\r\n                               Grid.Row=\u00221\u0022\r\n                               Grid.ColumnSpan=\u00223\u0022\r\n                               HorizontalOptions=\u0022Center\u0022\r\n                               VerticalOptions=\u0022End\u0022/\u003E\r\n\r\n                \u003CImage Source=\u0022allium.png\u0022\r\n                               Grid.Row=\u00222\u0022\r\n                               Grid.ColumnSpan=\u00223\u0022/\u003E\r\n\r\n                \u003CGrid Grid.Row=\u00223\u0022\r\n                              Grid.ColumnSpan=\u00223\u0022\r\n                              RowDefinitions=\u0022*, *\u0022\r\n                              ColumnDefinitions=\u0022*, *, *\u0022\u003E\r\n\r\n                    \u003CLabel Grid.ColumnSpan=\u00223\u0022\r\n                                   HorizontalOptions=\u0022Center\u0022\r\n                                   Text=\u0022{Binding Description}\u0022\r\n                                   Style=\u0022{StaticResource SubTitle}\u0022/\u003E\r\n\r\n                    \u003CHorizontalStackLayout Grid.Row=\u00221\u0022\r\n                                                   Grid.ColumnSpan=\u00223\u0022\r\n                                                   HorizontalOptions=\u0022Center\u0022\r\n                                                   Spacing=\u00228\u0022\u003E\r\n                        \u003CLabel Grid.Row=\u00221\u0022                                   \r\n                                   Text=\u0022{Binding S1}\u0022\r\n                                   Style=\u0022{StaticResource SubTitle}\u0022/\u003E\r\n\r\n                        \u003CLabel Grid.Row=\u00221\u0022\r\n                                   Grid.Column=\u00221\u0022\r\n                                   Text=\u0022{Binding S2}\u0022\r\n                                   Style=\u0022{StaticResource SubTitle}\u0022/\u003E\r\n\r\n                        \u003CLabel Grid.Row=\u00221\u0022\r\n                                   Grid.Column=\u00222\u0022\r\n                                   Text=\u0022{Binding S3}\u0022\r\n                                   Style=\u0022{StaticResource SubTitle}\u0022/\u003E\r\n                    \u003C/HorizontalStackLayout\u003E\r\n                \u003C/Grid\u003E\r\n            \u003C/Grid\u003E\r\n        \u003C/Border\u003E\r\n    \u003C/ControlTemplate\u003E\r\n\u003C/ResourceDictionary\u003E\r\n\u0060\u0060\u0060\r\n\r\n\r\n**Expected Behavior**\r\n\r\nThe SKLottieView to be instantiated correctly.\r\n\r\n**Actual Behavior**\r\n\r\nAn exception is thrown.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  SkiaSharp.Extended.UI.Maui -Version 2.0.0-preview.61\r\n- Last known good version:  unknown\r\n- IDE:  Visual Studio 2022 Professional 17.3.3\r\n- Platform Target Frameworks: \r\n  - Android: net6.0-android (Minimum target: 21.0)\r\n- Target Devices:\r\n  - Device Zebra TC56\r\n",
  "author": {
    "login": "luijt",
    "type": "User"
  },
  "labels": [
    {
      "name": "bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2022-10-18T06:23:31",
  "updatedAt": "2024-04-08T09:13:36",
  "closedAt": "2024-04-08T09:13:35",
  "commentCount": 1,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-05T15:28:52.9069314Z",
    "reactions": [],
    "comments": [
      {
        "id": 2042254049,
        "author": "mattleibow",
        "createdAt": "2024-04-08T09:13:35",
        "reactions": []
      }
    ]
  }
}