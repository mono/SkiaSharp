{
  "number": 250,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] MAUI SKLottieView causes cascading memory leak",
  "body": "**Description**\r\n\r\nAdding an \u0060SKLottieView\u0060 to any MAUI page introduces a memory leak that will cause the SKLottieView _and the containing page_ to never be garbage collected. This is especially problematic as it has a cascading effect that prevents _anything else_ on the page from being collected, as well as anything else the page might be referencing.\r\n\r\n**Code**\r\n\r\n\u003Csk:SKLottieView /\u003E\r\n\r\nI\u0027m omitting the rest of the standard bug report because I\u0027ve isolated the culprit code, and the issue should be self-evident:\r\n\r\nhttps://github.com/mono/SkiaSharp.Extended/blob/93efd2d38783d6d8f638623327e7f9749cea70e2/source/SkiaSharp.Extended.UI/Controls/SKAnimatedSurfaceView.shared.cs#L76-L83\r\n\r\nThe callback passed into \u0060StartTimer\u0060 captures a reference to the current class instance. It is only terminated when \u0060IsAnimationEnabled\u0060 is false. With the dispatcher referencing the class instance, the class instance, in turn, references its parent page (either directly or indirectly) through the \u0060.Parent\u0060 property, so the leak propagates.\r\n\r\nI haven\u0027t put much thought into an appropriate fix, but my first thought is that this code should use a weak reference to prevent the dispatcher from capturing the instance.\r\n\r\n",
  "author": {
    "login": "AdamEssenmacher",
    "type": "User"
  },
  "labels": [
    {
      "name": "bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2024-01-05T06:16:24",
  "updatedAt": "2024-04-08T08:48:50",
  "closedAt": "2024-04-08T08:48:50",
  "commentCount": 5,
  "reactionCount": 2,
  "engagement": {
    "syncedAt": "2026-02-06T12:21:52.9601746Z",
    "reactions": [
      {
        "user": "hwsmo",
        "content": "\u002B1",
        "createdAt": "2026-02-06T12:21:52.9601798Z"
      },
      {
        "user": "mattleibow",
        "content": "\u002B1",
        "createdAt": "2026-02-06T12:21:52.9601803Z"
      }
    ],
    "comments": [
      {
        "id": 1902257466,
        "author": "Yannikk1996",
        "body": "I am also facing this problem. Used lots of SKLottieViews. Does anyone knows a workaround for this?",
        "createdAt": "2024-01-20T20:24:29",
        "reactions": [
          {
            "user": "logikonline",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:21:51.9168715Z"
          }
        ]
      },
      {
        "id": 1902261386,
        "author": "AdamEssenmacher",
        "body": "\u003E I am also facing this problem. Used lots of SKLottieViews. Does anyone knows a workaround for this?\r\n\r\n@Yannikk1996 set \u0060IsAnimationEnabled\u0060 to false when you\u0027re done with the animation. It will terminate the loop, which will break the reference from the Dispatcher and allow the view to be GC\u0027ed.",
        "createdAt": "2024-01-20T20:45:54",
        "reactions": []
      },
      {
        "id": 1910145497,
        "author": "sjorsmiltenburg",
        "body": "Thank you Adam for finding these leaks! I hope with this evidence the team will pick them up quickly as they are blocking for production apps that need to be able to run continuously.\r\n\r\nFor reference: I removed my lottie animations because of this leak and replaced my looping animation with a static image.\r\nAlso I replaced my custom loading animations for activityindicator controls.",
        "createdAt": "2024-01-25T12:54:04",
        "reactions": [
          {
            "user": "AdamEssenmacher",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:21:52.4192073Z"
          }
        ]
      },
      {
        "id": 1936967860,
        "author": "logikonline",
        "body": "\u003E \u003E I am also facing this problem. Used lots of SKLottieViews. Does anyone knows a workaround for this?\r\n\u003E \r\n\u003E @Yannikk1996 set \u0060IsAnimationEnabled\u0060 to false when you\u0027re done with the animation. It will terminate the loop, which will break the reference from the Dispatcher and allow the view to be GC\u0027ed.\r\n\r\nThe problem is we need the frame it stops on to remain.  Doing what you say removes the current frame and leaves it blank.",
        "createdAt": "2024-02-10T10:37:54",
        "reactions": []
      },
      {
        "id": 1937115154,
        "author": "AdamEssenmacher",
        "body": "\u003E The problem is we need the frame it stops on to remain. Doing what you say removes the current frame and leaves it blank.\r\n\r\nSorry I should have said \u0027done with the SKLottieView\u0027 and not \u0027done with the animation\u0027.\r\n\r\nSo, whenever the view is permanently unloaded.",
        "createdAt": "2024-02-10T20:37:13",
        "reactions": []
      }
    ]
  }
}