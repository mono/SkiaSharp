{
  "meta": {
    "schemaVersion": "3.0",
    "number": 3365,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-08T15:00:00Z"
  },
  "summary": "libSkiaSharp.dll has hard link-time dependency on d3d12.dll causing crashes on Windows 10 systems without DX12",
  "classification": {
    "type": {
      "value": "type/bug",
      "confidence": 0.95
    },
    "area": {
      "value": "area/libSkiaSharp.native",
      "confidence": 0.95
    },
    "platforms": [
      "os/Windows-Classic"
    ],
    "backends": [
      "backend/Direct3D"
    ]
  },
  "evidence": {
    "reproEvidence": {
      "stepsToReproduce": [
        "Install SkiaSharp 3.116.0 or later in a Win32 application",
        "Deploy to a Windows 10 system that does not have d3d12.dll (systems without DX12 support or missing Windows updates)",
        "Launch the application — it crashes on native library load due to missing d3d12.dll dependency"
      ],
      "environmentDetails": "Windows 10 (not fully updated, lacking DX12 support). SkiaSharp 3.116.0. Legacy Win32 application. Sample of ~1 million installations with 0.1% crash rate."
    },
    "bugSignals": {
      "severity": "critical",
      "errorType": "crash",
      "isRegression": true
    },
    "versionAnalysis": {
      "mentionedVersions": [
        "3.116.0",
        "2.88.9"
      ]
    }
  },
  "analysis": {
    "summary": "This is a bug where libSkiaSharp.dll has a hard link-time dependency on d3d12.dll introduced when Direct3D 12 rendering support was added in SkiaSharp 3.x. Systems without DX12 (certain Windows 10 configurations lacking updates) crash on DLL load. Closely related to #3267 which reports the identical root cause on Windows 7.",
    "rationale": "type: The issue describes a hard crash caused by a static dependency on d3d12.dll in the native binary. This is clearly broken behavior — the library should gracefully handle missing DX12 support rather than failing to load entirely. area: The issue is in the native binary build configuration — d3d12.dll is a link-time import in libSkiaSharp.dll. This is a native build/linking issue, not a managed code or views issue. backends: The d3d12.dll dependency exists because Skia added Direct3D 12 rendering backend support. The fix involves making this backend's dependency optional at the native level. platforms: Reporter explicitly describes a legacy Win32 app on Windows 10. The os/Windows-Classic label was already applied by the automated triage. tenets: Reliability: hard crashes on systems without DX12 support with quantified 0.1% of 1M impact. Compatibility: regression from 2.x to 3.x breaks backward compatibility with Windows 10 systems that lack DX12 drivers. bugSignals.severity: Hard crash at DLL load time with no managed-code workaround. Quantified impact of ~1000 affected users (0.1% of 1M). The crash prevents any SkiaSharp functionality from being used, and there is no way to catch or handle it in application code. actionability.suggestedAction: While closely related to #3267, the fix requires engineering work in the Skia build configuration to change d3d12.dll from a static import to a dynamic load. This hasn't been addressed yet and the issue remains open. regression.isRegression: Reporter states last known good version is 2.88.9 and the crash appeared in 3.116.0, coinciding with when D3D12 rendering support was added to the Skia build. versionAnalysis.currentRelevance: The D3D12 static link-time dependency has not been changed to dynamic loading in any subsequent release. The root cause persists in current builds.",
    "codeInvestigation": [],
    "nextQuestions": [
      "Exact Windows 10 build numbers affected — likely systems missing specific Windows Updates that provide d3d12.dll",
      "Whether the Skia upstream has already addressed this with delayed/dynamic loading of D3D12, or if this requires a SkiaSharp-specific build change",
      "Whether the version discrepancy matters — reporter says 3.116.0 but #3267 pinpoints 3.119.0-preview.1.2 as the introduction point"
    ],
    "resolution": {
      "hypothesis": "The Skia build configuration statically imports d3d12.dll, causing the Windows loader to fail when that DLL is absent. The fix requires changing the D3D12 dependency from a load-time import to a runtime dynamic load (LoadLibrary/GetProcAddress or /DELAYLOAD pattern), allowing Skia to gracefully fall back when D3D12 is unavailable.",
      "proposals": [
        {
          "description": "Modify the Skia GN build to use delayed/dynamic loading of d3d12.dll instead of static imports. This is the proper fix — Skia should probe for DX12 availability at runtime and fall back gracefully. Involves adding /DELAYLOAD:d3d12.dll linker flag or using LoadLibrary/GetProcAddress pattern.",
          "confidence": 0.85,
          "effort": "medium"
        },
        {
          "description": "Set skia_use_direct3d=false in the GN build args for Windows, removing the d3d12.dll dependency entirely. Simple change but removes D3D12 rendering capability for all users.",
          "confidence": 0.8,
          "effort": "small"
        },
        {
          "description": "Provide two Windows native asset variants — one with D3D12 support and one without — allowing users to choose based on their target environment. Does not fix the root cause for the default package.",
          "confidence": 0.6,
          "effort": "large"
        }
      ]
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "needs-investigation",
      "confidence": 0.85,
      "reason": "The fix requires engineering work in the Skia build configuration to change d3d12.dll from a static import to a dynamic load. Closely related to #3267 but provides additional Windows 10 scale data."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Add backend/Direct3D and tenet/compatibility labels",
        "risk": "low",
        "confidence": 0.9,
        "labels": [
          "backend/Direct3D",
          "tenet/compatibility"
        ]
      },
      {
        "type": "link-related",
        "description": "Link to related issue #3267 (same d3d12.dll root cause on Win7)",
        "risk": "low",
        "confidence": 0.95
      },
      {
        "type": "add-comment",
        "description": "Post analysis acknowledging the issue and linking to #3267",
        "risk": "high",
        "confidence": 0.8
      }
    ]
  }
}
