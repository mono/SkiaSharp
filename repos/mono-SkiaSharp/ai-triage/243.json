{
  "meta": {
    "schemaVersion": "1.0",
    "number": 243,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2025-07-23T12:00:00Z"
  },
  "summary": "Request to bundle ANGLE native binaries for win7 runtimes to enable GPU-accelerated OpenGL ES rendering via DirectX on Windows 7",
  "classification": {
    "type": {
      "value": "type/feature-request",
      "confidence": 0.95
    },
    "area": {
      "value": "area/build",
      "confidence": 0.85
    },
    "platforms": [
      "os/Windows-Classic"
    ],
    "backends": [
      "backend/OpenGL"
    ]
  },
  "evidence": {
    "reproEvidence": {
      "screenshots": [
        {
          "url": "https://i.imgur.com/DZWkJdg.png"
        }
      ],
      "codeSnippets": [
        "text: https://www.dropbox.com/s/ayi8ill098jxh1d/angle-d3d9.zip?dl=0"
      ]
    }
  },
  "analysis": {
    "summary": "Feature request from 2017 to bundle ANGLE for Win7 GPU rendering. Since then, SkiaSharp added ANGLE support for WinUI, a Direct3D backend, and GRGlInterface.CreateAngle() for assembling ANGLE interfaces on Windows. Win7 reached EOL in 2020 and the OP themselves suggested closing. The broader desktop ANGLE integration (WPF) is tracked in #1521.",
    "rationale": "type: Reporter requests bundling a new native dependency (ANGLE) that isn't currently included. This is adding new capability, not fixing broken behavior. area: The request is about including ANGLE native binaries in the build/packaging pipeline. The API support (GRGlInterface.CreateAngle) already exists — only the build-time bundling of libEGL.dll/libGLESv2.dll is missing. backends: ANGLE provides OpenGL ES over DirectX. The request enables GL-based rendering on Windows systems without native OpenGL support. platforms: Explicitly about Windows desktop runtimes (originally Win7). ANGLE for UWP/WinUI is already handled. versionAnalysis.currentRelevance: The specific Win7 use case is no longer relevant (EOL Jan 2020). The broader desktop ANGLE need is better tracked in #1521 (Angle WPF). SkiaSharp now has a Direct3D backend as an alternative. The OP themselves suggested closing. actionability.suggestedAction: The original Win7 motivation is obsolete, the OP requested closure, DLL conflict risks were identified, and the remaining desktop ANGLE work is tracked in #1521. The Direct3D backend and existing CreateAngle() API address the underlying GPU rendering need through different means.",
    "codeInvestigation": [
      {
        "file": "binding/SkiaSharp/GRGlInterface.cs",
        "lines": "27-48",
        "finding": "GRGlInterface.Create() already falls back to CreateAngle() on Windows. CreateAngle() loads libEGL.dll and libGLESv2.dll if present. ANGLE interface assembly is supported — the issue is about bundling the DLLs, not adding API support.",
        "relevance": "related"
      },
      {
        "file": "binding/SkiaSharp/GRGlInterface.cs",
        "lines": "125-198",
        "finding": "AngleLoader class loads libEGL.dll and libGLESv2.dll via LoadLibrary on Windows. Already handles UWP (LoadPackagedLibrary) and desktop (LoadLibrary). The loader infrastructure exists; what's missing is bundling the binaries for desktop.",
        "relevance": "related"
      },
      {
        "file": "binding/SkiaSharp/EnumMappings.cs",
        "lines": "8-16",
        "finding": "GRBackend enum includes Direct3D = 4, confirming a native D3D backend now exists as an alternative to ANGLE for Windows GPU rendering.",
        "relevance": "related"
      },
      {
        "file": "source/SkiaSharp.Views/SkiaSharp.Views.WinUI/AngleSwapChainPanel.cs",
        "lines": "1-50",
        "finding": "ANGLE is already used for WinUI rendering via AngleSwapChainPanel with GlesContext. Shows ANGLE integration exists for UWP/WinUI but not for WPF/WinForms desktop.",
        "relevance": "related"
      },
      {
        "file": "source/SkiaSharp.Views/SkiaSharp.Views.WindowsForms/SKGLControl.cs",
        "lines": "1-50",
        "finding": "WinForms GL control uses OpenTK (native OpenGL), not ANGLE. This is where ANGLE could help on systems without proper OpenGL drivers, but this is tracked in #1521.",
        "relevance": "related"
      }
    ],
    "nextQuestions": [
      "Whether any users still need ANGLE specifically for Win7 given its EOL status",
      "Whether #1521 (Angle WPF) fully supersedes the desktop ANGLE bundling need from this issue"
    ],
    "resolution": {
      "hypothesis": "The original Win7 ANGLE request is obsolete. GPU rendering on Windows desktop is now achievable through the Direct3D backend or by manually providing ANGLE DLLs alongside the application.",
      "proposals": [
        {
          "description": "SkiaSharp now supports GRBackend.Direct3D with the SkiaSharp.Direct3D.Vortice package. This provides native DirectX rendering without ANGLE as a middleman.",
          "confidence": 0.8,
          "effort": "small"
        },
        {
          "description": "GRGlInterface.CreateAngle() already loads libEGL.dll and libGLESv2.dll if present. Users can include pre-built ANGLE binaries in their application output directory for Windows desktop GL rendering.",
          "confidence": 0.85,
          "effort": "small"
        },
        {
          "description": "The broader need for ANGLE in WPF/WinForms views is tracked in issue #1521 which includes a working implementation approach. Close this Win7-specific issue and consolidate efforts there.",
          "confidence": 0.85,
          "effort": "small"
        }
      ]
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "close-with-docs",
      "confidence": 0.82,
      "reason": "Win7 is EOL, OP requested closure, DLL conflict risks make bundling problematic, Direct3D backend exists as alternative, and remaining desktop ANGLE work is tracked in #1521."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Add backend/OpenGL label to reflect the rendering backend involved",
        "risk": "low",
        "confidence": 0.85,
        "labels": [
          "backend/OpenGL"
        ]
      },
      {
        "type": "link-related",
        "description": "Cross-reference #1521 (Angle WPF) as the continuation of desktop ANGLE work",
        "risk": "low",
        "confidence": 0.88
      },
      {
        "type": "add-comment",
        "description": "Post closing comment explaining the current state of ANGLE and D3D support",
        "risk": "high",
        "confidence": 0.8
      },
      {
        "type": "close-issue",
        "description": "Close as completed — original Win7 use case is obsolete",
        "risk": "medium",
        "confidence": 0.8
      }
    ]
  }
}
