{
  "meta": {
    "schemaVersion": "1.0",
    "number": 3422,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-12T16:41:00Z",
    "currentLabels": [
      "type/bug",
      "os/Windows-Universal-UWP",
      "os/WASM",
      "area/SkiaSharp.Views.Blazor",
      "tenet/reliability"
    ]
  },
  "summary": "SkiaSharp fails on Blazor WASM with .NET 10: TypeInitializationException for SKImageInfo / DllNotFoundException for libSkiaSharp. Root cause is SkiaSharp does not yet officially target net10.0 \u2014 the Blazor package ships net6.0/net8.0 only, and the pre-built WASM static libraries (.a) may not match .NET 10's Emscripten version. The wasm-tools workload must also be explicitly installed. PR #3514 tracks adding .NET 10 support.",
  "classification": {
    "type": {
      "value": "type/bug",
      "confidence": 0.9
    },
    "area": {
      "value": "area/SkiaSharp.Views.Blazor",
      "confidence": 0.95
    },
    "platforms": [
      "os/WASM"
    ],
    "tenets": [
      "tenet/compatibility"
    ]
  },
  "evidence": {
    "bugSignals": {
      "severity": "high",
      "errorType": "crash",
      "errorMessage": "ManagedError: TypeInitialization_Type, SkiaSharp.SKImageInfo",
      "reproQuality": "complete",
      "targetFrameworks": [
        "net10.0"
      ]
    },
    "reproEvidence": {
      "stepsToReproduce": [
        "Create a Blazor WebAssembly project targeting net10.0",
        "Add SkiaSharp.Views.Blazor NuGet package (any version: 3.119.2-preview.1, 3.119.1, 3.118.0-preview.2.3)",
        "Add an SKCanvasView component to a Razor page",
        "Run the application and navigate to the page with the component"
      ],
      "environmentDetails": "Windows 11 Pro, VS 2026, .NET 10, Edge/Chrome. Also reproduced on macOS with Rider (comments #4, #9) and Linux production deployments (comment #8).",
      "relatedIssues": [
        3435,
        3224,
        2732,
        3068,
        3514
      ]
    },
    "versionAnalysis": {
      "mentionedVersions": [
        "3.119.2-preview.1",
        "3.119.1",
        "3.118.0-preview.2.3",
        "2.88.9"
      ],
      "currentRelevance": "likely",
      "relevanceReason": "The SkiaSharp build system still targets net8.0 as TFMCurrent with TFMNext empty \u2014 no net10.0 TFM exists in the released packages. PR #3514 (open) adds .NET 10 support but has not been merged or released."
    },
    "fixStatus": {
      "likelyFixed": false,
      "confidence": 0.75,
      "reason": "PR #3514 (open, not merged) updates TFMs to include net10.0 and restructures the build for .NET 10 SDK. Until that ships in a release, .NET 10 WASM support is not officially available.",
      "relatedPRs": [
        3514
      ]
    }
  },
  "analysis": {
    "summary": "Blazor WASM on .NET 10 fails because SkiaSharp does not yet officially support net10.0. The Blazor package only ships net6.0 and net8.0 assemblies. While the NativeFileReference targets use VersionGreaterThanOrEquals(9.0) which should match 10.0, the pre-built static libraries (.a files) may be incompatible with .NET 10's Emscripten version. Additionally, the wasm-tools workload must be explicitly installed. Some users report dotnet workload restore fixes the issue, but others (especially on macOS) still fail.",
    "rationale": "Classified as type/bug because the expected behavior (SkiaSharp rendering in Blazor WASM) fails with a runtime exception. Area is SkiaSharp.Views.Blazor since the failure is specific to Blazor WASM platform integration, not core SkiaSharp functionality. Severity is high because it completely blocks all SkiaSharp usage on .NET 10 WASM \u2014 no workaround works for all users. The os/Windows-Universal-UWP label currently applied is incorrect \u2014 this is a WASM issue, not UWP.",
    "keySignals": [
      {
        "text": "ManagedError: TypeInitialization_Type, SkiaSharp.SKImageInfo",
        "source": "issue body",
        "interpretation": "SKImageInfo static constructor fails because libSkiaSharp cannot be loaded \u2014 classic WASM native linking failure."
      },
      {
        "text": "DllNotFoundException: libSkiaSharp at SkiaSharp.SKPath..ctor",
        "source": "comment #3 (jahnotto)",
        "interpretation": "Same root cause \u2014 native static library not linked into dotnet.wasm. Confirms this is a build-time linking issue, not a runtime loading issue."
      },
      {
        "text": "I tried rolling back to 2.88.9 but the same issue occurs, so it's something specific to .Net 10",
        "source": "comment #4 (Webreaper)",
        "interpretation": "Version-independent: all SkiaSharp versions fail on .NET 10 WASM. Points to a .NET 10 SDK / Emscripten toolchain incompatibility rather than a SkiaSharp regression."
      },
      {
        "text": "Restoring the .NET 10 wasm workload helped me. dotnet workload restore",
        "source": "comment #6 (EngstromJimmy)",
        "interpretation": "Confirms wasm-tools workload is required but not automatically installed. This is a partial workaround \u2014 works on Windows but not macOS for all users."
      },
      {
        "text": "dotnet workload restore didn't have any effect for me - still seeing the same issue on MacOS",
        "source": "comment #8 (Webreaper)",
        "interpretation": "Workload restore alone is insufficient on macOS. Suggests possible Emscripten version mismatch between pre-built .a files and .NET 10 SDK on macOS."
      },
      {
        "text": "TFMCurrent=net8.0, TFMNext=<empty>",
        "source": "source/SkiaSharp.Build.props:64-66",
        "interpretation": "SkiaSharp's build system doesn't target net10.0. The Blazor package only ships net6.0 and net8.0 assemblies. PR #3514 addresses this."
      }
    ],
    "codeInvestigation": [
      {
        "file": "source/SkiaSharp.Build.props",
        "lines": "62-66",
        "finding": "TFMPrevious=net6.0, TFMCurrent=net8.0, TFMNext=<empty>. No net10.0 TFM defined. The Blazor package only builds for net6.0 and net8.0.",
        "relevance": "direct"
      },
      {
        "file": "source/SkiaSharp.Views/SkiaSharp.Views.Blazor/SkiaSharp.Views.Blazor.csproj",
        "lines": "4",
        "finding": "TargetFrameworks=$(TFMCurrent);$(TFMPrevious);$(TFMNext) \u2014 resolves to net8.0;net6.0 only. No net10.0 PackageReference for Microsoft.AspNetCore.Components.Web exists (only net6.0\u2013net9.0 conditions).",
        "relevance": "direct"
      },
      {
        "file": "binding/SkiaSharp.NativeAssets.WebAssembly/buildTransitive/SkiaSharp.targets",
        "lines": "23-33",
        "finding": "NativeFileReference for net9.0+ uses VersionGreaterThanOrEquals(9.0) which matches 10.0. The 3.1.56 emscripten variant .a files should be selected. However, .NET 10 may ship a newer Emscripten requiring recompiled .a files.",
        "relevance": "direct"
      },
      {
        "file": "binding/SkiaSharp.NativeAssets.WebAssembly/buildTransitive/SkiaSharp.targets",
        "lines": "35-51",
        "finding": "A workaround for dotnet/runtime#109289 reorders link step args for libSkiaSharp.a. This workaround may not be effective or needed in .NET 10, potentially causing linking failures.",
        "relevance": "related"
      }
    ],
    "workarounds": [
      "Run `dotnet workload install wasm-tools` or `dotnet workload restore` to ensure the WASM build tools are installed (works for some users on Windows, not confirmed on macOS)",
      "Stay on .NET 9 until SkiaSharp officially adds .NET 10 support (PR #3514)"
    ],
    "nextQuestions": [
      "Does PR #3514 (.NET 10 SDK update) resolve this completely, including the macOS failures?",
      "Are the pre-built emscripten 3.1.56 .a files compatible with .NET 10's emscripten version, or do new .a files need to be compiled?",
      "Is the _SkiaSharpRuntimeIssue109289Workaround target still needed or harmful on .NET 10?"
    ],
    "resolution": {
      "hypothesis": "SkiaSharp does not yet support .NET 10. The Blazor package targets net6.0/net8.0 only, and the WASM static libraries may be compiled against an incompatible Emscripten version. The wasm-tools workload must be installed but is not sufficient on all platforms.",
      "proposals": [
        {
          "title": "Install wasm-tools workload",
          "description": "Run `dotnet workload install wasm-tools` to ensure the WASM build tools are available. This enables the native static linking step that embeds libSkiaSharp into dotnet.wasm. Works on Windows for some users but may not resolve the issue on macOS.",
          "codeSnippet": "dotnet workload install wasm-tools\n# or\ndotnet workload restore",
          "confidence": 0.5,
          "effort": "trivial"
        },
        {
          "title": "Stay on .NET 9",
          "description": "Downgrade the project to net9.0 until SkiaSharp ships official .NET 10 support. .NET 9 + SkiaSharp 3.119.1 is a known-working combination for Blazor WASM.",
          "confidence": 0.9,
          "effort": "small"
        },
        {
          "title": "Merge PR #3514 \u2014 .NET 10 SDK update",
          "description": "PR #3514 restructures TFMs to include net10.0 as TFMCurrent and updates the SDK. This is the proper fix that will add official .NET 10 support to SkiaSharp including the Blazor WASM package.",
          "confidence": 0.85,
          "effort": "large"
        }
      ],
      "recommendedProposal": "Stay on .NET 9",
      "recommendedReason": "Most reliable workaround while PR #3514 is in progress. The wasm-tools workload install only works for some users."
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "needs-investigation",
      "confidence": 0.85,
      "reason": "Known gap: .NET 10 is not yet an officially supported TFM. PR #3514 is the fix path but needs to be merged and released. Issue should remain open to track .NET 10 WASM support."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Fix labels: remove incorrect os/Windows-Universal-UWP, add tenet/compatibility",
        "risk": "low",
        "confidence": 0.95,
        "labels": [
          "type/bug",
          "area/SkiaSharp.Views.Blazor",
          "os/WASM",
          "tenet/compatibility"
        ]
      },
      {
        "type": "link-related",
        "description": "Cross-reference with #3514 (.NET 10 SDK update PR)",
        "risk": "low",
        "confidence": 0.9,
        "linkedIssue": 3514
      },
      {
        "type": "link-duplicate",
        "description": "Mark #3435 as duplicate of this issue (confirmed by reporter in #3435 comment)",
        "risk": "medium",
        "confidence": 0.95,
        "linkedIssue": 3435
      },
      {
        "type": "add-comment",
        "description": "Post analysis with workaround and status update on .NET 10 support",
        "risk": "high",
        "confidence": 0.8,
        "comment": "Thanks for the report and the additional confirmation from others in the thread.\n\nSkiaSharp doesn't officially support .NET 10 yet \u2014 the current packages target net6.0 and net8.0 for Blazor WASM. The `DllNotFoundException` / `TypeInitializationException` occurs because the WASM static libraries (`.a` files) aren't being linked into `dotnet.wasm` correctly under the .NET 10 SDK.\n\nSome users have had success with:\n\n```\ndotnet workload install wasm-tools\n```\n\nThis ensures the WASM build tools are installed, which are required for native static linking. However, this doesn't work for everyone \u2014 particularly on macOS \u2014 likely due to Emscripten version differences between the pre-built libraries and the .NET 10 SDK.\n\nThe most reliable workaround right now is to **stay on .NET 9** (`net9.0`) until .NET 10 support ships. Work is tracked in PR #3514.\n\nWe'll update this issue when .NET 10 support is available in a release."
      }
    ]
  }
}