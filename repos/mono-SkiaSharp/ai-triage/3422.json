{
  "meta": {
    "schemaVersion": "3.0",
    "number": 3422,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-08T15:00:00Z"
  },
  "summary": "SkiaSharp fails to load in Blazor WASM on .NET 10 with TypeInitializationException and DllNotFoundException for libSkiaSharp",
  "classification": {
    "type": {
      "value": "type/bug",
      "confidence": 0.95
    },
    "area": {
      "value": "area/views.blazor",
      "confidence": 0.82
    },
    "platforms": [
      "os/WASM"
    ]
  },
  "evidence": {
    "reproEvidence": {
      "stepsToReproduce": [
        "Create a Blazor WebAssembly project targeting net10.0",
        "Add SkiaSharp.Views.Blazor NuGet package (any version: 3.119.x, 3.118.x, or even 2.88.x)",
        "Add an SKCanvasView component to a Razor page",
        "Navigate to the page in the browser"
      ],
      "environmentDetails": "Windows 11 Pro, VS 2026, .NET 10, Edge/Chrome. Also reproduced on macOS (Rider) and Linux production deployments.",
      "codeSnippets": [
        "xml: <Project Sdk=\"Microsoft.NET.Sdk.BlazorWebAssembly\">\n\t<PropertyGroup>\n\t\t<TargetFramework>net10.0</TargetFramework>\n\t</PropertyGroup>\n\t<ItemGroup>\n\t\t<PackageReference Include=\"SkiaSharp.Views.Blazor\" Version=\"3.119.2-preview.1\" />\n\t</ItemGroup>\n</Project>",
        "csharp: @using SkiaSharp\n@using SkiaSharp.Views.Blazor\n\n<SKCanvasView OnPaintSurface=\"OnPaintSurface\" IgnorePixelScaling=\"true\" />\n\n@code {\n    private void OnPaintSurface(SKPaintSurfaceEventArgs args)\n    {\n        var canvas = args.Surface.Canvas;\n        canvas.Clear(SkiaSharp.SKColors.White);\n    }\n}"
      ]
    },
    "bugSignals": {
      "severity": "high",
      "errorType": "crash"
    },
    "versionAnalysis": {
      "mentionedVersions": [
        "3.119.2-preview.1",
        "3.118.0-preview.2.3",
        "3.119.1",
        "2.88.9",
        "2.88.0"
      ]
    }
  },
  "analysis": {
    "summary": "SkiaSharp's native library (libSkiaSharp) fails to load in Blazor WASM projects targeting .NET 10. The error manifests as TypeInitializationException on SKImageInfo or DllNotFoundException for libSkiaSharp. The issue spans all SkiaSharp versions, suggesting a breaking change in .NET 10's WASM workload or native asset resolution pipeline.",
    "rationale": "type: Users encounter TypeInitializationException and DllNotFoundException when using SkiaSharp in Blazor WASM on .NET 10. This is clearly broken behavior — the native library cannot be loaded at all. area: The issue occurs specifically when using SKCanvasView in Blazor WASM. While the root cause is native library loading, the affected component is SkiaSharp.Views.Blazor and the fix likely involves WASM-specific packaging or workload integration. platforms: This is a Blazor WebAssembly issue. The reporter's development machine is Windows but the runtime target is WASM. The os/Windows-Universal-UWP label currently on the issue is incorrect. tenets: The core issue is compatibility with .NET 10's WASM workload. SkiaSharp works on older .NET versions but fails on .NET 10. bugSignals.severity: Complete failure to load the native library — SkiaSharp is entirely unusable in Blazor WASM on .NET 10. Workaround is inconsistent across platforms. Multiple users affected with community engagement. actionability.suggestedAction: Real bug on .NET 10 WASM affecting multiple users with inconsistent workaround. Root cause is unclear — likely a .NET 10 platform change in native dependency handling — requiring investigation before a fix can be applied. regression.isRegression: The issue occurs across all SkiaSharp versions (2.88.0 through 3.119.2-preview.1) on .NET 10 WASM. No SkiaSharp version ever worked on .NET 10 WASM, so this is a platform incompatibility rather than a SkiaSharp regression. versionAnalysis.currentRelevance: Issue persists across all tested SkiaSharp versions on .NET 10 WASM, indicating it is a current platform-level issue not tied to a specific SkiaSharp release.",
    "codeInvestigation": [],
    "workarounds": [
      "Running 'dotnet workload restore' resolved the issue for some users (EngstromJimmy, jahnotto) but not for others (Webreaper on macOS/Linux)."
    ],
    "nextQuestions": [
      "Whether the root cause is a .NET 10 WASM workload packaging change or a SkiaSharp build/packaging issue for the WASM target",
      "Why 'dotnet workload restore' fixes the issue for some users but not others — could be OS-specific workload behavior",
      "Whether the issue also affects Blazor Server or is strictly WASM-only",
      "Whether .NET 10 preview vs stable makes a difference"
    ],
    "resolution": {
      "hypothesis": ".NET 10 changed how WASM native dependencies are resolved or packaged, and SkiaSharp's WASM native assets are not being included in the final output. The 'dotnet workload restore' fix suggests that the wasm-tools workload has updated components that affect native library linking, and some environments have stale or missing workload installations.",
      "proposals": [
        {
          "description": "Compare how libSkiaSharp.wasm is packaged and linked in .NET 9 vs .NET 10 Blazor WASM projects. Check if NativeFileReference or WasmNativeAssets handling changed. May require updating SkiaSharp.Views.Blazor packaging.",
          "confidence": 0.7,
          "effort": "medium"
        },
        {
          "description": "If .NET 10 changed the WASM native asset pipeline (e.g., new MSBuild props, different file layout), update SkiaSharp.Views.Blazor to conform. This is the definitive fix.",
          "confidence": 0.65,
          "effort": "medium"
        },
        {
          "description": "As an interim measure, document that users should run 'dotnet workload restore' after installing .NET 10. Note the limitation that this does not work for all users/platforms.",
          "confidence": 0.5,
          "effort": "small"
        }
      ]
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "needs-investigation",
      "confidence": 0.88,
      "reason": "Real bug affecting multiple users with .NET 10 WASM. Root cause is likely a .NET 10 platform change in native dependency handling. Needs investigation into what changed and how SkiaSharp's WASM packaging should adapt."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Fix labels: add tenet/compatibility, remove incorrect os/Windows-Universal-UWP",
        "risk": "low",
        "confidence": 0.92,
        "labels": [
          "tenet/compatibility"
        ]
      },
      {
        "type": "add-comment",
        "description": "Post analysis acknowledging the .NET 10 WASM issue and partial workaround",
        "risk": "high",
        "confidence": 0.8
      }
    ]
  }
}
