{
  "meta": {
    "schemaVersion": "1.0",
    "number": 3396,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2025-07-24T12:00:00Z"
  },
  "summary": "User unable to load libSkiaSharp native library in Unity WebGL — gets DllNotFoundException despite trying multiple NativeAssets packages",
  "classification": {
    "type": {
      "value": "type/question",
      "confidence": 0.8
    },
    "area": {
      "value": "area/libSkiaSharp.native",
      "confidence": 0.9
    },
    "platforms": [
      "os/WASM"
    ]
  },
  "evidence": {
    "reproEvidence": {
      "stepsToReproduce": [
        "Download managed SkiaSharp NuGet and NativeAssets.Windows, NativeAssets.Android, NativeAssets.WebAssembly",
        "Set up Unity project targeting WebGL",
        "Place libSkiaSharp.a files in Unity project",
        "Build and run — browser console shows DllNotFoundException for libSkiaSharp"
      ],
      "environmentDetails": "Unity 2021.2 and 2022.3, targeting WebGL/WebAssembly"
    }
  },
  "analysis": {
    "summary": "User is trying to use SkiaSharp in Unity WebGL, which is not an officially supported scenario. Unity's native plugin system differs from .NET's standard P/Invoke, and the NativeAssets.WebAssembly package is designed for Blazor/browser WASM via Emscripten, not Unity's WebGL build pipeline. The DllNotFoundException indicates the native library is not being linked into the Unity WebGL build correctly.",
    "rationale": "type: Despite the [FEATURE] template prefix, the actual content is asking how to get SkiaSharp working in Unity WebGL. The user says 'Has anyone got this working?' and 'I have been trying for about 5 hours'. This is a support/how-to question about an unsupported platform, not a request for new API functionality. area: The core error is DllNotFoundException for libSkiaSharp, which is a native library loading issue. The previous label area/SkiaSharp.Views.Uno was incorrect — Unity and Uno Platform are entirely different frameworks. platforms: Unity WebGL compiles to WebAssembly. The os/WASM label is the correct platform classification. tenets: This is fundamentally a cross-platform compatibility question — SkiaSharp works on Windows and Android in Unity but not in the WebGL/WASM target. actionability.suggestedAction: Unity is not an officially supported platform. This is a community support question better suited to a Q&A discussion where other Unity users can share their experiences. versionAnalysis.currentRelevance: No specific SkiaSharp version was mentioned in the issue. The user referenced NativeAssets packages but provided no version numbers, so relevance to current releases cannot be determined.",
    "codeInvestigation": [],
    "nextQuestions": [
      "Whether SkiaSharp can technically work in Unity WebGL at all given the static linking requirement",
      "Which exact SkiaSharp version the user is trying to use",
      "Whether the user has tried building libSkiaSharp from source with Emscripten for Unity's WebGL target"
    ],
    "resolution": {
      "hypothesis": "Unity WebGL requires native plugins to be statically linked .a files compiled with Emscripten, but the NativeAssets.WebAssembly package provides binaries built for the Blazor/browser WASM runtime, not for Unity's build pipeline. The P/Invoke mechanism in Unity WebGL also works differently from standard .NET.",
      "proposals": [
        {
          "description": "Compile libSkiaSharp using Emscripten with Unity-compatible settings. This would produce a .a static library that Unity can link into its WebGL build. Requires knowledge of Skia's build system (GN/Ninja) and Unity's native plugin requirements.",
          "confidence": 0.5,
          "effort": "large"
        },
        {
          "description": "Study how SkiaSharp.Views.Blazor integrates with WebAssembly and adapt the approach for Unity WebGL. The Blazor integration already solves WASM compilation but uses a different hosting model.",
          "confidence": 0.35,
          "effort": "large"
        },
        {
          "description": "Consider Unity's built-in Vector Graphics package or other Unity-native solutions for vector art rendering in WebGL, since SkiaSharp does not officially support Unity as a host platform.",
          "confidence": 0.7,
          "effort": "small"
        }
      ]
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "convert-to-discussion",
      "confidence": 0.75,
      "reason": "Unity is not an officially supported platform for SkiaSharp. This is a community support question better suited to a Q&A discussion where Unity users can share experiences and workarounds."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Fix area label (Uno → native) and change type to question",
        "risk": "low",
        "confidence": 0.9,
        "labels": [
          "type/question",
          "area/libSkiaSharp.native",
          "tenet/compatibility"
        ]
      },
      {
        "type": "add-comment",
        "description": "Explain Unity WebGL limitations and suggest alternatives",
        "risk": "high",
        "confidence": 0.8
      },
      {
        "type": "convert-to-discussion",
        "description": "Convert to Q&A discussion for community input",
        "risk": "high",
        "confidence": 0.65
      }
    ]
  }
}
