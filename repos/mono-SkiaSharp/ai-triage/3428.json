{
  "meta": {
    "schemaVersion": "2.0",
    "number": 3428,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-08T15:00:00Z",
    "currentLabels": ["type/bug", "os/iOS", "area/SkiaSharp.Views.Maui", "tenet/reliability"]
  },
  "summary": "SKGLView fails to bind EAGLDrawable on .NET 10 MAUI iOS, rendering white canvas instead of content",
  "classification": {
    "type": { "value": "type/bug", "confidence": 0.95 },
    "area": { "value": "area/SkiaSharp.Views.Maui", "confidence": 0.95 },
    "backends": [{ "value": "backend/OpenGL", "confidence": 0.92 }],
    "platforms": [{ "value": "os/iOS", "confidence": 0.98 }],
    "tenets": [
      { "value": "tenet/reliability", "confidence": 0.90 },
      { "value": "tenet/compatibility", "confidence": 0.85 }
    ],
    "partner": { "value": "partner/maui", "confidence": 0.85 }
  },
  "evidence": {
    "bugSignals": {
      "hasCrash": false,
      "hasStackTrace": false,
      "reproQuality": "partial",
      "hasWorkaround": false,
      "workaroundSummary": null,
      "targetFrameworks": ["net10.0-ios"],
      "severity": "high",
      "severityReason": "GL rendering is completely broken on iOS with .NET 10 — white canvas with no content. No workaround provided. Affects all SKGLView users targeting .NET 10 on iOS."
    },
    "reproEvidence": {
      "repoLinks": [
        {
          "url": "https://github.com/Mapsui/Mapsui/blob/main/Mapsui.UI.Maui/MapControl.cs",
          "description": "Mapsui MapControl source showing the GL paint surface handler code that triggers the issue."
        }
      ],
      "stepsToReproduce": [
        "Create a MAUI app targeting .NET 10 for iOS",
        "Add SkiaSharp 3.116.0 with SKGLView (GL-accelerated rendering)",
        "Run on an iOS device or simulator",
        "Observe white canvas and 'Failed to bind EAGLDrawable' in device logs"
      ],
      "codeSnippets": [
        {
          "language": "csharp",
          "code": "private void OnGLPaintSurface(object? sender, SKPaintGLSurfaceEventArgs args)\n{\n    if (_glView?.GRContext is null)\n    {\n        Logger.Log(LogLevel.Warning, \"Refresh can not be called because GRContext is null\");\n        return;\n    }\n    PaintSurface(args.Surface.Canvas);\n}",
          "context": "Mapsui MapControl GL paint handler — the callback that should render content but results in white canvas."
        }
      ],
      "environmentDetails": "SkiaSharp 3.116.0, .NET 10, MAUI, iOS, Visual Studio macOS. Works on .NET 9, broken on .NET 10. Last known good SkiaSharp version: 2.88.9."
    },
    "versionAnalysis": {
      "mentionedVersions": ["3.116.0", "2.88.9"],
      "currentRelevance": "likely",
      "reason": "Issue is on latest SkiaSharp 3.116.0 with bleeding-edge .NET 10. The problem is likely related to .NET 10's iOS runtime changes rather than SkiaSharp version, since 3.116.0 works on .NET 9. Apple has deprecated OpenGL ES (EAGL) since iOS 12, and .NET 10 may have removed or changed EAGL support."
    },
    "regression": {
      "isRegression": true,
      "confidence": 0.85,
      "reason": "Reporter states it works on .NET 9 but not .NET 10. Same SkiaSharp version (3.116.0) works on .NET 9 but fails on .NET 10, indicating a regression introduced by .NET 10 runtime or iOS SDK changes rather than by SkiaSharp itself.",
      "workedInVersion": "3.116.0 on .NET 9",
      "brokeInVersion": "3.116.0 on .NET 10"
    },
    "fixStatus": null
  },
  "analysis": {
    "summary": "SKGLView fails to render on iOS when targeting .NET 10, producing a white canvas and 'Failed to bind EAGLDrawable' error. The root cause is likely .NET 10's handling of the deprecated OpenGL ES (EAGL) APIs on iOS, since SKGLView depends on GLKView/EAGLContext which Apple deprecated in iOS 12.",
    "keySignals": [
      {
        "text": "Failed to bind EAGLDrawable on .NET 10 in MAUI iOS",
        "source": "title",
        "interpretation": "EAGLDrawable is the iOS OpenGL ES rendering surface. Failure to bind it means the GL framebuffer cannot be created, resulting in no rendering output."
      },
      {
        "text": "not in .NET 9",
        "source": "body",
        "interpretation": "Explicitly a .NET 10-specific regression. Same SkiaSharp version works on .NET 9, pointing to a runtime or SDK change."
      },
      {
        "text": "Failed to bind EAGLDrawable: <CAEAGLLayer: 0x600001767a40> to GL_RENDERBUFFER 1",
        "source": "comment 2 (charlenni)",
        "interpretation": "Actual iOS system error confirming EAGL layer binding failure and incomplete framebuffer objects — the OpenGL ES rendering pipeline is broken."
      },
      {
        "text": "No error and a white canvas",
        "source": "body",
        "interpretation": "The GL view silently fails to render — no crash, just blank output. This is a silent rendering failure."
      },
      {
        "text": "Last Known Good Version of SkiaSharp: 2.88.9 (Previous)",
        "source": "body",
        "interpretation": "Reporter considers 2.88.9 the last good version, but the issue is .NET 10 specific so the SkiaSharp version may be less relevant than the .NET target framework change."
      }
    ],
    "fieldRationales": [
      {
        "field": "type",
        "chosen": "type/bug",
        "expandedReason": "Reporter describes a rendering failure — expected content but gets white canvas with 'Failed to bind EAGLDrawable' error. This is clearly broken behavior in a previously working scenario, not a question or feature request.",
        "alternatives": [{ "value": "type/question", "whyRejected": "Reporter is not asking how to do something — they have working code that broke on .NET 10." }]
      },
      {
        "field": "area",
        "chosen": "area/SkiaSharp.Views.Maui",
        "expandedReason": "The issue is in the MAUI SKGLView rendering pipeline. The code uses SKPaintGLSurfaceEventArgs in a MAUI context. The underlying SKGLView is consumed through MAUI controls.",
        "alternatives": [{ "value": "area/SkiaSharp.Views", "whyRejected": "While SKGLView lives in SkiaSharp.Views, the user is consuming it through MAUI, making SkiaSharp.Views.Maui the more specific and accurate label." }]
      },
      {
        "field": "backends",
        "chosen": "backend/OpenGL",
        "expandedReason": "EAGLDrawable and EAGLContext are the iOS-specific OpenGL ES rendering infrastructure. SKGLView explicitly creates EAGLContext(OpenGLES2). The failure is in GL framebuffer binding."
      },
      {
        "field": "platforms",
        "chosen": "os/iOS",
        "expandedReason": "Reporter explicitly states iOS. EAGL is iOS-only infrastructure. No mention of other platforms being affected."
      },
      {
        "field": "tenets",
        "chosen": "tenet/reliability, tenet/compatibility",
        "expandedReason": "Reliability: the GL view fails silently (white canvas) rather than rendering content. Compatibility: the issue is specific to .NET 10 — same code works on .NET 9, indicating a cross-version compatibility problem."
      },
      {
        "field": "partner",
        "chosen": "partner/maui",
        "expandedReason": "Issue is in the MAUI rendering pipeline. The .NET 10 target framework change may be a MAUI or .NET runtime-level change affecting EAGL context initialization."
      },
      {
        "field": "bugSignals.severity",
        "chosen": "high",
        "expandedReason": "GL rendering is completely broken on iOS with .NET 10 — no content rendered at all, no workaround provided. Not critical because the app does not crash and SKCanvasView (CPU rendering) is likely a viable fallback.",
        "alternatives": [
          { "value": "critical", "whyRejected": "No crash or data loss. The app still runs, just shows white canvas." },
          { "value": "medium", "whyRejected": "Complete rendering failure with no confirmed workaround warrants high, not medium." }
        ]
      },
      {
        "field": "actionability.suggestedAction",
        "chosen": "needs-investigation",
        "expandedReason": "GL rendering on iOS is completely broken on .NET 10 with no workaround. Need to determine whether .NET 10 or Apple removed EAGL support, and whether a fix is in SkiaSharp's scope or requires .NET runtime changes.",
        "alternatives": [{ "value": "close-wontfix", "whyRejected": "OpenGL ES is deprecated by Apple but SKGLView is still a supported SkiaSharp component — the rendering failure needs a fix or a documented migration to Metal." }]
      },
      {
        "field": "regression.isRegression",
        "chosen": "true",
        "expandedReason": "Reporter confirms the same SkiaSharp version (3.116.0) works on .NET 9 but fails on .NET 10, indicating a regression introduced by .NET 10 runtime or iOS SDK changes affecting EAGL context binding."
      },
      {
        "field": "versionAnalysis.currentRelevance",
        "chosen": "likely",
        "expandedReason": "Issue is on current SkiaSharp 3.116.0 with .NET 10 and relates to Apple's ongoing deprecation of OpenGL ES, making it actively relevant to current development."
      }
    ],
    "uncertainties": [
      "Exact .NET 10 preview version not specified — different previews may have different EAGL support levels",
      "Unknown whether Apple fully removed EAGL support in a recent iOS SDK or if .NET 10 changed its OpenGL ES bindings",
      "Unknown whether SKCanvasView (CPU rendering) works as a workaround on .NET 10",
      "Device model and iOS version not specified — could be relevant if newer hardware dropped EAGL support"
    ],
    "assumptions": [
      "Assumed the reporter is using a recent .NET 10 preview since they mention .NET 10 specifically",
      "Assumed EAGLDrawable error from charlenni's comment is the same error the original reporter sees, since they are both Mapsui contributors reporting the same problem"
    ],
    "resolution": {
      "hypothesis": ".NET 10's iOS runtime or Apple's latest SDK has changed how EAGLContext/EAGLDrawable binding works, breaking the deprecated OpenGL ES rendering path used by SKGLView. Apple deprecated OpenGL ES in iOS 12 (2018) and has been progressively removing support. SKGLView's GLKView+EAGLContext approach may no longer function correctly under .NET 10's updated iOS bindings.",
      "proposals": [
        {
          "title": "Switch to SKCanvasView (CPU rendering) as workaround",
          "description": "Replace SKGLView with SKCanvasView which uses CPU-based raster rendering instead of OpenGL ES. Avoids the deprecated EAGL path entirely. Immediate workaround but loses GPU acceleration.",
          "confidence": 0.80,
          "effort": "low"
        },
        {
          "title": "Implement Metal backend for iOS GPU rendering",
          "description": "Replace the OpenGL ES (EAGL) backend with Metal for iOS GPU rendering. This follows Apple's recommended migration path. Long-term correct solution but significant engineering effort.",
          "confidence": 0.90,
          "effort": "high"
        },
        {
          "title": "Investigate and patch .NET 10 EAGL context initialization",
          "description": "Debug why EAGLDrawable binding fails specifically on .NET 10. Create minimal repro, compare EAGL context state between .NET 9 and .NET 10, check if .NET 10 bindings removed or changed GLKit/EAGLContext APIs.",
          "confidence": 0.50,
          "effort": "medium"
        }
      ],
      "recommendedProposal": "Implement Metal backend for iOS GPU rendering",
      "recommendedReason": "Apple deprecated OpenGL ES in 2018 and has been progressively removing support. Patching EAGL is fighting a losing battle. SKCanvasView workaround can be recommended to users immediately while Metal support is implemented."
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "needs-investigation",
      "confidence": 0.85,
      "reason": "Real rendering failure on .NET 10 iOS that needs investigation. Root cause is likely .NET 10 or Apple's continued deprecation of OpenGL ES (EAGL). Need to determine if this is fixable in SkiaSharp or requires .NET runtime changes.",
      "missingInfo": ["device-info"]
    },
    "actions": [
      {
        "id": "labels-1",
        "type": "update-labels",
        "risk": "low",
        "description": "Add OpenGL backend, compatibility tenet, and MAUI partner labels",
        "reason": "Issue is specific to OpenGL backend on iOS, is a .NET 10 compatibility issue, and involves MAUI rendering pipeline",
        "confidence": 0.90,
        "dependsOn": null,
        "payload": {
          "labelsToAdd": ["backend/OpenGL", "tenet/compatibility", "partner/maui"],
          "labelsToRemove": []
        }
      },
      {
        "id": "comment-1",
        "type": "add-comment",
        "risk": "high",
        "description": "Post analysis noting EAGL deprecation and requesting .NET 10 preview version details",
        "reason": "Need to confirm .NET 10 preview version and offer SKCanvasView as interim workaround",
        "confidence": 0.80,
        "dependsOn": "labels-1",
        "payload": {
          "commentType": "request-info",
          "draftBody": "Thanks for reporting this — the EAGLDrawable binding failure is a significant signal.\n\nThe `SKGLView` on iOS uses `GLKView` with `EAGLContext` (OpenGL ES 2), which Apple deprecated back in iOS 12 in favor of Metal. The fact that this works on .NET 9 but not .NET 10 suggests that .NET 10's iOS runtime or the underlying Apple SDK may have changed how EAGL contexts are initialized or bound.\n\nA couple of questions that would help narrow this down:\n\n1. Which .NET 10 preview version are you using?\n2. Does switching from `SKGLView` to `SKCanvasView` (CPU rendering) work as a temporary workaround?\n\nLonger term, the path forward for iOS GPU rendering is likely Metal rather than OpenGL ES, given Apple's deprecation timeline. But we need to understand what specifically changed in .NET 10 first.",
          "requiresHumanEdit": true,
          "finalBody": null,
          "dedupeToken": "triage-3428-comment-1"
        }
      }
    ]
  }
}
