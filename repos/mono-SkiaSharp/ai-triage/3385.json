{
  "meta": {
    "schemaVersion": "3.0",
    "number": 3385,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2025-07-24T12:00:00Z"
  },
  "summary": "Request to add SkColorType.Gray16 for 16-bit grayscale PNG support, but upstream Skia lacks Gray16",
  "classification": {
    "type": {
      "value": "type/feature-request",
      "confidence": 0.97
    },
    "area": {
      "value": "area/SkiaSharp",
      "confidence": 0.9
    }
  },
  "evidence": {},
  "analysis": {
    "summary": "User requests adding SkColorType.Gray16 for 16-bit grayscale PNG support. However, upstream Skia does not define a kGray_16 color type â€” confirmed by both the Skia API header (SkColorType.h) and a community comment. Since SkiaSharp wraps Skia, this cannot be implemented without upstream support.",
    "rationale": "type: The user explicitly asks for new functionality (a new SKColorType value) that does not currently exist in SkiaSharp or upstream Skia. The title is prefixed with [FEATURE] and the issue uses the feature request template. area: SKColorType is a core SkiaSharp enum in the main binding library. It's not specific to views, HarfBuzz, or native loading. actionability.suggestedAction: This is a legitimate feature request, but it's blocked on upstream Skia adding kGray_16_SkColorType first. A community member has already provided the key information. The issue should stay open to track demand, but no immediate action is possible.",
    "codeInvestigation": [],
    "nextQuestions": [
      "Whether the user's use case could be served by an alternative approach such as converting 16-bit grayscale data to a supported format like RGBA_F16 or R16G16_unorm"
    ],
    "resolution": {
      "hypothesis": "The user wants to work with 16-bit grayscale images natively in SkiaSharp, but the underlying Skia C++ library does not define a kGray_16 color type, making direct support impossible without upstream changes.",
      "proposals": [
        {
          "description": "Monitor Skia's development for the addition of a 16-bit grayscale color type. Once added upstream, SkiaSharp can expose it as SKColorType.Gray16. This is the only path to native support.",
          "confidence": 0.4,
          "effort": "small"
        },
        {
          "description": "SkColorType.A16Unorm (kA16_unorm_SkColorType) stores a single 16-bit channel. While semantically it represents alpha, the user could repurpose it for grayscale data if they only need the raw pixel storage. Rendering would require custom shader logic.",
          "confidence": 0.5,
          "effort": "small"
        },
        {
          "description": "Load the PNG and convert pixel data into SKColorType.RgbaF16, mapping the 16-bit grayscale value to all RGB channels. This preserves precision but uses 4x the memory and requires manual conversion.",
          "confidence": 0.6,
          "effort": "medium"
        }
      ]
    }
  },
  "output": {
    "actionability": {
      "suggestedAction": "keep-open",
      "confidence": 0.8,
      "reason": "Legitimate feature request blocked on upstream Skia. Community has already clarified the upstream limitation. Keep open to track demand."
    },
    "actions": [
      {
        "type": "update-labels",
        "description": "Add area/SkiaSharp label to the feature request",
        "risk": "low",
        "confidence": 0.9,
        "labels": [
          "area/SkiaSharp"
        ]
      },
      {
        "type": "add-comment",
        "description": "Post comment explaining upstream dependency and suggesting workarounds",
        "risk": "high",
        "confidence": 0.7
      }
    ]
  }
}
