{
  "number": 2519,
  "type": "issue",
  "state": "closed",
  "title": "[QUESTION] How to convert a SKRuntimeEffect to SKColorFilter?",
  "body": "Hi,\r\nI am using SkiaSharp 2.88.3.\r\nThere is a function called ToColorFilter(uniforms, children) however I cannot understand how it is supposed to work.\r\n\r\nThe only example I found in SKRuntimeEffectTest.cs is not working and cf1 is null.\r\n\r\n\u0060\u0060\u0060\r\nvar src = @\u0022\r\nuniform shader input;\r\nhalf4 main() {\r\n    return sample(input);\r\n}\u0022;\r\n\r\n\t\t\tusing var img = SKImage.FromEncodedData(Path.Combine(PathToImages, \u0022baboon.jpg\u0022));\r\n\t\t\tcanvas.DrawImage(img, 0, 0);\r\n\r\n\t\t\tusing var effect = SKRuntimeEffect.Create(src, out var errorText);\r\n\t\t\tAssert.Null(errorText);\r\n\t\t\tAssert.NotNull(effect);\r\n\r\n\t\t\tvar cf1 = effect.ToColorFilter();\r\n\u0060\u0060\u0060\r\n\r\nI can only get a non-null ColorFilter using this Shader... but it is very useful.\r\n\u0060\u0060\u0060\r\nhalf4 main(float2 p) {\r\n    return half4(0);\r\n}\r\n\u0060\u0060\u0060\r\n\r\nI suppose there are limitations but what are they?\r\nI need to access to the main image (input?), and possibly to other images to combine them, or textures to use as Look-up tables.\r\nCan I do that using a custom color filter?\r\n\r\nThanks for helping.",
  "author": {
    "login": "dbriard",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-07-07T13:10:15",
  "updatedAt": "2023-08-31T09:00:26",
  "closedAt": "2023-07-31T16:35:49",
  "commentCount": 3,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:43:34.1166179Z",
    "reactions": [],
    "comments": [
      {
        "id": 1658739579,
        "author": "mattleibow",
        "body": "As of today, \u0060SKRuntimeEffect\u0060 is not supported on a raster/bitmap canvas and only on the GPU.\r\n\r\n",
        "createdAt": "2023-07-31T16:33:53",
        "reactions": []
      },
      {
        "id": 1658739751,
        "author": "mattleibow",
        "body": "Duplicate of https://github.com/mono/SkiaSharp/issues/1822",
        "createdAt": "2023-07-31T16:34:00",
        "reactions": []
      },
      {
        "id": 1659676120,
        "author": "dbriard",
        "body": "\u003E As of today, \u0060SKRuntimeEffect\u0060 is not supported on a raster/bitmap canvas and only on the GPU.\r\n\r\nHi @mattleibow \r\nThank you for your answer, however this one is not about rendering in bitmap, but how to SKRuntimeEffect\u0027s ToColorFilter function.\r\nI implemented Lut3D effect in a shader and I use it with DrawRect, but I would like to convert it to ColorFilter to use it with DrawImage. With shader, as I am using a LUT, I am forced to use Low interpolation (no-mipmap) sampling, instead of Medium (mipmaps) for the drawing image which do not look as great as medium.\r\n",
        "createdAt": "2023-08-01T06:51:45",
        "reactions": []
      }
    ]
  }
}