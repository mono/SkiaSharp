{
  "number": 2837,
  "type": "issue",
  "state": "open",
  "title": "[BUG] SKGLElement gives black screen on Intel integrated graphics",
  "body": "### Description\n\nWe are trying to use the new \u0060SKGLElement\u0060 WPF element for our project to replace the \u0060WinFormsHost\u0060 solution since it has many issues when integrated in a WPF project. The element works fine on a machine with an Nvidia or AMD graphic card. But, when tested on a machine with integrated Intel graphics only (or the other is disabled), it does not work for all graphics cards. On one of the testing machine that have an Intel HDG 4600 graphics card, we have a newly installed Windows 11 on it.\r\n\r\nWhen using \u0060WinFormsHost\u0060 with \u0060SKGLControl\u0060, it works just fine.\r\n\r\n\u0060SKGLElement\u0060 is based on \u0060GLWpfControl\u0060(https://github.com/opentk/GLWpfControl). We did try out this control, and it did result in the same issue. There are others faced the same issue: https://github.com/opentk/GLWpfControl/issues/73.\r\n\r\n@mattleibow @gmurray81 do you have any suggestions on how to resolve such issue. Is it a problem with the control or the machine it self? if so, why  \u0060SKGLControl\u0060 works fine on this machine? Aren\u0027t they both use OpenGL?\n\n### Code\n\n\u0060\u0060\u0060cs\r\ne.Surface.Canvas.Clear(new SKColor(255, 0, 0));\r\n\u0060\u0060\u0060\r\n\n\n### Expected Behavior\n\n_No response_\n\n### Actual Behavior\n\n_No response_\n\n### Version of SkiaSharp\n\n3.x (Alpha)\n\n### Last Known Good Version of SkiaSharp\n\n2.88.2 (Previous)\n\n### IDE / Editor\n\nVisual Studio (Windows)\n\n### Platform / Operating System\n\nWindows\n\n### Platform / Operating System Version\n\nWindows 11\n\n### Devices\n\nHP Mini PC with Intel HDG 4600\n\n### Relevant Screenshots\n\n_No response_\n\n### Relevant Log Output\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "AhmedEssoubai",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2024-04-16T21:15:46",
  "updatedAt": "2025-01-06T18:43:38",
  "commentCount": 2,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T12:47:52.7509674Z",
    "reactions": [],
    "comments": [
      {
        "id": 2387037585,
        "author": "romen-h",
        "body": "I have been working around this issue by upgrading or downgrading Intel graphics drivers, it seems to be an issue on Intel\u0027s side unfortunately. It\u0027s also likely to be an issue that the upstream GlWpfControl would have to fix rather than SkiaSharp.\r\n\r\nI had a system with Intel UHD 630 and tested a bunch of driver versions to find the exact version that the problem started happening:\r\n\u0060\u0060\u0060\r\nDriver Version, \tMM/DD/YYYY, \tWorking\r\n15.40.7.4279,\t\t09/01/2015,\t        Yes\r\n15.40.14.4352,\t\t12/23/2015,\t        Yes\r\n15.40.15.4360,\t\t12/21/2015,\t        Yes\r\n15.40.16.4364,\t\t01/06/2016,\t        Yes\t\r\n15.40.21.4416,\t\t03/23/2016,\t        No\r\n15.40.23.4444,\t\t04/22/2016,        \tNo\r\n15.40.30.4531,\t\t09/29/2016,\t        No\r\n15.40.37.4835,\t\t11/06/2017,\t        No\r\n15.40.42.5063,\t\t03/19/2019,\t        No\r\n15.40.48.5171,\t\t02/05/2021,\t        No\r\n\u0060\u0060\u0060",
        "createdAt": "2024-10-01T20:42:59",
        "reactions": []
      },
      {
        "id": 2573699525,
        "author": "Xerxes004",
        "body": "GLWpfControl has received several updates since this issue was created. I would suggest skia update to the latest 4.3.3 version of GLWpfControl and see if that fixes the problem. Virtually all of these issues stem from Intel drivers, and I\u0027m attempting to have Intel look at the issues with OpenTK using the WGL_NV_DX_interop extension. There are several problems with OpenTK binding to the new drivers (version 32), and the old drivers (version 31) have other issues related to MSAA and depth/stencil in D3D9.\r\n\r\nThis PR fixed some of these issues for me:\r\n\r\nhttps://github.com/opentk/GLWpfControl/pull/131\r\n\r\nCheck out these issues for some context:\r\n\r\nhttps://github.com/opentk/opentk/issues/1788\r\nhttps://github.com/opentk/GLWpfControl/issues/149\r\nhttps://github.com/opentk/GLWpfControl/issues/138\r\nhttps://github.com/opentk/GLWpfControl/issues/130\r\nhttps://github.com/opentk/GLWpfControl/issues/128",
        "createdAt": "2025-01-06T18:43:36",
        "reactions": []
      }
    ]
  }
}