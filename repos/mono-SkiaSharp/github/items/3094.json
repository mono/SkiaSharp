{
  "number": 3094,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] [net9.0] [Android15]The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception",
  "body": "### Description\r\n\r\nUnable to launch page that uses SkiaSharp.\r\n\r\nbuild output\r\n\u0060\u0060\u0060\r\n *  Executing task: dotnet build /Users/xxx/Projects/Practice/SkiaSharpSample/SkiaSharpSample.csproj -p:Configuration=Debug -p:TargetFramework=net9.0-android -p:AndroidSdkDirectory=/Users/xxx/Library/Developer/Xamarin/android-sdk-macosx \r\n\r\nload .zprofile complete\r\n  SkiaSharpSample net9.0-android succeeded with 1 warning(s) (31.3s) \u2192 bin/Debug/net9.0-android/SkiaSharpSample.dll\r\n    /usr/local/share/dotnet/packs/Microsoft.Android.Sdk.Darwin/35.0.7/tools/Xamarin.Android.Common.targets(2192,2): warning XA0141: NuGet package \u0027SkiaSharp.NativeAssets.Android\u0027 version \u00273.118.0-preview.1.2\u0027 contains a shared library \u0027libSkiaSharp.so\u0027 which is not correctly aligned. See https://developer.android.com/guide/practices/page-sizes for more details\r\n\r\nBuild succeeded with 1 warning(s) in 31.6s\r\n *  Terminal will be reused by tasks, press any key to close it. \r\n\u0060\u0060\u0060\r\n\r\nEmulator info\r\n![image](https://github.com/user-attachments/assets/10109705-fddc-4160-a7e3-12a4f3a368e2)\r\n![image](https://github.com/user-attachments/assets/a66891f7-93a5-4b8c-aedc-a7aceafc93ca)\r\n\r\n\r\n\r\nException:\r\n\u0060\u0060\u0060\r\nF/mono-rt : [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception.\r\nF/mono-rt :  ---\u003E System.DllNotFoundException: libSkiaSharp\r\nF/mono-rt :    at SkiaSharp.SKImageInfo..cctor() in /_/binding/SkiaSharp/SKImageInfo.cs:line 48\r\nF/mono-rt :    --- End of inner exception stack trace ---\r\nF/mono-rt :    at SkiaSharp.Views.Android.SurfaceFactory.CreateInfo(Int32 width, Int32 height) in /_/source/SkiaSharp.Views/SkiaSharp.Views/Platform/Android/SurfaceFactory.cs:line 90\r\nF/mono-rt :    at SkiaSharp.Views.Android.SurfaceFactory.UpdateCanvasSize(Int32 w, Int32 h, Single density) in /_/source/SkiaSharp.Views/SkiaSharp.Views/Platform/Android/SurfaceFactory.cs:line 23\r\nF/mono-rt :    at SkiaSharp.Views.Android.SKCanvasView.set_IgnorePixelScaling(Boolean value) in /_/source/SkiaSharp.Views/SkiaSharp.Views/Platform/Android/SKCanvasView.cs:line 72\r\nF/mono-rt :    at SkiaSharp.Views.Maui.Handlers.SKCanvasViewHandler.MapIgnorePixelScaling(SKCanvasViewHandler handler, ISKCanvasView canvasView) in /_/source/SkiaSharp.Views.Maui/SkiaSharp.Views.Maui.Core/Handlers/SKCanvasView/SKCanvasViewHandler.Android.cs:line 42\r\nF/mono-rt :    at Microsoft.Maui.PropertyMapper\u00602.\u003C\u003Ec__DisplayClass5_0[[SkiaSharp.Views.Maui.ISKCanvasView, SkiaSharp.Views.Maui.Core, Version=3.118.0.0, Culture=neutral, PublicKeyToken=null],[SkiaSharp.Views.Maui.Handlers.SKCanvasViewHandler, SkiaSharp.Views.Maui.Core, Version=3.118.0.0, Culture=neutral, PublicKeyToken=null]].\u003CAdd\u003Eb__0(IElementHandler h, IElement v) in /_/src/Core/src/PropertyMapper.cs:line 172\r\nF/mono-rt :    at Microsoft.Maui.PropertyMapper.UpdatePropertyCore(String key, IElementHandler viewHandler, IElement virtualView) in /_/src/Core/src/PropertyMapper.cs:line 47\r\nF/mono-rt :    at Microsoft.Maui.PropertyMapper.UpdateProperties(IElementHandler viewHandler, IElement virtualView) in /_/src/Core/src/PropertyMapper.cs:line 82\r\nF/mono-rt :    at Microsoft.Maui.Handlers.ElementHandler.SetVirtualView(IElement view) in /_/src/Core/src/Handlers/Element/ElementHandler.cs:line 79\r\nF/mono-rt :    at Microsoft.Maui.Handlers.ViewHandler\u00602[[SkiaSharp.Views.Maui.ISKCanvasView, SkiaSharp.Views.Maui.Core, Version=3.118.0.0, Culture=neutral, PublicKeyToken=null],[SkiaSharp.Views.Android.SKCanvasView, SkiaSharp.Views.Android, Version=3.118.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756]].SetVirtualView(IView view) in /_/src/Core/src/Handlers/View/ViewHandlerOfT.cs:line 53\r\nF/mono-rt :    at Microsoft.Maui.Handlers.ViewHandler\u00602[[SkiaSharp.Views.Maui.ISKCanvasView, SkiaSharp.Views.Maui.Core, Version=3.118.0.0, Culture=neutral, PublicKeyToken=null],[SkiaSharp.Views.Android.SKCanvasView, SkiaSharp.Views.Android, Version=3.118.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756]].SetVirtualView(IElement view) in /_/src/Core/src/Handlers/View/ViewHandlerOfT.cs:line 56\r\nF/mono-rt :    at Microsoft.Maui.Controls.Element.SetHandler(IElementHandler newHandler) in /_/src/Controls/src/Core/Element/Element.cs:line 1027\r\nF/mono-rt :    at Microsoft.Maui.Controls.Element.set_Handler(IElementHandler value) in /_/src/Controls/src/Core/Element/Element.cs:line 969\r\nF/mono-rt :    at Microsoft.Maui.Controls.VisualElement.Microsoft.Maui.IElement.set_Handler(IElementHandler value) in /_/src/Controls/src/Core/VisualElement/VisualElement.cs:line 2138\r\nF/mono-rt :    at Microsoft.Maui.Platform.ElementExtensions.ToHandler(IElement view, IMauiContext context) in /_/src/Core/src/Platform/ElementExtensions.cs:line 96\r\nF/mono-rt :    at Microsoft.Maui.Platform.ElementExtensions.ToPlatform(IElement view, IMauiContext context) in /_/src/Core/src/Platform/ElementExtensions.cs:line 127\r\nF/mono-rt :    at Microsoft.Maui.Handlers.LayoutHandler.SetVirtualView(IView view) in /_/src/Core/src/Handlers/Layout/LayoutHandler.Android.cs:line 41\r\nF/mono-rt :    at Microsoft.Maui.Handlers.ViewHandler\u00602[[Microsoft.Maui.ILayout, Microsoft.Maui, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Microsoft.Maui.Platform.LayoutViewGroup, Microsoft.Maui, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].SetVirtualView(IElement view) in /_/src/Core/src/Handlers/View/ViewHandlerOfT.cs:line 56\r\nF/mono-rt :    at Microsoft.Maui.Controls.Element.SetHandler(IElementHandler newHandler) in /_/src/Controls/src/Core/Element/Element.cs:line 1027\r\nF/mono-rt :    at Microsoft.Maui.Controls.Element.set_Handler(IElementHandler value) in /_/src/Controls/src/Core/Element/Element.cs:line 969\r\nF/mono-rt :    at Microsoft.Maui.Controls.VisualElement.Microsoft.Maui.IElement.set_Handler(IElementHandler value) in /_/src/Controls/src/Core/VisualElement/VisualElement.cs:line 2138\r\nF/mono-rt :    at Microsoft.Maui.Platform.ElementExtensions.ToHandler(IElement view, IMauiContext context) in /_/src/Core/src/Platform/ElementExtensions.cs:line 96\r\nF/mono-rt :    at Microsoft.Maui.Platform.ElementExtensions.ToPlatform(IElement view, IMauiContext context) in /_/src/Core/src/Platform/ElementExtensions.cs:line 127\r\nF/mono-rt :    at Microsoft.Maui.Handlers.ScrollViewHandler.UpdateInsetView(IScrollView scrollView, IScrollViewHandler handler, ICrossPlatformLayout crossPlatformLayout) in /_/src/Core/src/Handlers/ScrollView/ScrollViewHandler.Android.cs:line 186\r\n\r\n\u0060\u0060\u0060\r\n\r\n![image](https://github.com/user-attachments/assets/c04da7e1-d63f-4e24-8ced-f403371ee878)\r\n\r\n\r\n### Code\r\n\r\nhttps://github.com/maonaoda/SkiaSharpBug\r\n\r\n### Expected Behavior\r\n\r\nDo not crash\r\n\r\n### Actual Behavior\r\n\r\nCrash\r\n\r\n### Version of SkiaSharp\r\n\r\n3.118.0-preview.1 (Next Preview)\r\n\r\n### Last Known Good Version of SkiaSharp\r\n\r\nnot sure\r\n\r\n### IDE / Editor\r\n\r\nVisual Studio Code (macOS)\r\n\r\n### Platform / Operating System\r\n\r\nAndroid\r\n\r\n### Platform / Operating System Version\r\n\r\nAndroid15\r\n\r\n### Devices\r\n\r\n_No response_\r\n\r\n### Relevant Screenshots\r\n\r\n_No response_\r\n\r\n### Relevant Log Output\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "maonaoda",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2024-12-03T02:37:37",
  "updatedAt": "2024-12-06T08:50:47",
  "closedAt": "2024-12-06T07:29:48",
  "commentCount": 4,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T19:58:00.6041965Z",
    "reactions": [],
    "comments": [
      {
        "id": 2513890955,
        "author": "IngweLand",
        "createdAt": "2024-12-03T08:47:40",
        "reactions": []
      },
      {
        "id": 2522326877,
        "author": "mattleibow",
        "createdAt": "2024-12-06T07:28:29",
        "reactions": []
      },
      {
        "id": 2522409461,
        "author": "maonaoda",
        "createdAt": "2024-12-06T07:53:24",
        "reactions": []
      },
      {
        "id": 2522540065,
        "author": "mattleibow",
        "createdAt": "2024-12-06T08:50:45",
        "reactions": []
      }
    ]
  }
}