{
  "number": 1979,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] SkiaSharp crashes application MAUI",
  "body": "having\r\n\r\n\u0060\u0060\u0060CS\r\nnamespace SkiaUI;\r\n\r\npublic partial class MainPage : ContentPage\r\n{\r\n\tpublic MainPage()\r\n\t{\r\n\t\tInitializeComponent();\r\n\t\tContent = new SkiaSharp.Views.Maui.Controls.SKCanvasView();\r\n\t}\r\n}\r\n\u0060\u0060\u0060\r\n\r\ncauses MAUI App (Preview) to crash at startup with unhandled exception in debugger\r\n\r\ncommenting out \u0060Content = new SkiaSharp.Views.Maui.Controls.SKCanvasView();\u0060 makes the error go away but then we have no Skia View\r\n\r\nhow can this be worked around?\r\n\r\n[Project That Crashes SkiaUI.zip](https://github.com/mono/SkiaSharp/files/8324617/SkiaUI.zip)\r\n\r\nim using\r\n\r\n\u0060\u0060\u0060\r\nVisual Studio 2022 Windows - Version 17.2.0 Preview 2.0\r\n\r\nC:\\Users\\matthew good\\.nuget\\packages\\microsoft.graphics.win2d\\1.0.0.30\\\r\nC:\\Users\\matthew good\\.nuget\\packages\\microsoft.maui.dependencies\\6.0.200-preview.14.5099\\\r\nC:\\Users\\matthew good\\.nuget\\packages\\microsoft.maui.extensions\\6.0.200-preview.14.5099\\\r\nC:\\Users\\matthew good\\.nuget\\packages\\microsoft.windowsappsdk\\1.0.0\\\r\nC:\\Users\\matthew good\\.nuget\\packages\\skiasharp.views.maui.controls\\2.88.0-preview.232\\\r\n\u0060\u0060\u0060\r\n\r\n\r\n\r\nEDIT:\r\nnow having \u0060SkiaSharp.Views.Maui.Controls.SKGLView\u0060 crashes the application, even if \u0060SKCanvasView\u0060 does not crash",
  "author": {
    "login": "mgood7123",
    "type": "User"
  },
  "labels": [
    {
      "name": "area/SkiaSharp.Views.Maui",
      "color": "0052cc"
    }
  ],
  "assignees": [],
  "createdAt": "2022-03-22T13:25:25",
  "updatedAt": "2023-10-06T15:00:32",
  "closedAt": "2023-09-06T14:40:37",
  "commentCount": 20,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T13:42:33.6397351Z",
    "reactions": [
      {
        "user": "clharrysmith",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:42:33.639742Z"
      }
    ],
    "comments": [
      {
        "id": 1075282515,
        "author": "mattleibow",
        "body": "@mgood7123 Can you provide a bit more info on what exception and which platforms?\r\n\r\nMaybe a stack trace?",
        "createdAt": "2022-03-22T14:52:15",
        "reactions": []
      },
      {
        "id": 1075791330,
        "author": "mgood7123",
        "body": "\u003E @mgood7123 Can you provide a bit more info on what exception and which platforms?\r\n\u003E \r\n\u003E Maybe a stack trace?\r\n\r\nall i get is this\r\n\r\n![image](https://user-images.githubusercontent.com/26642847/159599752-34385a2e-f1c4-4c4f-a19a-54126b70922c.png)\r\n\r\n\r\nthis is my current platform\r\n\r\n![image](https://user-images.githubusercontent.com/26642847/159600256-5d06adea-2d81-4107-8c36-c4a0bc6fb6df.png)\r\n\r\n![image](https://user-images.githubusercontent.com/26642847/159600296-e3ed0976-ec5d-486d-b32a-7580799417d5.png)\r\n",
        "createdAt": "2022-03-23T00:44:24",
        "reactions": []
      },
      {
        "id": 1086544022,
        "author": "mgood7123",
        "body": "any updates?",
        "createdAt": "2022-04-02T04:33:46",
        "reactions": []
      },
      {
        "id": 1093830934,
        "author": "mgood7123",
        "body": "is more information needed?",
        "createdAt": "2022-04-09T09:01:49",
        "reactions": []
      },
      {
        "id": 1094469518,
        "author": "xtuzy",
        "body": "I run your example, you don\u0027t set this according to sample:\r\nhttps://github.com/mono/SkiaSharp/blob/b7728fae36218ee5204e0dc7c48cb2022099a8a4/samples/Basic/Maui/SkiaSharpSample/MauiProgram.cs#L13",
        "createdAt": "2022-04-11T02:08:04",
        "reactions": [
          {
            "user": "mdbill",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:42:30.6070654Z"
          },
          {
            "user": "FreakyAli",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:42:30.6070659Z"
          },
          {
            "user": "idenardi",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:42:30.6070661Z"
          }
        ]
      },
      {
        "id": 1098753909,
        "author": "mgood7123",
        "body": "\u003E I run your example, you don\u0027t set this according to sample:\r\n\u003E \r\n\u003E https://github.com/mono/SkiaSharp/blob/b7728fae36218ee5204e0dc7c48cb2022099a8a4/samples/Basic/Maui/SkiaSharpSample/MauiProgram.cs#L13\r\n\r\ni cant find much documentation on google\r\n\r\nhttps://www.google.com/search?q=%22UseSkiaSharp%28true%29%22\u0026client=firefox-b-d\u0026sxsrf=APq-WBvaNCThOGIzDce4F2EjDPJZUkh0qw%3A1649917531137\u0026ei=W75XYuCGCPyeseMPl7iQiAw\u0026ved=0ahUKEwigoOji9ZL3AhV8T2wGHRccBMEQ4dUDCA0\u0026uact=5\u0026oq=%22UseSkiaSharp%28true%29%22\u0026gs_lcp=Cgdnd3Mtd2l6EAM6BwgAEEcQsAM6CAgAEA0QBRAeOggIABAIEA0QHkoECEEYAEoECEYYAFDxB1ioE2C-FWgBcAF4AIAB1gGIAakJkgEFMC4zLjOYAQCgAQHIAQjAAQE\u0026sclient=gws-wiz",
        "createdAt": "2022-04-14T06:26:55",
        "reactions": []
      },
      {
        "id": 1098913182,
        "author": "xtuzy",
        "body": "Maui is new ,something not same as Xamarin.Form, so according sample to do is better",
        "createdAt": "2022-04-14T09:19:14",
        "reactions": []
      },
      {
        "id": 1099159443,
        "author": "mgood7123",
        "body": "\u003E Maui is new ,something not same as Xamarin.Form, so according sample to do is better\r\n\r\nalright",
        "createdAt": "2022-04-14T12:58:40",
        "reactions": []
      },
      {
        "id": 1099160309,
        "author": "mgood7123",
        "body": "is resizing a MAUI SkiaSharp view as insanely fast as resizing a Windows Forms SkiaSharp view? or is it as slow as resizing an Xamarin.Form SkiaSharp view?",
        "createdAt": "2022-04-14T12:59:44",
        "reactions": []
      },
      {
        "id": 1099216058,
        "author": "xtuzy",
        "body": "\u003E is resizing a MAUI SkiaSharp view as insanely fast as resizing a Windows Forms SkiaSharp view? or is it as slow as resizing an Xamarin.Form SkiaSharp view?\r\n\r\nslow? i don\u0027t compare they, you can try not use xamarin.form or maui, just use skiasharp in xamarin native to compare, that will let you know where is low. if xamarin native also slow, you can use gpu, or you can get some suggest form [react-native-skia](https://github.com/Shopify/react-native-skia)",
        "createdAt": "2022-04-14T13:58:40",
        "reactions": []
      },
      {
        "id": 1102014947,
        "author": "mgood7123",
        "body": "\u003E \u003E is resizing a MAUI SkiaSharp view as insanely fast as resizing a Windows Forms SkiaSharp view? or is it as slow as resizing an Xamarin.Form SkiaSharp view?\r\n\u003E \r\n\u003E slow? i don\u0027t compare they, you can try not use xamarin.form or maui, just use skiasharp in xamarin native to compare, that will let you know where is low. if xamarin native also slow, you can use gpu, or you can get some suggest form [react-native-skia](https://github.com/Shopify/react-native-skia)\r\n\r\nor rather, i should say that\r\n\r\nresizing a SkiaSharp Universal Windows app is noticably slow/laggy\r\n\r\nresizing a SkiaSharp Windows Forms app is instant even under rapid resizing",
        "createdAt": "2022-04-19T04:42:17",
        "reactions": []
      },
      {
        "id": 1103116905,
        "author": "mgood7123",
        "body": "ok, so MAUI is a bit faster than Universal Windows app when resizing\r\n\r\nbut nowhere near as fast as Windows Forms is\r\n\r\nhowever this may be due to a \u0060SKCanvasView\u0060 being used instead of a \u0060SKGLView\u0060 but \u0060SKGLView\u0060 currently crashes in Maui",
        "createdAt": "2022-04-19T20:32:01",
        "reactions": []
      },
      {
        "id": 1103162932,
        "author": "mgood7123",
        "body": "anyone know why \u0060SKGLView\u0060 crashes?\r\n\r\ni have \u0060UseSkiaSharp()\u0060 in my \u0060MauiProgram.cs\u0060",
        "createdAt": "2022-04-19T20:58:03",
        "reactions": []
      },
      {
        "id": 1103435912,
        "author": "mgood7123",
        "body": "[MauiApp1.zip](https://github.com/mono/SkiaSharp/files/8518110/MauiApp1.zip)\r\n\r\nthis is my current app in which \u0060SKGLView\u0060 crashes if i try to use it, \u0060SKCanvasView\u0060 works fine tho",
        "createdAt": "2022-04-20T03:33:29",
        "reactions": []
      },
      {
        "id": 1103773309,
        "author": "mgood7123",
        "body": "the error is same as last time too, unhandled win32 exception",
        "createdAt": "2022-04-20T10:26:07",
        "reactions": []
      },
      {
        "id": 1106013883,
        "author": "mgood7123",
        "body": "a temporary workaround is to use a non-MAUI app (eg WPF ) directly when targeting Windows, and MAUI when targeting other platforms\r\n\r\n\u0060\u0060\u0060\r\nOtherPlatforms.MAUI\r\nWPF.Windows\r\nUWP.Windows\r\n\u0060\u0060\u0060",
        "createdAt": "2022-04-22T05:04:32",
        "reactions": []
      },
      {
        "id": 1126599401,
        "author": "xtuzy",
        "body": "SKGLView not support WinUI, see https://github.com/mono/SkiaSharp/pull/1678",
        "createdAt": "2022-05-14T01:05:17",
        "reactions": []
      },
      {
        "id": 1159547125,
        "author": "mdbill",
        "body": "\u003E .UseSkiaSharp(true)\r\n\r\nI also wasted at least an hour debugging, and this ^^ fixes it.  Thx!  a better errormsg or warning would be nice.  I was porting from Xamarin.Forms where it worked fine.",
        "createdAt": "2022-06-18T19:40:40",
        "reactions": []
      },
      {
        "id": 1236052428,
        "author": "mgood7123",
        "body": "I\u0027m going to leave this open until a better solution exists that let\u0027s users know they forgot to add UseSkiaSharp",
        "createdAt": "2022-09-03T05:26:31",
        "reactions": []
      },
      {
        "id": 1708505480,
        "author": "mattleibow",
        "body": "Duplicate of #2050",
        "createdAt": "2023-09-06T14:40:32",
        "reactions": []
      }
    ]
  }
}