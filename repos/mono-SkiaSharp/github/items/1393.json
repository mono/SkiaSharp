{
  "number": 1393,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] Linker Error on Build",
  "body": "Building a Xamarin Forms (currently 4.7.0.1080) project fails when using SkiaSharp 2.80.0.\r\n\r\n\u0060\u0060\u0060\r\nerror MT5209 : Native linking error : framework not found libSkiaSharp\r\nMTOUCH : error MT5202: Native linking failed. Please review the build log.\r\n\u0060\u0060\u0060\r\n\r\nSteps to reproduce:\r\n1. In Visual Studio for Mac, create a new Xamarin Forms app using Blank Forms App template.\r\n2. Upgrade NuGets on all 3 projects, Android, iOS, and Common. (Xamarin Forms -\u003E 4.7.0.180; Xamarin Essentials -\u003E 1.5.3.2)\r\n3. Add SkiaSharp.Views.Forms (2.80.0) NuGet to the shared project.\r\n3. Add a reference to SkiaSharp \u0060new SKCanvasView();\u0060 to MainPage.xaml.cs to prevent the Linker from pruning out SkiaSharp.\r\n4. Perform Build All.\r\n\r\n\r\n[SkiaLinkerDemo.zip](https://github.com/mono/SkiaSharp/files/4898304/SkiaLinkerDemo.zip)\r\n\r\n**Expected Behavior**\r\n\r\nApp should build and be able to launch.\r\n\r\n**Actual Behavior**\r\n\r\nBuild for iOS fails with linker errors.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  2.80.0\r\n- Last known good version: 1.68.3\r\n- IDE:  Visual Studio for Mac v8.6.5\r\n\r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EIDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\n\u0060\u0060\u0060\r\nVisual Studio Community 2019 for Mac\r\nVersion 8.6.5 (build 23)\r\nInstallation UUID: 06132a91-56f5-4cdb-afc7-6be5f4773937\r\n\tGTK\u002B 2.24.23 (Raleigh theme)\r\n\tXamarin.Mac 6.18.0.23 (d16-6 / 088c73638)\r\n\r\n\tPackage version: 610000104\r\n\r\nMono Framework MDK\r\nRuntime:\r\n\tMono 6.10.0.104 (2019-12/5d03a6fe116) (64-bit)\r\n\tPackage version: 610000104\r\n\r\nRoslyn (Language Service)\r\n3.6.0-3.20210.9\u002B4eafdcb1bcbd8d3573f2ba6065e56d9b9ce4f8a3\r\n\r\nNuGet\r\nVersion: 5.6.0.6591\r\n\r\n.NET Core SDK\r\nSDK: /usr/local/share/dotnet/sdk/3.1.301/Sdks\r\nSDK Versions:\r\n\t3.1.301\r\n\t3.1.300\r\n\t3.1.202\r\n\t3.1.200\r\nMSBuild SDKs: /Library/Frameworks/Mono.framework/Versions/6.10.0/lib/mono/msbuild/Current/bin/Sdks\r\n\r\n.NET Core Runtime\r\nRuntime: /usr/local/share/dotnet/dotnet\r\nRuntime Versions:\r\n\t3.1.5\r\n\t3.1.4\r\n\t3.1.2\r\n\t2.1.19\r\n\t2.1.18\r\n\t2.1.17\r\n\t2.1.16\r\n\r\nXamarin.Profiler\r\nVersion: 1.6.13.11\r\nLocation: /Applications/Xamarin Profiler.app/Contents/MacOS/Xamarin Profiler\r\n\r\nUpdater\r\nVersion: 11\r\n\r\nApple Developer Tools\r\nXcode 11.5 (16139)\r\nBuild 11E608c\r\n\r\nXamarin.Mac\r\nVersion: 6.18.2.1 (Visual Studio Community)\r\nHash: 29c4ea731\r\nBranch: d16-6\r\nBuild date: 2020-05-26 17:03:04-0400\r\n\r\nXamarin.iOS\r\nVersion: 13.18.2.1 (Visual Studio Community)\r\nHash: 29c4ea731\r\nBranch: d16-6\r\nBuild date: 2020-05-26 17:03:05-0400\r\n\r\nXamarin Designer\r\nVersion: 16.6.0.329\r\nHash: d4f8bcd13\r\nBranch: remotes/origin/d16-6\r\nBuild date: 2020-04-24 02:16:02 UTC\r\n\r\nXamarin.Android\r\nVersion: 10.3.1.4 (Visual Studio Community)\r\nCommit: xamarin-android/d16-6/3a10de9\r\nAndroid SDK: **REMOVED**\r\n\tSupported Android versions:\r\n\t\tNone installed\r\n\r\nSDK Tools Version: 26.1.1\r\nSDK Platform Tools Version: 29.0.5\r\nSDK Build Tools Version: 29.0.2\r\n\r\nBuild Information: \r\nMono: 165f4b0\r\nJava.Interop: xamarin/java.interop/d16-6@2cab35c\r\nProGuard: xamarin/proguard/master@905836d\r\nSQLite: xamarin/sqlite/3.31.1@49232bc\r\nXamarin.Android Tools: xamarin/xamarin-android-tools/d16-6@bfb66f3\r\n\r\nMicrosoft OpenJDK for Mobile\r\nJava SDK: **REMOVED**\r\n1.8.0-25\r\nAndroid Designer EPL code available here:\r\nhttps://github.com/xamarin/AndroidDesigner.EPL\r\n\r\nAndroid SDK Manager\r\nVersion: 16.6.0.50\r\nHash: 5901879\r\nBranch: remotes/origin/d16-6\r\nBuild date: 2020-06-10 22:42:50 UTC\r\n\r\nAndroid Device Manager\r\nVersion: 16.6.0.96\r\nHash: 6e8b80b\r\nBranch: remotes/origin/d16-6\r\nBuild date: 2020-06-10 22:43:28 UTC\r\n\r\nBuild Information\r\nRelease ID: 806050023\r\nGit revision: 5289d413b99fddfc20b4ecf3e445ccb822213427\r\nBuild date: 2020-06-18 12:08:30-04\r\nBuild branch: release-8.6\r\nXamarin extensions: 5289d413b99fddfc20b4ecf3e445ccb822213427\r\n\r\nOperating System\r\nMac OS X 10.15.5\r\nDarwin 19.5.0 Darwin Kernel Version 19.5.0\r\n    Tue May 26 20:41:44 PDT 2020\r\n    root:xnu-6153.121.2~2/RELEASE_X86_64 x86_64\r\n\u0060\u0060\u0060\r\n\u003C/details\u003E\r\n",
  "author": {
    "login": "hollyschilling",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "milestone": "v2.80.2",
  "createdAt": "2020-07-09T17:04:06",
  "updatedAt": "2022-08-19T03:02:39",
  "closedAt": "2020-08-02T07:38:08",
  "commentCount": 10,
  "reactionCount": 8,
  "engagement": {
    "syncedAt": "2026-02-06T14:14:48.3604008Z",
    "reactions": [
      {
        "user": "InquisitorJax",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604069Z"
      },
      {
        "user": "InquisitorJax",
        "content": "eyes",
        "createdAt": "2026-02-06T14:14:48.3604079Z"
      },
      {
        "user": "multitracks",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604082Z"
      },
      {
        "user": "inforithmics",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604085Z"
      },
      {
        "user": "Tragetaschen",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604089Z"
      },
      {
        "user": "J-Swift",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604092Z"
      },
      {
        "user": "grierson",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604096Z"
      },
      {
        "user": "softlion",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:14:48.3604098Z"
      }
    ],
    "comments": [
      {
        "id": 656254877,
        "author": "mattleibow",
        "body": "Looking at the sample, seems that it can\u0027t find the native library. It appears that the app is pulling the managed library, but not the framework.\r\n\r\nThis is probably related to #1296 where the native library is not embedded. This fixes issues with upgrades, but seems to break the case where the skiasharp packages were not also installed into the app project.\r\n\r\nI\u0027ll have a look at using the \u0060buildTransitive\u0060 folder as well (#1041 and #1057). \r\n\r\nBut, the easiest and quickest solution is to just install the package into iOS as well. ",
        "createdAt": "2020-07-09T17:27:52",
        "reactions": []
      },
      {
        "id": 660092860,
        "author": "inforithmics",
        "body": "I had the same problem I fixed it by \r\nDisabling following Build options in the Debug Configuration:\r\n- Enable incremental builds\r\n- Enable device-specific builds\r\n\r\nafterwards it worked.",
        "createdAt": "2020-07-17T12:59:24",
        "reactions": [
          {
            "user": "TamasRemenyi",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:46.6601975Z"
          },
          {
            "user": "michaelstonis",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:46.660198Z"
          },
          {
            "user": "rmalmoe",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:46.6601981Z"
          }
        ]
      },
      {
        "id": 662775306,
        "author": "tstuts",
        "body": "@mattleibow We\u0027re seeing a similar issue in our Xamarin.Mac app. After going from \u00601.68.3\u0060 to \u00602.80.1\u0060 we no longer get \u0060libSkiaSharp.dylib\u0060 in the app bundle. Adding the \u0060SkiaSharp\u0060 package to our app project directly does work as a workaround. Do you want a repro?",
        "createdAt": "2020-07-23T01:18:42",
        "reactions": []
      },
      {
        "id": 663318697,
        "author": "mattleibow",
        "body": "Hi folks, I think I know what to do for this issue. I\u0027ll update with the next release.\n\nBut, installing SkiaSharp into the head projects is a good  workaround for now. ",
        "createdAt": "2020-07-24T02:17:43",
        "reactions": [
          {
            "user": "tstuts",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:47.0371691Z"
          },
          {
            "user": "brunck",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:47.0371831Z"
          },
          {
            "user": "tojak",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:14:47.0371833Z"
          }
        ]
      },
      {
        "id": 678758765,
        "author": "freever",
        "body": "I have installed 2.80.2-preview19 into ALL my projects. \r\n\r\nThe line \u0060paint = new SKPaint();\u0060 throws a type load exception on Android:\r\n\u0022libSkiaSharp.so assembly:\u003Cunknown assembly\u003E type:\u003Cunknown type\u003E member:(null)\u0022\r\n  at (wrapper managed-to-native) SkiaSharp.SkiaApi.sk_compatpaint_new()\r\n  at SkiaSharp.SKPaint..ctor () [0x00000] in \u003Caa1de5d4cf3f4a939c558acca594f4c4\u003E:0 \r\n\r\nEDIT: reverting to 1.68.3 makes the problem go away",
        "createdAt": "2020-08-23T10:50:17",
        "reactions": []
      },
      {
        "id": 685320990,
        "author": "taublast",
        "body": "\u003E I had the same problem I fixed it by\r\n\u003E Disabling following Build options in the Debug Configuration:\r\n\u003E \r\n\u003E * Enable incremental builds\r\n\u003E * Enable device-specific builds\r\n\u003E \r\n\u003E afterwards it worked.\r\n\r\nThe above is not working for me at all. \r\n\u0022installing SkiaSharp into the head projects is a good workaround for now.\u0022 solved this.\r\n\r\n",
        "createdAt": "2020-09-02T06:01:49",
        "reactions": []
      },
      {
        "id": 685404275,
        "author": "inforithmics",
        "body": "\r\n\r\n\r\n\r\n\u003E \u003E I had the same problem I fixed it by\r\n\u003E \u003E Disabling following Build options in the Debug Configuration:\r\n\u003E \u003E \r\n\u003E \u003E * Enable incremental builds\r\n\u003E \u003E * Enable device-specific builds\r\n\u003E \u003E \r\n\u003E \u003E afterwards it worked.\r\n\u003E \r\n\u003E The above is not working for me at all.\r\n\u003E \u0022installing SkiaSharp into the head projects is a good workaround for now.\u0022 solved this.\r\n\r\nYes this is the recommanded workaround, the problem was that I had installed Skia.Sharp already in the head projects and it still didn\u0027t work. So the workaround is in addition to installing Skia.Sharp in the head projects",
        "createdAt": "2020-09-02T07:18:08",
        "reactions": []
      },
      {
        "id": 685441291,
        "author": "taublast",
        "body": "Yes have installed **SkiaSharp.Views.Forms** in head projects for ok result.",
        "createdAt": "2020-09-02T08:27:20",
        "reactions": []
      },
      {
        "id": 685556375,
        "author": "inforithmics",
        "body": "I forget to mention that I installed SkiaSharp and SkiaSharp.Views.Forms in the head projects. \r\n\r\nMaybe it is an issue with Svg.Skia (because this I use for Svg Images in Skia). I didn\u0027t do a Full investigation why it didn\u0027t work. \r\nOnly did trial and error until it worked.",
        "createdAt": "2020-09-02T10:13:35",
        "reactions": []
      },
      {
        "id": 734879225,
        "author": "mattleibow",
        "body": "Just for future reference, it might be the issue with incremental builds, so we should be _disabling_ them.",
        "createdAt": "2020-11-27T15:11:23",
        "reactions": []
      }
    ]
  }
}