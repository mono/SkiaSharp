{
  "number": 2555,
  "type": "issue",
  "state": "closed",
  "title": "[PERFORMANCE] SKCanvasView (Android) is considerably slower in MAUI than in Xamarin.Forms (over 7 times slower!)",
  "body": "## **Description**\r\n\r\nWe tested SkiaSharp performance in **.NET MAUI (.NET 7) vs. Xamarin.Forms** using the [GnollHack](https://github.com/hyvanmielenpelit/GnollHack) game. We used the same saved game and the same screen for tests. The code was exactly the same in MAUI and Xamarin.Forms. We used **Google Pixel 6a Android device** for tests. The tested versions of SkiaSharp were 2.80.3 and 2.88.3. The tests were run using **SkCanvasView**, that is, GPU Acceleration was disabled.\r\n\r\nThe test results were:\r\n\r\n### Xamarin.Forms with SkiaSharp 2.80.3 _(=situation now)_\r\n- Normal zoom: 60\u002B FPS (max)\r\n- Minimap zoom: 31.0 FPS\r\n\r\n### Xamarin.Forms with SkiaSharp 2.88.3 _(=upgraded SkiaSharp)_\r\n- Normal zoom: 40.7 FPS\r\n- Minimap zoom: 17.0 FPS\r\n\r\n### MAUI with SkiaSharp 2.88.3 _(=upgraded SkiaSharp and XF to MAUI)_\r\n- Normal zoom: 22 FPS\r\n- Minimap zoom: 4.2 FPS\r\n\r\n\r\n## **Expected Behavior**\r\n\r\n- MAUI is faster than Xamarin.Forms.\r\n- SkiaSharp 2.88.3 is faster than 2.80.3.\r\n\r\n## **Actual Behavior**\r\n\r\n- MAUI is **4 times slower** than Xamarin.Forms when using the minimap zoom _(SkiaSharp 2.88.3: MAUI 4.2 FPS vs XF 17.0 FPS)_.\r\n- SkiaSharp 2.88.3 is **1.82 times slower** than SkiaSharp 2.80.3 using the minimap zoom _(17.0 FPS vs 31.0 FPS)_.\r\n\r\nIn total, MAUI using SkiaSharp 2.88.3 is **7.38 TIMES SLOWER** than Xamarin.Forms using SkiaSharp 2.80.3 using the minimap zoom _(4.2 FPS vs 31.0 FPS)_.\r\n\r\n## Conclusion\r\n\r\nNeedless to say, 7.38x drop in FPS is not fine for the game. Is there anything that we can do to get FPS back to XF 2.80.3 levels in MAUI?\r\n\r\nWe have already implemented the immutable fix (#2188), without which SkiaSharp 2.88.3 did not work at all.",
  "author": {
    "login": "TommiGustafsson-HMP",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-08-15T18:37:22",
  "updatedAt": "2024-04-14T11:56:20",
  "closedAt": "2024-04-14T09:54:44",
  "commentCount": 2,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T12:54:52.400571Z",
    "reactions": [
      {
        "user": "angelofb",
        "content": "\u002B1",
        "createdAt": "2026-02-06T12:54:52.400588Z"
      }
    ],
    "comments": [
      {
        "id": 1681288919,
        "author": "janne-hmp",
        "body": "@mattleibow Based on some comments in #2112 and #2188 and I tested this further with GnollHack by changing most SKBitmaps to SKImages, and the FPS dropped to 0.2 even in normal zoom in 2.80.3. So drawing SKImages seems to be terribly much slower than that of SKBitmaps, which is probably the reason (along with possibly allocating more memory to SKImages on every draw in the  wrapper) for the performance drop if somebody wrapped SKBitmaps with SKImages before drawing. If this is in fact the problem, would it be possible to get the direct non-wrapped SKBitmap drawing routines back to SkiaSharp?",
        "createdAt": "2023-08-16T21:22:52",
        "reactions": []
      },
      {
        "id": 2053990026,
        "author": "TommiGustafsson-HMP",
        "body": "@mattleibow  We were able to resolve the performance degradation by:\r\n- Increasing GPU Resource Cache to 1 GB on Android devices.\r\n- Using SKImages instead of SKBitmaps.\r\n\r\nWe are not sure why Android requires a huge GPU Resource Cache. On iOS, things work well with a smaller cache.",
        "createdAt": "2024-04-14T09:54:44",
        "reactions": []
      }
    ]
  }
}