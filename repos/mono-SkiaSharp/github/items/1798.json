{
  "number": 1798,
  "type": "issue",
  "state": "open",
  "title": "[BUG] \u0060DrawShapedText\u0060 throws an exception",
  "body": "**Description**\r\n\r\n\u0060DrawShapedText\u0060\r\n\r\n**Code**\r\n\r\n\u0060\u0060\u0060csharp\r\n\r\npublic void Render(SKSurface surface)\r\n{\r\n    var paint = new SKPaint\r\n    {\r\n        TextEncoding = SKTextEncoding.Utf16,\r\n        IsStroke = false,\r\n        IsAntialias = true,\r\n        LcdRenderText = true,\r\n        SubpixelText = true\r\n    };\r\n\r\n    surface.Canvas.DrawShapedText(line, 0, 0, paint);\r\n}\r\n\u0060\u0060\u0060\r\n\r\n**Expected Behavior**\r\n\r\nNo crash\r\n\r\n**Actual Behavior**\r\n\r\nException due to \u0060paint.GetFont().Typeface\u0060 being null in:\r\n\r\nhttps://github.com/mono/SkiaSharp/blob/2ad29861d5a40d3bf78c28ab0a9cb02a8f0fe437/source/SkiaSharp.HarfBuzz/SkiaSharp.HarfBuzz.Shared/CanvasExtensions.cs#L10-L17\r\n\r\nas the constructor doesn\u0027t accept null\r\n\r\nhttps://github.com/mono/SkiaSharp/blob/2ad29861d5a40d3bf78c28ab0a9cb02a8f0fe437/source/SkiaSharp.HarfBuzz/SkiaSharp.HarfBuzz.Shared/SKShaper.cs#L15-L17\r\n\r\nThe code was working with \u0060DrawText\u0060, and I\u0027m switching to \u0060DrawShapedText\u0060 to fix the RTL languages.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  2.80.0 \u003C!-- the version of SkiaSharp that has the issue --\u003E\r\n- Last known good version:  N/A \u003C!-- the version of SkiaSharp that still working --\u003E\r\n- IDE:  \u003C!-- Visual Studio / Visual Studio for Mac / MonoDevelop / Visual Studio Code --\u003E\r\n- Platform Target Frameworks: \u003C!-- all that apply, remove the platforms that aren\u0027t broken or haven\u0027t had any testing --\u003E\r\n  - Android: \u003C!-- the version of the Android SDK you are compiling against, e.g. 7.1 --\u003E \r\n  - iOS:  \u003C!-- the version of the iOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Linux:  \u003C!-- The version and distro of linux that you are building for, e.g. Ubuntu 16.04 --\u003E\r\n  - macOS:  \u003C!-- The version of macOS you are building for, e.g. 10.10 --\u003E\r\n  - Tizen:  \u003C!-- the version of the Tizen SDK you are compiling against, e.g. 4.0 --\u003E \r\n  - tvOS:  \u003C!-- the version of the tvOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - UWP:  \u003C!-- the version of the UWP SDK you are compiling against, e.g. 16299 --\u003E \r\n  - watchOS:  \u003C!-- the version of the watchOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Windows Classic:  \u003C!-- the version of Windows you are building for, e.g. Windows 7 --\u003E\r\n- Target Devices:   \u003C!-- the devices that you noticed this on, e.g. iPhone X --\u003E\r\n  - \u003C!-- Google Pixel 4 XL --\u003E\r\n  - \u003C!-- iPhone 11 --\u003E\r\n  \r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EDetailed IDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\n\u0060\u0060\u0060\r\n\r\nPASTE ANY DETAILED VERSION INFO HERE\r\n\r\n\u0060\u0060\u0060\r\n\u003C/details\u003E\r\n\r\n\r\n**Screenshots**\r\n\r\n\u003C!-- if the issue is a visual issue, please include screenshots showing the problem if possible --\u003E\r\n\r\n**Reproduction Link**\r\n\r\n\u003C!-- please upload or provide a link to a reproduction case --\u003E\r\n\r\n",
  "author": {
    "login": "Youssef1313",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2021-09-07T14:57:22",
  "updatedAt": "2024-04-24T10:59:32",
  "commentCount": 3,
  "reactionCount": 0
}