{
  "number": 722,
  "type": "issue",
  "state": "closed",
  "title": "BackendRenderTarget doesn\u0027t give current width/height on UWP",
  "body": "Override \u0060OnPaintSurface(e : SKPaintGLSurfaceEventArgs)\u0060.\r\n\r\nSometimes SkiaSharp has an incorrect Width/Height, with a discrepancy from the Xamarin.Forms.View Width and Height.\r\n\r\nThis manifests as:\r\n\r\n- e.BackendRenderTarget.Width / Height being incorrect\r\n- Drawing commands being incorrect.\r\n\r\nIt appears that SkiaSharp sometimes fails to update the canvas when Xamarin.Forms has changed the size of the view.\r\n\r\nThis does not always happen. In our testing if the change in size comes from another UI element appearing, SkiaSharp fails to update, while if the change in size comes from the window changing size, SkiaSharp updates correctly.\r\n\r\nWe will add more details as we find them. This is not the highest priority UWP issue at the moment, with the memory leak being a more critical issue.\r\n\r\n@sir-deenicus @Happypig375\n\n\u003E VS bug [#753283](https://devdiv.visualstudio.com/DevDiv/_workitems/edit/753283)",
  "author": {
    "login": "charlesroddie",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "os/Windows-Universal-UWP",
      "color": "fbca04"
    },
    {
      "name": "area/SkiaSharp.Views",
      "color": "0052cc"
    },
    {
      "name": "backend/OpenGL",
      "color": "1acea7"
    }
  ],
  "assignees": [
    {
      "login": "mattleibow",
      "type": "User"
    }
  ],
  "createdAt": "2018-12-10T16:26:31",
  "updatedAt": "2022-08-19T12:02:16",
  "closedAt": "2021-03-30T15:30:48",
  "commentCount": 2,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T14:05:52.0622198Z",
    "reactions": [
      {
        "user": "Happypig375",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:05:52.0622269Z"
      }
    ],
    "comments": [
      {
        "id": 445885286,
        "author": "charlesroddie",
        "body": "Also sometimes reacts slowly (non-synchronously) to setting HeightRequest or WidthRequest on the Xamarin.Forms view.",
        "createdAt": "2018-12-10T16:46:48",
        "reactions": []
      },
      {
        "id": 446671416,
        "author": "charlesroddie",
        "body": "A workaround like this is needed on UWP:\r\n\u0060\u0060\u0060fsharp\r\noverride t.OnPaintSurface(e : SKPaintGLSurfaceEventArgs) =\r\n    ...\r\n    if (float32 e.BackendRenderTarget.Width) - (float32 self.Width * dpiScale) \u003E 1.f\r\n    then Device.StartTimer(TimeSpan.FromMilliseconds(20.), fun () -\u003E t.InvalidateSurface(); false)\r\n\u0060\u0060\u0060",
        "createdAt": "2018-12-12T17:24:56",
        "reactions": []
      }
    ]
  }
}