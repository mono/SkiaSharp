{
  "number": 331,
  "type": "issue",
  "state": "closed",
  "title": "Resize returns null for PNGs",
  "body": "I\u0027m getting null back from \u0060SKBitmap.Resize()\u0060 after loading a PNG, i.e.\r\n\r\n\u0060\u0060\u0060\r\nvar original = SKBitmap.Decode(@\u0022c:\\test.png\u0022);\r\nvar resized = original.Resize(new SKImageInfo(w, h), SKBitmapResizeMethod.Lanczos3);\r\n\u0060\u0060\u0060\r\n...gives \u0060resized\u0060 is \u0060null\u0060. Works fine for a JPG.",
  "author": {
    "login": "kodeo",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2017-07-01T12:07:47",
  "updatedAt": "2022-08-19T21:01:30",
  "closedAt": "2017-07-25T13:30:29",
  "commentCount": 10,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:58:42.0107563Z",
    "reactions": [],
    "comments": [
      {
        "id": 316688479,
        "author": "AndersMad",
        "body": "check the source color type - it won\u0027t work with \u0060SKColorType.Index8\u0060",
        "createdAt": "2017-07-20T12:31:34",
        "reactions": [
          {
            "user": "mattleibow",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:40.0456129Z"
          },
          {
            "user": "khiemtong",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:40.0456134Z"
          },
          {
            "user": "AwsomeCode",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:40.0456135Z"
          }
        ]
      },
      {
        "id": 317580895,
        "author": "kodeo",
        "body": "It is \u0060Index8\u0060. What\u0027s the problem with \u0060Index8\u0060 then?",
        "createdAt": "2017-07-24T23:08:37",
        "reactions": []
      },
      {
        "id": 317727989,
        "author": "AndersMad",
        "body": "I don\u0027t know (except the fact that its much more complicated).. it\u0027s a Google Skia base/DLL thing in the \u0060sk_bitmapscaler_resize\u0060 - but I see that the Google Skia roadmap says there will be more focus on GIF in the fure - so maybe that will deal with it.. Until then, convert the image/bitmap by e.g. drawing it to a new surface (will preserve alpha etc.).. Also note this if wanting to use scaling while drawing: https://github.com/mono/SkiaSharp/issues/319 ",
        "createdAt": "2017-07-25T12:54:01",
        "reactions": []
      },
      {
        "id": 317737709,
        "author": "kodeo",
        "body": "OK. Cheers.",
        "createdAt": "2017-07-25T13:30:29",
        "reactions": []
      },
      {
        "id": 341084260,
        "author": "sayyildiz",
        "body": "My solution is changing colortype before resizing.\r\n\r\n\u0060\u0060\u0060\r\nif (bitmap.ColorType != SKColorType.Bgra8888)\r\n{\r\n    bitmap.CopyTo(bitmap, SKColorType.Bgra8888);\r\n}\r\n\u0060\u0060\u0060",
        "createdAt": "2017-11-01T11:44:13",
        "reactions": [
          {
            "user": "AwsomeCode",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:40.9136932Z"
          },
          {
            "user": "mattleibow",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:40.9136938Z"
          }
        ]
      },
      {
        "id": 348098684,
        "author": "aloisdeniel",
        "body": "It didn\u0027t work for me with \u0060SKColorType.Bgra8888\u0060, but it worked with \u0060SKColorType.Rgba8888\u0060 (from macOS).\r\n\r\n\u0060\u0060\u0060csharp\r\nif (bitmap.ColorType != SKColorType.Rgba8888)\r\n{\r\n      bitmap.CopyTo(bitmap, SKColorType.Rgba8888);\r\n}\r\n\u0060\u0060\u0060",
        "createdAt": "2017-11-30T06:51:40",
        "reactions": []
      },
      {
        "id": 348105116,
        "author": "mattleibow",
        "body": "@sayyildiz @aloisdeniel Rather than using a specific type, use the \u0060SKImageInfo.PlatformColorType\u0060 so that the code will work on all platforms this code is run on.\r\n\r\nWindows is typically \u0060Bgra8888\u0060 and Unix is typically \u0060Rgba8888\u0060, but I have noticed that some Linux distros on my VMs mix things up.",
        "createdAt": "2017-11-30T07:27:47",
        "reactions": [
          {
            "user": "aloisdeniel",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.3460538Z"
          },
          {
            "user": "washamdev",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.3460543Z"
          }
        ]
      },
      {
        "id": 348122861,
        "author": "aloisdeniel",
        "body": "Thanks @mattleibow, that\u0027s better!\r\n\r\n\u0060\u0060\u0060csharp\r\nif(bitmap.ColorType != SKImageInfo.PlatformColorType)\r\n{\r\n       bitmap.CopyTo(bitmap, SKImageInfo.PlatformColorType);\r\n}\r\n\u0060\u0060\u0060",
        "createdAt": "2017-11-30T08:54:18",
        "reactions": [
          {
            "user": "mattleibow",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.5401251Z"
          },
          {
            "user": "zihotki",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.5401256Z"
          },
          {
            "user": "washamdev",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.5401258Z"
          },
          {
            "user": "hpedraza2333",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:58:41.5401259Z"
          }
        ]
      },
      {
        "id": 580789700,
        "author": "almirvuk",
        "body": "Thank you guys! \uD83E\uDD17 @aloisdeniel @mattleibow @sayyildiz ",
        "createdAt": "2020-01-31T15:53:56",
        "reactions": []
      },
      {
        "id": 581018095,
        "author": "mattleibow",
        "body": "With the newer versions of SkiaSharp in the pipeline, this won\u0027t be needed anymore. Previously, skia supported loading index8 images but not any manipulations. With the later versions, loading index8 automatically gets converted to platform RGBA/BGRA.",
        "createdAt": "2020-02-01T10:54:53",
        "reactions": []
      }
    ]
  }
}