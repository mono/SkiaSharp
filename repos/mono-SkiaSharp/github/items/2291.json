{
  "number": 2291,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] error during linking SkiaSharp.Views.Android",
  "body": "**Description**\r\n\r\nI have a .net MAUI app that uses SkiaSharp via LiveCharts2. On .net 6 and .net 7 RC1 that worked without issues. on .net 7 RC2 I get this error when I publish my app for Android:\r\n\r\n\u0060\u0060\u0060\r\nILLink : error IL1011: Failed to write \u0027obj\\Release\\net7.0-android\\android-x86\\linked\\SkiaSharp.Views.Android.dll\u0027. [D:\\a\\MoneyFox\\MoneyFox\\src\\MoneyFox.Ui\\MoneyFox.Ui.csproj::TargetFramework=net7.0-android]\r\n  Fatal error in IL Linker\r\n  Unhandled exception. Mono.Linker.LinkerFatalErrorException: ILLink: error IL1011: Failed to write \u0027obj\\Release\\net7.0-android\\android-x86\\linked\\SkiaSharp.Views.Android.dll\u0027.\r\n   ---\u003E System.ArgumentException: Member \u0027System.Int32 SKCanvasView_ignorePixelScaling\u0027 is declared in another module and needs to be imported\r\n     at Mono.Cecil.MetadataBuilder.LookupToken(IMetadataTokenProvider provider)\r\n     at Mono.Cecil.Cil.CodeWriter.WriteOperand(Instruction instruction)\r\n     at Mono.Cecil.Cil.CodeWriter.WriteInstructions()\r\n     at Mono.Cecil.Cil.CodeWriter.WriteResolvedMethodBody(MethodDefinition method)\r\n     at Mono.Cecil.Cil.CodeWriter.WriteMethodBody(MethodDefinition method)\r\n     at Mono.Cecil.MetadataBuilder.AddMethod(MethodDefinition method)\r\n     at Mono.Cecil.MetadataBuilder.AddMethods(TypeDefinition type)\r\n     at Mono.Cecil.MetadataBuilder.AddType(TypeDefinition type)\r\n     at Mono.Cecil.MetadataBuilder.AddTypes()\r\n     at Mono.Cecil.MetadataBuilder.BuildTypes()\r\n     at Mono.Cecil.MetadataBuilder.BuildModule()\r\n     at Mono.Cecil.MetadataBuilder.BuildMetadata()\r\n     at Mono.Cecil.ModuleWriter.\u003C\u003Ec.\u003CBuildMetadata\u003Eb__2_0(MetadataBuilder builder, MetadataReader _)\r\n     at Mono.Cecil.ModuleDefinition.Read[TItem,TRet](TItem item, Func\u00603 read)\r\n     at Mono.Cecil.ModuleWriter.BuildMetadata(ModuleDefinition module, MetadataBuilder metadata)\r\n     at Mono.Cecil.ModuleWriter.Write(ModuleDefinition module, Disposable\u00601 stream, WriterParameters parameters)\r\n     at Mono.Cecil.ModuleWriter.WriteModule(ModuleDefinition module, Disposable\u00601 stream, WriterParameters parameters)\r\n     at Mono.Cecil.ModuleDefinition.Write(String fileName, WriterParameters parameters)\r\n     at Mono.Cecil.AssemblyDefinition.Write(String fileName, WriterParameters parameters)\r\n     at Mono.Linker.Steps.OutputStep.WriteAssembly(AssemblyDefinition assembly, String directory, WriterParameters writerParameters)\r\n     --- End of inner exception stack trace ---\r\n     at Mono.Linker.Steps.OutputStep.WriteAssembly(AssemblyDefinition assembly, String directory, WriterParameters writerParameters)\r\n     at Mono.Linker.Steps.OutputStep.OutputAssembly(AssemblyDefinition assembly)\r\n     at Mono.Linker.Steps.BaseStep.Process(LinkContext context)\r\n     at Mono.Linker.Pipeline.ProcessStep(LinkContext context, IStep step)\r\n     at Mono.Linker.Pipeline.Process(LinkContext context)\r\n     at Mono.Linker.Driver.Run(ILogger customLogger)\r\n     at Mono.Linker.Driver.Main(String[] args)\r\n\r\n\u0060\u0060\u0060\r\n\r\nI\u0027m able to publish for iOS without issues though.\r\n\r\n**Code**\r\n\r\n\u003C!-- a snippet of code that demonstrates the issue --\u003E\r\n\r\n**Expected Behavior**\r\n\r\nEither linking works correctly or the library does skip linking.\r\n\r\n**Actual Behavior**\r\n\r\nThe linking fails which causes the build to fail.\r\n\r\n**Basic Information**\r\n\r\n- Platform Target Frameworks: \u003C!-- all that apply, remove the platforms that aren\u0027t broken or haven\u0027t had any testing --\u003E\r\n  - Android: .net7-android\r\n\r\n\r\n\r\n",
  "author": {
    "login": "NPadrutt",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2022-10-22T17:37:11",
  "updatedAt": "2023-01-13T09:00:50",
  "closedAt": "2022-12-14T08:42:06",
  "commentCount": 7,
  "reactionCount": 5,
  "engagement": {
    "syncedAt": "2026-02-06T13:47:14.6849258Z",
    "reactions": [
      {
        "user": "tipa",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:47:14.6849305Z"
      },
      {
        "user": "lmoe",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:47:14.6849309Z"
      },
      {
        "user": "AlexBar",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:47:14.6849311Z"
      },
      {
        "user": "idenardi",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:47:14.6849313Z"
      },
      {
        "user": "omghb",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:47:14.6849315Z"
      }
    ],
    "comments": [
      {
        "id": 1311453777,
        "author": "NPadrutt",
        "body": "As an update, this issue persists on the stable release of .net 7.",
        "createdAt": "2022-11-11T09:33:20",
        "reactions": []
      },
      {
        "id": 1311685515,
        "author": "justlucky",
        "body": "As an update, this issue persists on the stable release of .net 7.",
        "createdAt": "2022-11-11T13:17:01",
        "reactions": []
      },
      {
        "id": 1315075588,
        "author": "AswinPG",
        "body": "As an update, this issue persists on the stable release of .net 7. :(",
        "createdAt": "2022-11-15T10:04:17",
        "reactions": []
      },
      {
        "id": 1317627922,
        "author": "clough360",
        "body": "Yes, can confirm this issue with stable release of .Net 7. Only occurs on Android, compiles ok on IOS",
        "createdAt": "2022-11-16T20:28:34",
        "reactions": [
          {
            "user": "owl-guy",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:47:13.991472Z"
          },
          {
            "user": "NPadrutt",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:47:13.9914724Z"
          },
          {
            "user": "AlexBar",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:47:13.9914725Z"
          },
          {
            "user": "omghb",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:47:13.9914726Z"
          }
        ]
      },
      {
        "id": 1349186474,
        "author": "tipa",
        "body": "Same problem has been posted here (incl. a workaround): https://github.com/dotnet/maui/issues/11901",
        "createdAt": "2022-12-13T17:28:38",
        "reactions": [
          {
            "user": "NPadrutt",
            "content": "heart",
            "createdAt": "2026-02-06T13:47:14.2099764Z"
          }
        ]
      },
      {
        "id": 1350642266,
        "author": "mattleibow",
        "body": "Here is the workaround and explanation https://github.com/dotnet/maui/issues/11901#issuecomment-1344570537 ",
        "createdAt": "2022-12-14T08:41:17",
        "reactions": []
      },
      {
        "id": 1350643242,
        "author": "mattleibow",
        "body": "Closing this as it is fixed in a servicing release as well as rewritten in net8. ",
        "createdAt": "2022-12-14T08:42:01",
        "reactions": []
      }
    ]
  }
}