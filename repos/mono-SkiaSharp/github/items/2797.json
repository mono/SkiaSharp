{
  "number": 2797,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] Drawing Chinese using SkiaSharp in Blazor WASM is very blurry",
  "body": "### Description\n\nI have enabled Antialias, but Blazor WASM DrawText in Chinese comes out very blurry, Windows Forms DrawText Chinese is very clear and sharp.\r\n\r\nWhat is the method to draw Chinese clearly on Blazor WASM SkiaSharp?\r\nThe following figure shows the test cases: \r\n![14641710295992_ pic](https://github.com/mono/SkiaSharp/assets/33852145/8d472492-9ea4-4ad9-a4e6-c296fb7ca3c0)\r\n\n\n### Code\n\nhttps://github.com/18779758522/SkiaSharpBlazorWebDemo\r\n\n\n### Expected Behavior\n\nI tried upgrading to the latest version and it worked the same way.\n\n### Actual Behavior\n\n_No response_\n\n### Version of SkiaSharp\n\n2.88.4-preview (Preview)\n\n### Last Known Good Version of SkiaSharp\n\nOther (Please indicate in the description)\n\n### IDE / Editor\n\nVisual Studio Code (Windows)\n\n### Platform / Operating System\n\nAll\n\n### Platform / Operating System Version\n\nGoole Chrome 122.0.6261.112\n\n### Devices\n\n_No response_\n\n### Relevant Screenshots\n\n_No response_\n\n### Relevant Log Output\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "qwertzou",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2024-03-13T09:33:39",
  "updatedAt": "2024-07-12T03:06:06",
  "closedAt": "2024-07-12T02:37:39",
  "commentCount": 9,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:35:58.0565181Z",
    "reactions": [],
    "comments": [
      {
        "id": 2224203016,
        "author": "HinTak",
        "body": "The problem at first glance, is in your code : you asked for \u0060TextSize = 16\u0060. That means it is generated at size 16 (roughly a 16x16 pixel grid, though the actual detail could differ, depending on the font itself), then scaled/drawn on your canvas. If you ask for a much larger size and have skia scale down for you, you would get better results.",
        "createdAt": "2024-07-12T00:31:22",
        "reactions": []
      },
      {
        "id": 2224226753,
        "author": "HinTak",
        "body": "Also 16 is likely an embedded bitmap size - ie you are reading the embedded bitmap within the font, rather than using the scalable outlines. Just a much larger value e.g. 32, then scale it to half size within the canvas.",
        "createdAt": "2024-07-12T00:49:41",
        "reactions": []
      },
      {
        "id": 2224234084,
        "author": "qwertzou",
        "body": "\u003E 16 \u4E5F\u53EF\u80FD\u662F\u5D4C\u5165\u4F4D\u56FE\u5927\u5C0F - \u5373\u60A8\u6B63\u5728\u8BFB\u53D6\u5B57\u4F53\u5185\u5D4C\u5165\u7684\u4F4D\u56FE\uFF0C\u800C\u4E0D\u662F\u4F7F\u7528\u53EF\u7F29\u653E\u8F6E\u5ED3\u3002\u53EA\u9700\u4E00\u4E2A\u5927\u5F97\u591A\u7684\u503C\uFF0C\u4F8B\u5982 32\uFF0C\u7136\u540E\u5728\u753B\u5E03\u5185\u5C06\u5176\u7F29\u653E\u5230\u4E00\u534A\u5927\u5C0F\u3002\r\n\r\nThank you for your answer, this method may be feasible. It\u0027s strange why using Winform can draw text very clearly.",
        "createdAt": "2024-07-12T01:00:21",
        "reactions": []
      },
      {
        "id": 2224243692,
        "author": "HinTak",
        "body": "Winform likely defaults to disable the use of embedded bitmaps. This is possible with freetype based renderer (skia) too, but it is not the default.\r\n\r\nSome people like the embedded bitmaps - black is black and white is white. Some people prefer the outlines: you can gray pixels but the shapes are never distorted.\r\n\r\nHmm, I think it is the other way round - winforms uses the embedded bitmaps but skiasharp uses outlines. Anyway, you want to look for the embedded bitmap option or scale it yourself.",
        "createdAt": "2024-07-12T01:12:29",
        "reactions": []
      },
      {
        "id": 2224247446,
        "author": "HinTak",
        "body": "Found it - you want to play with the embedded bitmap property a bit: https://learn.microsoft.com/en-us/dotnet/api/skiasharp.skfont.embeddedbitmaps?view=skiasharp-2.88#skiasharp-skfont-embeddedbitmaps - i.e. set it on if it is off, etc.",
        "createdAt": "2024-07-12T01:17:51",
        "reactions": [
          {
            "user": "qwertzou",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:35:57.2305929Z"
          }
        ]
      },
      {
        "id": 2224258135,
        "author": "qwertzou",
        "body": "\u003E Found it - you want to play with the embedded bitmap property a bit: https://learn.microsoft.com/en-us/dotnet/api/skiasharp.skfont.embeddedbitmaps?view=skiasharp-2.88#skiasharp-skfont-embeddedbitmaps - i.e. set it on if it is off, etc.\r\n\r\nWow, it\u0027s effective, the drawing effect is the same as Winform.\r\n![WX20240712-093105](https://github.com/user-attachments/assets/304f2485-93d9-47cb-ac7a-fb4acc05915f)\r\n\r\nusing var paint = new SKPaint\r\n\u0060\u0060\u0060\r\n{\r\n        TextSize = 16,\r\n        IsAntialias = true,\r\n        Color = SKColors.Black,\r\n        TextAlign = SKTextAlign.Left,\r\n        Typeface = SkiaChinaFont.ChinaFont,\r\n        IsEmbeddedBitmapText = true\r\n};\r\n\u0060\u0060\u0060\r\nSKPaint.IsEmbeddedBitmapText = true  Just need to set it to true here",
        "createdAt": "2024-07-12T01:32:35",
        "reactions": []
      },
      {
        "id": 2224267765,
        "author": "HinTak",
        "body": "Embedded bitmap is what it is - a pixel grid of the glyph within the font. So if you specify to use it, and also disable scaling, you should get identical result with the same font, regardless of which tech you use to display the font.",
        "createdAt": "2024-07-12T01:46:22",
        "reactions": []
      },
      {
        "id": 2224317719,
        "author": "qwertzou",
        "body": "close",
        "createdAt": "2024-07-12T02:37:39",
        "reactions": []
      },
      {
        "id": 2224338168,
        "author": "HinTak",
        "body": "You should/could close this one too: https://github.com/mono/SkiaSharp/issues/2713",
        "createdAt": "2024-07-12T03:06:06",
        "reactions": []
      }
    ]
  }
}