{
  "number": 2153,
  "type": "pr",
  "state": "closed",
  "title": "expose more of SKMatrix",
  "body": "**Description of Change**\r\n\r\n\u003C!-- Describe your changes here. --\u003E\r\n\r\n**Bugs Fixed**\r\n\r\n- Fixes #\r\n\r\n\u003C!-- Provide links to issues here. Ensure that a GitHub issue was created for your feature or bug fix before sending PR. --\u003E\r\n\r\n**API Changes**\r\n\r\nNone.\r\n\r\n\u003C!-- REPLACE THIS COMMENT\r\n\r\nList all API changes here (or just put None), example:\r\n\r\nAdded: \r\n \r\n- \u0060string Class.Property { get; set; }\u0060\r\n- \u0060void Class.Method();\u0060\r\n\r\nChanged:\r\n\r\n - \u0060object Cell.OldPropertyName =\u003E object Cell.NewPropertyName\u0060\r\n\r\n--\u003E\r\n\r\n**Behavioral Changes**\r\n\r\nNone.\r\n\r\n\u003C!-- Describe any non-bug related behavioral changes that may change how users app behaves when upgrading to this version of the codebase. --\u003E\r\n\r\n**Required skia PR**\r\n\r\nhttps://github.com/mono/SkiaSharp/pull/2153\r\n\r\n**PR Checklist**\r\n\r\n- [ ] Has tests (if omitted, state reason in description)\r\n- [ ] Rebased on top of main at time of PR\r\n- [ ] Merged related skia PRs\r\n- [ ] Changes adhere to coding standard\r\n- [ ] Updated documentation\r\n",
  "author": {
    "login": "mgood7123",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2022-07-07T13:23:09",
  "updatedAt": "2024-03-05T15:32:35",
  "closedAt": "2024-03-02T20:14:57",
  "commentCount": 2,
  "reactionCount": 0,
  "draft": false,
  "mergeable": false,
  "merged": false,
  "mergeableState": "dirty",
  "baseBranch": "main",
  "headBranch": "matrix",
  "additions": 1043,
  "deletions": 126,
  "changedFiles": 3,
  "commits": 5,
  "reviews": [
    {
      "author": "sebllll",
      "state": "COMMENTED",
      "submittedAt": "2024-01-08T20:16:38"
    },
    {
      "author": "mgood7123",
      "state": "COMMENTED",
      "submittedAt": "2024-01-09T03:16:54"
    }
  ],
  "engagement": {
    "syncedAt": "2026-02-06T13:39:32.9440888Z",
    "reactions": [],
    "comments": [
      {
        "id": 1974897233,
        "author": "mattleibow",
        "body": "Thanks for this PR! However, I am not sure the current \u0060SKMatrix\u0060 approach is the way we want to go for 3.0.\r\n\r\nI have been investigating this from a perf perspective and right now \u0060SKMatrix\u0060 has terrible performance compared to \u0060SKMatrix44\u0060. It is about 200% slower because it has to hop the interop, and it also is deceiving because using a struct is supposed to be light, however it does expensive things. \r\n\r\n - See https://github.com/mono/SkiaSharp/issues/2779\r\n\r\nIt may even be cheaper to use \u0060Matrix4x4\u0060 under the hood. In addition to the current interop, the managed struct does not have the matrix type mask which skia uses to take shortcuts. As a result, even just passing the struct between C\u002B\u002B and C# causes skia to have to recalculate it. It may be better to just re-implement the whole thing in C#.",
        "createdAt": "2024-03-02T20:14:57",
        "reactions": []
      },
      {
        "id": 1979043446,
        "author": "mgood7123",
        "body": "alright\r\n\r\nOn Sun, 3 Mar 2024 at 06:15, Matthew Leibowitz ***@***.***\u003E\r\nwrote:\r\n\r\n\u003E Thanks for this PR! However, I am not sure the current SKMatrix approach\r\n\u003E is the way we want to go for 3.0.\r\n\u003E\r\n\u003E I have been investigating this from a perf perspective and right now\r\n\u003E SKMatrix has terrible performance compared to SKMatrix44. It is about\r\n\u003E 200% slower because it has to hop the interop, and it also is deceiving\r\n\u003E because using a struct is supposed to be light, however it does expensive\r\n\u003E things.\r\n\u003E\r\n\u003E    - See #2779 \u003Chttps://github.com/mono/SkiaSharp/issues/2779\u003E\r\n\u003E\r\n\u003E It may even be cheaper to use Matrix4x4 under the hood. In addition to\r\n\u003E the current interop, the managed struct does not have the matrix type mask\r\n\u003E which skia uses to take shortcuts. As a result, even just passing the\r\n\u003E struct between C\u002B\u002B and C# causes skia to have to recalculate it. It may be\r\n\u003E better to just re-implement the whole thing in C#.\r\n\u003E\r\n\u003E \u2014\r\n\u003E Reply to this email directly, view it on GitHub\r\n\u003E \u003Chttps://github.com/mono/SkiaSharp/pull/2153#issuecomment-1974897233\u003E, or\r\n\u003E unsubscribe\r\n\u003E \u003Chttps://github.com/notifications/unsubscribe-auth/AGLITH7XCBP7JBLEKMB3ZZTYWIXM5AVCNFSM525MXEBKU5DIOJSWCZC7NNSXTN2JONZXKZKDN5WW2ZLOOQ5TCOJXGQ4DSNZSGMZQ\u003E\r\n\u003E .\r\n\u003E You are receiving this because you authored the thread.Message ID:\r\n\u003E ***@***.***\u003E\r\n\u003E\r\n",
        "createdAt": "2024-03-05T15:32:33",
        "reactions": []
      }
    ]
  }
}