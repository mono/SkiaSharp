{
  "number": 2410,
  "type": "issue",
  "state": "open",
  "title": "[BUG] .NET MAUI App crashes on iOS while starting (SkiaSharp.Views.Maui 2.88.3)",
  "body": "**Description**\r\n\r\nI am trying to use SkiaSharp in a .NET MAUI application (.NET 6.0). After the deployment to local device (iPad), when i try to start the app, it crashes with the following error code :\r\n\r\n**Output Message**\r\n\u0060\u0060\u0060\r\n[0:] An error occurred: \u0027@rpath/libSkiaSharp.framework/libSkiaSharp\u0027. Callstack: \u0027   at SkiaSharp.SKPaint..ctor()\r\n   at MauiApp1_60.MainPage..ctor() in D:\\Projeler\\TEMP\\MauiApp1-60\\MainPage.xaml.cs:line 13\r\n   at System.Reflection.RuntimeConstructorInfo.InternalInvoke(Object obj, Object[] parameters, Boolean wrapExceptions)\u0027\r\nThe app has been terminated.\r\n\u0060\u0060\u0060\r\n\r\nApp crashes only when i try to deploy to iPad. For Android and Windows, it works.\r\n\r\nIn the code I am just trying to call the ctor of SKPaint class with the following code :\r\n\r\n\u0060\u0060\u0060\r\npublic MainPage()\r\n\t{\r\n\t\tInitializeComponent();\r\n\r\n\t\tvar a = new SKPaint();\r\n\t}\r\n\r\n\u0060\u0060\u0060\r\nWhen i remove the construction of SKPaint(), the app deploys and runs on iPad. \r\n\r\nI also added the .UseSkiaSharp() command in MauiProgram class as :\r\n\r\n\u0060\u0060\u0060\r\npublic static MauiApp CreateMauiApp()\r\n\t{\r\n\t\tvar builder = MauiApp.CreateBuilder();\r\n\t\tbuilder\r\n\t\t\t.UseMauiApp\u003CApp\u003E()\r\n\t\t\t.UseSkiaSharp()\r\n\t\t\t.ConfigureFonts(fonts =\u003E\r\n\t\t\t{\r\n\t\t\t\tfonts.AddFont(\u0022OpenSans-Regular.ttf\u0022, \u0022OpenSansRegular\u0022);\r\n\t\t\t\tfonts.AddFont(\u0022OpenSans-Semibold.ttf\u0022, \u0022OpenSansSemibold\u0022);\r\n\t\t\t});\r\n\r\n\t\treturn builder.Build();\r\n\t}\r\n\u0060\u0060\u0060\r\n\r\n**Expected Behavior**\r\n\r\nCreating an instance of a SKPaint class.\r\n\r\n**Actual Behavior**\r\n\r\nApp crashes\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  \r\n   SkiaSharp.Views.Maui.Controls (2.88.3), \r\n   SkiaSharp.Views.Maui.Controls.Compatibility (2.88.3)\r\n   SkiaSharp.Views.Maui.Core(2.88.3)\r\n\r\n- IDE:  \r\n  Microsoft Visual Studio Enterprise 2022 (64-bit) - Current Version 17.5.0 (Windows 11)\r\n- Platform Target Frameworks: \r\n  iOS:  13.6\r\n- Target Devices:  \r\n  iPad 9. Generation, iPadOs : 16.3.1\r\n\r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EDetailed IDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\n\u0060\u0060\u0060\r\n\r\nMicrosoft Visual Studio Enterprise 2022\r\nVersion 17.5.0\r\nVisualStudio.17.Release/17.5.0\u002B33414.496\r\nMicrosoft .NET Framework\r\nVersion 4.8.09032\r\n\r\nInstalled Version: Enterprise\r\n\r\nASP.NET and Web Tools   17.5.317.37931\r\nASP.NET and Web Tools\r\n\r\nAzure App Service Tools v3.0.0   17.5.317.37931\r\nAzure App Service Tools v3.0.0\r\n\r\nAzure Functions and Web Jobs Tools   17.5.317.37931\r\nAzure Functions and Web Jobs Tools\r\n\r\nC# Tools   4.5.0-6.23109.5\u002B6a5a63bbc9f4449d9bd1e95a8f9624939c3ccdc3\r\nC# components used in the IDE. Depending on your project type and settings, a different version of the compiler may be used.\r\n\r\nCommon Azure Tools   1.10\r\nProvides common services for use by Azure Mobile Services and Microsoft Azure Tools.\r\n\r\nExtensibility Message Bus   1.4.3 (main@2a4517a)\r\nProvides common messaging-based MEF services for loosely coupled Visual Studio extension components communication and integration.\r\n\r\nMicrosoft Azure Tools for Visual Studio   2.9\r\nSupport for Azure Cloud Services projects\r\n\r\nMicrosoft JVM Debugger   1.0\r\nProvides support for connecting the Visual Studio debugger to JDWP compatible Java Virtual Machines\r\n\r\nMono Debugging for Visual Studio   17.5.9 (11975e6)\r\nSupport for debugging Mono processes with Visual Studio.\r\n\r\nNuGet Package Manager   6.5.0\r\nNuGet Package Manager in Visual Studio. For more information about NuGet, visit https://docs.nuget.org/\r\n\r\nRazor (ASP.NET Core)   17.5.2.2307502\u002B8b3141d86b738daf2ca3ed9c15b12513071fc676\r\nProvides languages services for ASP.NET Core Razor.\r\n\r\nSQL Server Data Tools   17.2.40118.0\r\nMicrosoft SQL Server Data Tools\r\n\r\nTypeScript Tools   17.0.20105.2003\r\nTypeScript Tools for Microsoft Visual Studio\r\n\r\nVisual Basic Tools   4.5.0-6.23109.5\u002B6a5a63bbc9f4449d9bd1e95a8f9624939c3ccdc3\r\nVisual Basic components used in the IDE. Depending on your project type and settings, a different version of the compiler may be used.\r\n\r\nVisual F# Tools   17.5.0-beta.23053.5\u002B794b7c259d9646a7eb685dad865aa27da7940a21\r\nMicrosoft Visual F# Tools\r\n\r\nVisual Studio IntelliCode   2.2\r\nAI-assisted development for Visual Studio.\r\n\r\nVisualStudio.DeviceLog   1.0\r\nInformation about my package\r\n\r\nVisualStudio.Mac   1.0\r\nMac Extension for Visual Studio\r\n\r\nVSPackage Extension   1.0\r\nVSPackage Visual Studio Extension Detailed Info\r\n\r\nXamarin   17.5.0.173 (d17-5@33e727c)\r\nVisual Studio extension to enable development for Xamarin.iOS and Xamarin.Android.\r\n\r\nXamarin Designer   17.5.3.46 (remotes/origin/d17-5@e4dd80b2bb)\r\nVisual Studio extension to enable Xamarin Designer tools in Visual Studio.\r\n\r\nXamarin Templates   17.5.41 (ba80d05)\r\nTemplates for building iOS, Android, and Windows apps with Xamarin and Xamarin.Forms.\r\n\r\nXamarin.Android SDK   13.2.0.0 (d17-5/797e2e1)\r\nXamarin.Android Reference Assemblies and MSBuild support.\r\n    Mono: 6dd9def\r\n    Java.Interop: xamarin/java.interop/main@149d70fe\r\n    SQLite: xamarin/sqlite/3.40.0@fdc1e34\r\n    Xamarin.Android Tools: xamarin/xamarin-android-tools/main@9f02d77\r\n\r\n\r\nXamarin.iOS and Xamarin.Mac SDK   16.2.0.5 (7738c90c9)\r\nXamarin.iOS and Xamarin.Mac Reference Assemblies and MSBuild support.\r\n\r\n\u0060\u0060\u0060\r\n\u003C/details\u003E\r\n\r\n",
  "author": {
    "login": "erdogdum",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-03-07T16:24:11",
  "updatedAt": "2023-04-14T12:50:06",
  "commentCount": 8,
  "reactionCount": 5,
  "engagement": {
    "syncedAt": "2026-02-06T13:46:28.0987552Z",
    "reactions": [
      {
        "user": "UkeHa",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:46:28.0987585Z"
      },
      {
        "user": "borrmann",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:46:28.0987724Z"
      },
      {
        "user": "LRufenacht",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:46:28.0987729Z"
      },
      {
        "user": "Inrego",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:46:28.0987733Z"
      },
      {
        "user": "logikonline",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:46:28.0987736Z"
      }
    ],
    "comments": [
      {
        "id": 1463798971,
        "author": "UkeHa",
        "body": "Can confirm, SKCodec.Create(inputStream); doesn\u0027t work either. I suspect this has to do with the native libraries not being copied into the right directory and therefore failing. @mattleibow, could you try to reproduce this issue?",
        "createdAt": "2023-03-10T13:23:19",
        "reactions": [
          {
            "user": "borrmann",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:46:26.5576164Z"
          },
          {
            "user": "logikonline",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:46:26.5576169Z"
          }
        ]
      },
      {
        "id": 1475949847,
        "author": "cwilde123",
        "body": "I\u0027m getting the same issue. I\u0027m using a library that uses SKIA MAUI lib and I boiled down the bug to when it tries to create a new SKpaint object it crashes on iOS. It\u0027s weird though because it works on the iOS simulator running 16.2 but not a real device on any iOS version I tested running in either debug or release with Adhoc previsioning profile. @erdogdum  Does it work on a simulator for you? Will there be a fix for this? My issue regarding this: #2421",
        "createdAt": "2023-03-20T10:10:33",
        "reactions": [
          {
            "user": "logikonline",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:46:26.7900653Z"
          }
        ]
      },
      {
        "id": 1475988429,
        "author": "UkeHa",
        "body": "My workaround for this is twofold.\r\n\r\nFirst, i compress my pictures with iOS-specific code:\r\n\r\n\u0060\u0060\u0060\r\n#if IOS\r\n\t\tprivate static byte[] ResizeImageIos(byte[] imageData)\r\n\t\t{\r\n\t\t\tvar originalImage = ImageFromByteArray(imageData);\r\n\t\t\tusing var jpgImage = originalImage.AsJPEG(0.9f);\r\n\t\t\treturn jpgImage.ToArray();\r\n\t\t}\r\n\t\tpublic static UIImage ImageFromByteArray(byte[] data)\r\n\t\t{\r\n\t\t\tif (data == null)\r\n\t\t\t{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tUIImage image;\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\timage = new UIImage(NSData.FromArray(data));\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn image;\r\n\t\t}\r\n#endif\r\n\u0060\u0060\u0060\r\n\r\nSecond, i\u0027m using https://github.com/dimonovdd/Xamarin.MediaGallery to capture/select images, as the current implementation in MAUI is broken and doesn\u0027t return the image orientation.\r\n",
        "createdAt": "2023-03-20T10:37:53",
        "reactions": []
      },
      {
        "id": 1499068352,
        "author": "LRufenacht",
        "body": "Same issue here.\r\n\r\n{System.TypeInitializationException: The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception.\r\n ---\u003E System.DllNotFoundException: @rpath/libSkiaSharp.framework/libSkiaSharp\r\n   at SkiaSharp.SKImageInfo..cctor()\r\n\r\nwhen creating a new SKBitmap on a physical iOS device.",
        "createdAt": "2023-04-06T13:30:08",
        "reactions": [
          {
            "user": "logikonline",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:46:27.2092295Z"
          }
        ]
      },
      {
        "id": 1506519500,
        "author": "Inrego",
        "body": "Running into the same issue here. Did anyone find a workaround?",
        "createdAt": "2023-04-13T07:58:15",
        "reactions": []
      },
      {
        "id": 1506523284,
        "author": "cwilde123",
        "body": "@Inrego No it\u0027s really annoying, tried cloning the whole repo down and fixing the SKpaint object myself but there is so many dependencies for this so it\u0027s no point. This is a major bug that needs to be fixed",
        "createdAt": "2023-04-13T08:00:50",
        "reactions": []
      },
      {
        "id": 1506543879,
        "author": "Inrego",
        "body": "I actually managed to get it working. What I did was to connect my iPad directly to the Mac, and deploy the app to iOS Remote Devices -\u003E device rather than doing the Hot Reload thingy where the device is connected directly to the Windows machine.\r\n\r\nOther things I also did, which may or may not be necessary: Changed Minimum Target iOS Framework to 13.6 (I noticed that the SkiaSharp NuGet targets net6.0-ios13.6)",
        "createdAt": "2023-04-13T08:15:39",
        "reactions": []
      },
      {
        "id": 1508457294,
        "author": "erdogdum",
        "body": "@Inrego \u0027s solution works and that\u0027s how we also tried to implement. ",
        "createdAt": "2023-04-14T12:50:06",
        "reactions": []
      }
    ]
  }
}