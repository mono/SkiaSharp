{
  "number": 2745,
  "type": "issue",
  "state": "closed",
  "title": "System.DllNotFoundException: libSkiaSharp exception is thrown in Blazor WASM .NET 8.0",
  "body": "### Description\r\nSystem.DllNotFoundException: libSkiaSharp exception is thrown while using SkiaSharp library in Blazor WASM .NET 8.0 and this issue doesn\u0027t occur in Blazor WASM .NET 6.0.\r\n\r\n**Stack trace:**  \r\n\r\nSystem.TypeInitializationException: The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception. \r\n ---\u003E System.DllNotFoundException: libSkiaSharp \r\n    at SkiaSharp.SKImageInfo..cctor() \r\n\r\n**Note:** \r\nWhen trying the same approach in Blazor WASM .NET 6.0, there is no issues. \r\n\r\n### Code\r\n\u0060\u0060\u0060cs\r\ntry \r\n{ \r\n    using (SKBitmap bitmap = new SKBitmap(500, 500, SKImageInfo.PlatformColorType, SKAlphaType.Premul)) \r\n    { \r\n        using (SKSurface sKSurface = SKSurface.Create(bitmap.Info)) \r\n        { \r\n            SKCanvas sKCanvas = sKSurface.Canvas; \r\n            SKPaint sKPaint = new SKPaint(); \r\n            sKPaint.Color = new SKColor(255, 0, 0); \r\n            sKCanvas.DrawText(\u0022Blazor\u0022, new SKPoint(250, 250), sKPaint); \r\n            MemoryStream stream = new MemoryStream(); \r\n            sKSurface.Snapshot().Encode(SKEncodedImageFormat.Png, 100).SaveTo(stream); \r\n        } \r\n    } \r\n} \r\ncatch (Exception ex) \r\n{ \r\n    ex.ToString(); \r\n} \r\n\u0060\u0060\u0060\r\n\r\n### Expected Behavior\r\n\r\nShould draw the text and save as png. \r\n\r\n### Actual Behavior\r\n\r\nThrows the above mentioned exception (System.DllNotFoundException: libSkiaSharp)\r\n\r\n### Version of SkiaSharp\r\n\r\n2.88.6\r\n\r\n### Last Known Good Version of SkiaSharp\r\n\r\nNone\r\n\r\n### IDE / Editor\r\n\r\nVisual Studio (Windows)\r\n\r\n### Platform / Operating System\r\n\r\nWindows\r\n\r\n### Platform / Operating System Version\r\n\r\n.NET 8.0\r\n\r\n**ASP.NET Core .NET 8.0 :** Working fine\r\n\r\n**Blazor server side .NET 8.0 :** Working fine\r\n\r\n**Blazor client side (WASM) .NET 8.0 :** Facing Lib SkiaSharp issue ",
  "author": {
    "login": "Akash26Arul",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "status/needs-info",
      "color": "B8EC4A"
    }
  ],
  "assignees": [],
  "createdAt": "2024-02-07T14:11:29",
  "updatedAt": "2025-10-10T04:18:10",
  "closedAt": "2024-11-21T16:34:22",
  "commentCount": 8,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T12:39:21.9550498Z",
    "reactions": [],
    "comments": [
      {
        "id": 1945523662,
        "author": "Akash26Arul",
        "body": "Hi team,\r\n\r\nAny update on this?\r\n\r\nRegards,\r\nAkash.",
        "createdAt": "2024-02-15T07:48:06",
        "reactions": []
      },
      {
        "id": 1962886896,
        "author": "torourke55",
        "body": "I was able to run your code after adding SkiaSharp.Views.Blazor package. https://www.nuget.org/packages/SkiaSharp.Views.Blazor/2.88.7. I\u0027m using WASM .NET 8.0 Visual Studio 2022 version 17.9.1.",
        "createdAt": "2024-02-25T10:29:25",
        "reactions": [
          {
            "user": "OlivierMaire",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:39:20.4348326Z"
          },
          {
            "user": "BenMcLean",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:39:20.4348329Z"
          },
          {
            "user": "benbaker76",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:39:20.434833Z"
          }
        ]
      },
      {
        "id": 2473726086,
        "author": "mattleibow",
        "body": "You need to either install \u0060SkiaSharp.Views.Blazor\u0060 or \u0060SkiaSharp.NativeAssets.WebAssembly\u0060 in order to get the binaries for WASM.\r\n\r\nTry the latest versions as we have also fixed several packaging issues.",
        "createdAt": "2024-11-13T14:09:30",
        "reactions": []
      },
      {
        "id": 2495807919,
        "author": "gismofx",
        "body": "\u003E SkiaSharp.Views.Blazor\r\n\r\nI\u0027m getting the same issue. I tried the latest release and the latest preview release. \r\n\r\nI found a thread from a few years ago https://github.com/mono/SkiaSharp/issues/1725\r\n\r\nDoing this is a work-around:\r\n\u0060\u0060\u0060xml\r\n\t\u003CItemGroup\u003E\r\n\t\t\u003CNativeFileReference Include=\u0022$(HarfBuzzSharpStaticLibraryPath)\\8.3.1-preview.1.2\\*.a\u0022 /\u003E\r\n\t\u003C/ItemGroup\u003E\r\n\u0060\u0060\u0060\r\n",
        "createdAt": "2024-11-24T04:48:42",
        "reactions": []
      },
      {
        "id": 2633722496,
        "author": "corradolab",
        "body": "The error still happend to me with 2.0.0-rc5.1.\n\nVisual Studio warned no native assemblies would be built because WasmBuildNative was false.\nSo I added \u0060\u003CPropertyGroup\u003E\u003CWasmBuildNative\u003Etrue\u003C/WasmBuildNative\u003E\u003C/PropertyGroup\u003E\u0060 to the project file.\n\nThis triggered compilation error because \u0060wasm-tools-net8\u0060 workload was missing.\nI executed \u0060dotnet workload restore\u0060 as suggested but the error remained.\n\nI started Visual Studio Installer, switched to \u0022Single components\u0022 and enabled \u0022.NET 8.0 WebAssembly Build Tools\u0022 which fixed the issue.\n",
        "createdAt": "2025-02-04T12:11:39",
        "reactions": [
          {
            "user": "Johnson-Ng",
            "content": "heart",
            "createdAt": "2026-02-06T12:39:21.1734904Z"
          },
          {
            "user": "MrLinDowsMac",
            "content": "heart",
            "createdAt": "2026-02-06T12:39:21.1734908Z"
          },
          {
            "user": "dikaarta",
            "content": "heart",
            "createdAt": "2026-02-06T12:39:21.1734909Z"
          },
          {
            "user": "fernandobritolima",
            "content": "heart",
            "createdAt": "2026-02-06T12:39:21.173491Z"
          }
        ]
      },
      {
        "id": 3104403404,
        "author": "rafael-vasconcellos",
        "body": "\u003E The error still happend to me with 2.0.0-rc5.1.\n\u003E \n\u003E Visual Studio warned no native assemblies would be built because WasmBuildNative was false. So I added \u0060\u003CPropertyGroup\u003E\u003CWasmBuildNative\u003Etrue\u003C/WasmBuildNative\u003E\u003C/PropertyGroup\u003E\u0060 to the project file.\n\u003E \n\u003E This triggered compilation error because \u0060wasm-tools-net8\u0060 workload was missing. I executed \u0060dotnet workload restore\u0060 as suggested but the error remained.\n\u003E \n\u003E I started Visual Studio Installer, switched to \u0022Single components\u0022 and enabled \u0022.NET 8.0 WebAssembly Build Tools\u0022 which fixed the issue.\n\nI\u0027m building on a linux machine, what should I do?",
        "createdAt": "2025-07-22T18:59:40",
        "reactions": []
      },
      {
        "id": 3141076884,
        "author": "Dunge",
        "body": "I also have the problem that my debug build on Windows by Visual Studio works, but not when building a docker image.\n\nNo difference between \u0060SkiaSharp.Views.Blazor\u0060 or \u0060SkiaSharp.NativeAssets.WebAssembly\u0060, but I guess I\u0027ll use the later because I don\u0027t need the component.\n\nCan anyone explain what \u0060\u003CWasmBuildNative\u003E\u0060 actually do? It\u0027s not part of the Microsoft Learn website. Seems lengthen the build process. I added it and as with the previous user said, it then requested \u0060wasm-tools\u0060\n\nI added this as part of my  \u0060sdk:9.0 AS build\u0060 step:\n\n\u0060RUN dotnet workload install wasm-tools\u0060\nAnd it then complained about python. So I added\n\u0060RUN apt-get update \u0026\u0026 apt-get install -y python3 \u0026\u0026 rm -rf /var/lib/apt/lists/*\u0060\n\nAnd it finally worked!\n\nMy build time now increased from 5 minutes (which was already long) to 8 minutes \uD83D\uDE2D.\n\nI then removed as a test \u0060\u003CWasmBuildNative\u003E\u0060 to see if it could still work and be faster with just the wasm-tools installed. But it seems to still be doing the new Emscripten build step anyway, so it doesn\u0027t change anything with it present or not except for the error message.\n\nThe documentation of this project could certainly use some guidance about this.\n\n\n",
        "createdAt": "2025-07-31T19:13:28",
        "reactions": []
      },
      {
        "id": 3388226248,
        "author": "dikaarta",
        "body": "\u003E The error still happend to me with 2.0.0-rc5.1.\n\u003E \n\u003E Visual Studio warned no native assemblies would be built because WasmBuildNative was false. So I added \u0060\u003CPropertyGroup\u003E\u003CWasmBuildNative\u003Etrue\u003C/WasmBuildNative\u003E\u003C/PropertyGroup\u003E\u0060 to the project file.\n\u003E \n\u003E This triggered compilation error because \u0060wasm-tools-net8\u0060 workload was missing. I executed \u0060dotnet workload restore\u0060 as suggested but the error remained.\n\u003E \n\u003E I started Visual Studio Installer, switched to \u0022Single components\u0022 and enabled \u0022.NET 8.0 WebAssembly Build Tools\u0022 which fixed the issue.\n\nThank you very much @corradolab , you saved my day\n\n",
        "createdAt": "2025-10-10T04:18:10",
        "reactions": []
      }
    ]
  }
}