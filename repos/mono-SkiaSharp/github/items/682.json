{
  "number": 682,
  "type": "issue",
  "state": "open",
  "title": "Can\u0027t load Arial Black as SKTypeface on Windows 10 machine",
  "body": "### Description\r\n\r\nWhen specifying the font family name of \u0022Arial Black\u0022 on a Windows 10 machine (or Windows Server 2016), SkiaSharp selects \u0022Segoe UI\u0022 instead.\r\n\r\n### Code\r\n\r\n    SKTypeface tf = SKTypeface.FromFamilyName(\u0022Arial Black\u0022, SKFontStyleWeight.Bold, SKFontStyleWidth.Normal, SKFontStyleSlant.Upright);\r\n\r\nThe resulting \u0060SKTypeface\u0060 has these properties:\r\n\r\n![image](https://user-images.githubusercontent.com/4692325/48377216-d4868700-e692-11e8-9381-a72d61702c0a.png)\r\n\r\nWhen loading \u0022Arial Black\u0022 as a \u0060System.Drawing.FontFamily\u0060 like this:\r\n\r\n    FontFamily fontFamily = new FontFamily(\u0022Arial Black\u0022);\r\n\r\nIt correctly finds the font:\r\n\r\n![image](https://user-images.githubusercontent.com/4692325/48377370-3cd56880-e693-11e8-8c4a-0bd181bf732c.png)\r\n\r\n### Expected Behavior\r\n\r\nSkiaSharp should be able to find the \u0022Arial Black\u0022 font family.\r\n\r\n### Actual Behavior\r\n\r\nSkiaSharp selects the default \u0022Segoe UI\u0022 font family.\r\n\r\n### Basic Information\r\n\r\n- Version with issue:  1.60.3\r\n- IDE:  Visual Studio\r\n- Platform Target Frameworks: \u003C!-- all that apply, remove the platforms that aren\u0027t broken or haven\u0027t had any testing --\u003E\r\n  - Windows Classic:  .NET Framework 4.7.2\r\n\r\n### Additional Information\r\n\r\nWhile browsing the Fonts folder in Windows, I noticed that the only font that appears in the main list is \u0022Arial\u0022:\r\n\r\n![image](https://user-images.githubusercontent.com/4692325/48377565-cab15380-e693-11e8-8771-928f4ef769f9.png)\r\n\r\nBut when you double-click on \u0022Arial,\u0022 it then displays \u0022Arial Black\u0022 in that list:\r\n\r\n![image](https://user-images.githubusercontent.com/4692325/48377596-e3216e00-e693-11e8-8578-5017ca9cc240.png)\r\n\r\nDoes that have something to do with why SkiaSharp can\u0027t find that font? But why can \u0060System.Drawing.FontFamily\u0060 find the font, but SkiaSharp can\u0027t?\n\n\u003E VS bug [#735691](https://devdiv.visualstudio.com/DevDiv/_workitems/edit/735691)",
  "author": {
    "login": "washamdev",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/enhancement",
      "color": "84b6eb"
    },
    {
      "name": "os/Windows-Classic",
      "color": "fbca04"
    },
    {
      "name": "os/Windows-Universal-UWP",
      "color": "fbca04"
    },
    {
      "name": "area/SkiaSharp",
      "color": "0052cc"
    },
    {
      "name": "type/feature-request",
      "color": "ededed"
    }
  ],
  "assignees": [
    {
      "login": "mattleibow",
      "type": "User"
    }
  ],
  "createdAt": "2018-11-12T22:03:57",
  "updatedAt": "2024-09-11T08:20:27",
  "commentCount": 9,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T13:34:43.2301449Z",
    "reactions": [
      {
        "user": "sansjunk",
        "content": "\u002B1",
        "createdAt": "2026-02-06T13:34:43.2301494Z"
      }
    ],
    "comments": [
      {
        "id": 438053141,
        "author": "washamdev",
        "body": "For anyone else experiencing the same problem, I realized that the \u0060SKFontStyleWeight\u0060 enum has a \u0060Black\u0060 value. I ended up having to detect if the incoming font family name is \u0022Arial Black\u0022, and if so, I change the font family name to \u0022Arial\u0022 and set the weight to \u0060SKFontStyleWeight.Black\u0060. That made the resulting font appear like it was set to Arial Black.\r\n\r\n    SKFontStyleWeight weight = fontFamilyName == \u0022Arial Black\u0022 ? SKFontStyleWeight.Black : SKFontStyleWeight.Normal);\r\n    string skiaFontFamilyName = fontFamilyName == \u0022Arial Black\u0022 ? \u0022Arial\u0022 : fontFamilyName;\r\n    SKTypeface tf = SKTypeface.FromFamilyName(skiaFontFamilyName, weight, SKFontStyleWidth.Normal, SKFontStyleSlant.Upright);\r\n\r\nThe question still remains for me: why can\u0027t SkiaSharp handle \u0022Arial Black\u0022 but \u0060System.Drawing.FontFamily\u0060 can?",
        "createdAt": "2018-11-12T22:38:46",
        "reactions": []
      },
      {
        "id": 438091840,
        "author": "neodynamic",
        "body": "Have you tried specifying the font name as \u0022Arial-Black\u0022?",
        "createdAt": "2018-11-13T01:16:08",
        "reactions": []
      },
      {
        "id": 438102246,
        "author": "washamdev",
        "body": "@neodynamic, I just tried your suggestion, but it still returned Segoe UI. Thanks for the idea.",
        "createdAt": "2018-11-13T02:05:56",
        "reactions": []
      },
      {
        "id": 438254562,
        "author": "mattleibow",
        "body": "This sounds very interesting... I will see what I can find out.\r\nI asked on the forums and we can see what the developers say: https://groups.google.com/forum/#!topic/skia-discuss/56foxa1fCoQ",
        "createdAt": "2018-11-13T12:50:23",
        "reactions": [
          {
            "user": "washamdev",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:34:42.1289745Z"
          }
        ]
      },
      {
        "id": 441463199,
        "author": "Gillibald",
        "body": "GDI\u002B handles font families differently it uses different families for styles like narrow or black. DirectWrite or other frameworks just have one FontFamily \u0060Arial\u0060 and uses styles for all different combinations of narrow, black, etc. So Skia\u0060s behavior looks right to me. Browsing the font with the explorer just showed how the font family is organized correctly. ",
        "createdAt": "2018-11-25T18:53:40",
        "reactions": []
      },
      {
        "id": 441464324,
        "author": "mattleibow",
        "body": "That really the issue here. TECHNICALLY skia is right. But, we are in the old world and it is unexpected. Google mentions that they have an extra layer over the font to read the prefix/suffix to read the weight and spacing: eg \u0022Arial BLACK EXPANDED\u0022\r\n\r\nI will have to investigate this further to see if we want to do this in the API or leave it up to the developer. Leave comments and we can discuss.\r\n",
        "createdAt": "2018-11-25T19:10:15",
        "reactions": []
      },
      {
        "id": 446129274,
        "author": "sansjunk",
        "body": "I ran into the same issue. My vote is to handle this in SkiaSharp so that the correct family and weight are chosen.  Perhaps an additional API \u0060SKTypeface.FromName\u0060 which can do this.",
        "createdAt": "2018-12-11T09:19:20",
        "reactions": [
          {
            "user": "mattleibow",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:34:42.7358565Z"
          },
          {
            "user": "VRage",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:34:42.7358569Z"
          }
        ]
      },
      {
        "id": 1695762942,
        "author": "VRage",
        "body": "Well, i\u0027ve also stumbled upon this problem and a additional API SKTypeface.FromName would be great. We are trying to convert an old drawing system to skia and there we only get the fontname. To parse this correctly to the new system is pretty tedious and error prone. \r\nBut for everyone struggling with this, here is a Dictionary with all SKTypeFaces by FontNames (Available with Windows11):\r\n\u0060\u0060\u0060c#\r\n                public static Dictionary\u003Cstring, SKTypeface\u003E SKTypeFacesByFontname = new Dictionary\u003Cstring, SKTypeface\u003E(StringComparer.OrdinalIgnoreCase){\r\n                        {\u0022Arial Black\u0022, SKTypeface.FromFamilyName(\u0022Arial\u0022, (int)SKFontStyleWeight.Black, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Arial Narrow\u0022, SKTypeface.FromFamilyName(\u0022Arial\u0022, (int)SKFontStyleWeight.Normal, (int)SKFontStyleWidth.Condensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift Condensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.Normal, (int)SKFontStyleWidth.Condensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift Light\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift Light SemiCondensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.SemiCondensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiBold\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiBold Condensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Condensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiCondensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)SKFontStyleWeight.Normal, (int)SKFontStyleWidth.SemiCondensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiLight\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiLight Condensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)350, (int)SKFontStyleWidth.UltraCondensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Bahnschrift SemiLight SemiCondensed\u0022, SKTypeface.FromFamilyName(\u0022Bahnschrift\u0022, (int)350, (int)SKFontStyleWidth.SemiCondensed, SKFontStyleSlant.Upright) },\r\n                        {\u0022Calibri Light\u0022, SKTypeface.FromFamilyName(\u0022Calibri\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Candara Light\u0022, SKTypeface.FromFamilyName(\u0022Candara\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Code ExtraLight\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Code\u0022, (int)SKFontStyleWeight.ExtraLight, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Code SemiBold\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Code\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Code SemiLight\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Code\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Mono ExtraLight\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Mono\u0022, (int)SKFontStyleWeight.ExtraLight, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Mono Light\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Mono\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Mono SemiBold\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Mono\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Cascadia Mono SemiLight\u0022, SKTypeface.FromFamilyName(\u0022Cascadia Mono\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Corbel Light\u0022, SKTypeface.FromFamilyName(\u0022Corbel\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Dubai Light\u0022, SKTypeface.FromFamilyName(\u0022Dubai\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Dubai Medium\u0022, SKTypeface.FromFamilyName(\u0022Dubai\u0022, (int)SKFontStyleWeight.Medium, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Franklin Gothic Medium\u0022, SKTypeface.FromFamilyName(\u0022Franklin Gothic\u0022, (int)SKFontStyleWeight.Medium, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Leelawadee UI Semilight\u0022, SKTypeface.FromFamilyName(\u0022Leelawadee UI\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Malgun Gothic Semilight\u0022, SKTypeface.FromFamilyName(\u0022Malgun Gothic\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Text Semilight\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Text\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Text Semibold\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Text\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Text Light\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Text\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Small Semilight\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Small\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Small Semibold\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Small\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Small Light\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Small\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Display Semilight\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Display\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Display Semibold\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Display\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Variable Display Light\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI Variable Display\u0022, (int)SKFontStyleWeight.ExtraLight, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Semilight\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Semibold\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Black\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI\u0022, (int)SKFontStyleWeight.Black, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Segoe UI Light\u0022, SKTypeface.FromFamilyName(\u0022Segoe UI\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Nirmala UI Semilight\u0022, SKTypeface.FromFamilyName(\u0022Nirmala UI\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Microsoft YaHei UI Light\u0022, SKTypeface.FromFamilyName(\u0022Microsoft YaHei UI\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Microsoft YaHei Light\u0022, SKTypeface.FromFamilyName(\u0022Microsoft YaHei\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Microsoft JhengHei UI Light\u0022, SKTypeface.FromFamilyName(\u0022Microsoft JhengHei UI\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Microsoft JhengHei Light\u0022, SKTypeface.FromFamilyName(\u0022Microsoft JhengHei\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Banner Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Banner\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Display Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Display\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Heading Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Heading\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Small Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Small\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Subheading Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Subheading\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Sitka Text Semibold\u0022, SKTypeface.FromFamilyName(\u0022Sitka Text\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Yu Gothic Light\u0022, SKTypeface.FromFamilyName(\u0022Yu Gothic\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Yu Gothic Medium\u0022, SKTypeface.FromFamilyName(\u0022Yu Gothic\u0022, (int)SKFontStyleWeight.Medium, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Yu Gothic UI Light\u0022, SKTypeface.FromFamilyName(\u0022Yu Gothic UI\u0022, (int)SKFontStyleWeight.Light, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Yu Gothic UI Semibold\u0022, SKTypeface.FromFamilyName(\u0022Yu Gothic UI\u0022, (int)SKFontStyleWeight.SemiBold, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) },\r\n                        {\u0022Yu Gothic UI Semilight\u0022, SKTypeface.FromFamilyName(\u0022Yu Gothic UI\u0022, (int)350, (int)SKFontStyleWidth.Normal, SKFontStyleSlant.Upright) } };\r\n\u0060\u0060\u0060  \r\nNote that \u00B4raster fonts\u00B4 like \u00B4Courier\u00B4are not supported anymore. Also there is a Fontstyleweight which is not supported with SKFontStyleWeight, which is \u0060SemiLight (350)\u0060. If anyone need the code for parsing old fontnames, just let me know.",
        "createdAt": "2023-08-28T14:05:40",
        "reactions": []
      },
      {
        "id": 2342975483,
        "author": "handerss-spotfire",
        "body": "For future reference, you can solve this problem (on Windows) by combing \u0060SKFontManager.FontFamilies\u0060, \u0060SKFontManager.GetFontStyles\u0060, and reading the [\u0027name\u0027](https://learn.microsoft.com/en-us/typography/opentype/spec/name) and [\u0027STAT\u0027](https://learn.microsoft.com/en-us/typography/opentype/spec/stat) tables via \u0060SKTypeface.TryGetTableData\u0060. An outline to build a font cache with names matching GDI\u002B would be:\r\n\r\n1. Load all available fonts (\u0060SKFontManager.FontFamilies\u0060).\r\n2. For each font, load all available styles (\u0060SKFontManager.GetFontStyles\u0060). This gives you all the necessary axis values to implement the \u0022Regular/Bold/Italic/BoldItalic\u0022 font model.\r\n3. For each font style combo read its \u0027name\u0027 and \u0027STAT\u0027 table and assign the name of that font style combo according to the STAT documentation. You only have to look at weight (eliding bold [700]) and width to match GDI\u002B naming.\r\n4. Construct a cache keyed on the family name. Make the resolved font bold/italic via \u0060SKFontManager.MatchTypeface\u0060.",
        "createdAt": "2024-09-11T08:20:25",
        "reactions": [
          {
            "user": "PeteNelson372",
            "content": "confused",
            "createdAt": "2026-02-06T13:34:43.179952Z"
          }
        ]
      }
    ]
  }
}