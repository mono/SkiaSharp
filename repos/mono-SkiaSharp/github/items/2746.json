{
  "number": 2746,
  "type": "issue",
  "state": "open",
  "title": "[FEATURE] Support UWP for SkiaSharp 3.0",
  "body": "### Is your feature request related to a problem?\n\nI am using UWP and migrating to WinUI3 is not an option (yet)\n\n### Describe the solution you would like\n\nI would like to use SkiaSharp 3.0 on UWP but when attempting to use it, I get the following error:\r\n\u0060\u0060\u0060\r\nNU1202: Package SkiaSharp.Views 3.0.0-preview.1.8 is not compatible with uap10.0.17763 (UAP,Version=v10.0.17763) / win10-x86-aot. Package SkiaSharp.Views 3.0.0-preview.1.8 supports:\r\n  - net462 (.NETFramework,Version=v4.6.2)\r\n  - net7.0-android33.0 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-ios16.1 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-maccatalyst16.1 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-macos13.0 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-tizen7.0 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-tvos16.1 (.NETCoreApp,Version=v7.0)\r\n  - net7.0-windows10.0.19041 (.NETCoreApp,Version=v7.0)\r\n\u0060\u0060\u0060\r\n\r\nAs announced [here](https://github.com/mono/SkiaSharp/blob/main/changelogs/SkiaSharp/3.0.0/SkiaSharp.humanreadable.md), v3.0 should be compartible with .NET Standard 2.0 (which is what UWP is using) so I am not sure if this is a bug\n\n### Describe alternatives you have considered\n\nMigrating to WinUI3 is not an option as it has bad performance, unsatisfying bundle size and various other issues.\r\nI could also just stay on SkaiSharp 2.x, but I\u0027d prefer to use the \u0022latest and greatest\u0022 SkiaSharp version ;)\n\n### Additional context\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "tipa",
    "type": "User"
  },
  "labels": [
    {
      "name": "status/up-for-grabs",
      "color": "B8EC4A"
    },
    {
      "name": "type/feature-request",
      "color": "ededed"
    }
  ],
  "assignees": [],
  "createdAt": "2024-02-07T17:40:22",
  "updatedAt": "2025-11-05T15:22:00",
  "commentCount": 11,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T12:38:54.922726Z",
    "reactions": [
      {
        "user": "charlesroddie",
        "content": "\u002B1",
        "createdAt": "2026-02-06T12:38:54.9227285Z"
      }
    ],
    "comments": [
      {
        "id": 1934371220,
        "author": "mattleibow",
        "body": "I heard echos of the case where win32 dlls now work on UWP - especially so we can build using Clang.\r\n\r\nFor now, you could try copying in the view source from the 2.x branch and see if that works. A bit of work, but if that is the case then maybe we can use the win32 dlls from 3.x and then just have a small uwp dll for the views.",
        "createdAt": "2024-02-08T15:28:50",
        "reactions": []
      },
      {
        "id": 1934378329,
        "author": "mattleibow",
        "body": "I know this is something I have heard from @dotMorten, so I guess I will have to start by reading my old chats and inboxes with all the steps. But, if anyone else has had success, then we might be able to do this easily. I do know the skia codebase is optimized for and supported on Clang. MSVC is a little dodgy in areas as they have slow code paths and sometimes build errors.",
        "createdAt": "2024-02-08T15:32:01",
        "reactions": []
      },
      {
        "id": 1934381058,
        "author": "dotMorten",
        "body": "Correct we no longer build Skia specifically for uwp but use standard win32 dlls in our uwp apps and they still pass app certification",
        "createdAt": "2024-02-08T15:33:27",
        "reactions": []
      },
      {
        "id": 1934384126,
        "author": "mattleibow",
        "body": "I was typing steps, but the replies are too fast. Very good news.",
        "createdAt": "2024-02-08T15:35:01",
        "reactions": [
          {
            "user": "dotMorten",
            "content": "laugh",
            "createdAt": "2026-02-06T12:38:53.137875Z"
          }
        ]
      },
      {
        "id": 1934386973,
        "author": "mattleibow",
        "body": "So, this just means we need to add the UWP TFM back into the views nuget and we might be safe. Not sure the dotnet CLI can do that... Will be annoying to get set up I am sure, but I could probably build a separate project and then manually pack the UWP dlls...",
        "createdAt": "2024-02-08T15:36:21",
        "reactions": []
      },
      {
        "id": 1934393230,
        "author": "dotMorten",
        "body": "You just need to put the native libs in the runtimes/win-xXX/native folder and both net6 and UWP will deploy them correctly. The managed api to call into them will be the same too but you might need a uwp specific build of the .net assembly but that\u0027s easy to do with multi targeting.\r\nOnce done build a uwp app using it and run it through the app certification kit just to make sure there are no cert issues with banned api calls",
        "createdAt": "2024-02-08T15:39:18",
        "reactions": []
      },
      {
        "id": 1934440968,
        "author": "mattleibow",
        "body": "Thanks! ",
        "createdAt": "2024-02-08T16:02:50",
        "reactions": []
      },
      {
        "id": 2344256942,
        "author": "charlesroddie",
        "body": "Does this project become easier if the project is to support the just-announced dotnet9 UWP? https://devblogs.microsoft.com/ifdef-windows/preview-uwp-support-for-dotnet-9-native-aot/",
        "createdAt": "2024-09-11T17:17:40",
        "reactions": []
      },
      {
        "id": 3486671221,
        "author": "charlesroddie",
        "body": "We have been trying to get UWP dotnet9 to work for our app. We haven\u0027t been able to make progress with a SkiaSharp PR because of difficulties getting a successful build of the main branch and complexities of ifdefs and conditional compilation everywhere and lots of variables (like \u0022WINDOWS\u0022) with unclear meaning to us.\n\nSo we have started with getting current SkiaSharp to work in our codebase and then hopefully share some info that would allow a SkiaSharp PR.\n\nWe have got this to work for CPU but not GPU.\n\nFor GPU we get an exception \u0060Failed to create EGL surface\u0060\n\u0060\u0060\u0060\n\t\t\tsurface = Egl.eglCreateWindowSurface(eglDisplay, eglConfig, surfaceCreationProperties.As\u003CIInspectable\u003E().ThisPtr, surfaceAttributes);\n\t\t\tif (surface == Egl.EGL_NO_SURFACE)\n\t\t\t{\n\t\t\t\tthrow new Exception(\u0022Failed to create EGL surface\u0022);\n\t\t\t}\n\u0060\u0060\u0060\n\n~~We don\u0027t know how we can get any diagnostic info about why an EGL surface wasn\u0027t created.~~\n\nWe get EGL_BAD_SURFACE here.",
        "createdAt": "2025-11-04T15:46:13",
        "reactions": []
      },
      {
        "id": 3491478729,
        "author": "mattleibow",
        "body": "Ah, I wonder if this is because you are using the wasdk build of the interop and angle.\n\nI think you may need to rebuild both.\n\nI don\u0027t think we need a new build of SkiaSharp for UWP as now everything is dotnet, but you will need a new views, views interop and angle.\n\nAre you able to get CPU drawing working in UWP? If that works, then maybe try seeing if you can get the interop libraries built. You may have to see if you can copy the WinUI angle build cake and tweak the args to do uwp. ",
        "createdAt": "2025-11-05T14:19:58",
        "reactions": []
      },
      {
        "id": 3491862299,
        "author": "FoggyFinder",
        "body": "\u003E Ah, I wonder if this is because you are using the wasdk build of the interop and angle.\n\nsame result with both \n\n\u0060\u0060\u0060cs\nBuild(arch, \u0022libEGL\u0022, wasdk: false);\n\u0060\u0060\u0060\n\nand\n\n\u0060\u0060\u0060cs\nBuild(arch, \u0022libEGL\u0022, wasdk: true);\n\u0060\u0060\u0060\n\nfor angle.\n\n----\n\nadditional info: \u0060Egl.eglGetError()\u0060 returns \u0060EGL_BAD_SURFACE\u0060",
        "createdAt": "2025-11-05T15:22:00",
        "reactions": []
      }
    ]
  }
}