{
  "number": 2674,
  "type": "issue",
  "state": "closed",
  "title": "Cannot compile native Skia, python3 does not exist.",
  "body": "### Description\r\n\r\nWe use custom skia mods and have an older version of SkiaSharp working with it for quite some time.  We are now trying to update skiasharp and while skiasharp compiles, we cannot get skia to compile.  It keeps coming down to this error:\r\n\r\n\u0060\u0060\u0060\r\nPS C:\\Development\\Examples\\SkiaSharpNew\u003E dotnet cake --target=externals\r\nThe assembly \u0027Cake.Xamarin, Version=3.1.0.0, Culture=neutral, PublicKeyToken=null\u0027\r\nis referencing an older version of Cake.Core (0.33.0).\r\nFor best compatibility it should target Cake.Core version 2.0.0.\r\nThe assembly \u0027Cake.XCode, Version=5.0.0.0, Culture=neutral, PublicKeyToken=null\u0027\r\nis referencing an older version of Cake.Core (1.0.0).\r\nFor best compatibility it should target Cake.Core version 2.0.0.\r\nThe assembly \u0027Cake.FileHelpers, Version=4.0.1.0, Culture=neutral, PublicKeyToken=null\u0027\r\nis referencing an older version of Cake.Core (1.0.0).\r\nFor best compatibility it should target Cake.Core version 2.0.0.\r\nThe assembly \u0027Cake.Json, Version=6.0.1.0, Culture=neutral, PublicKeyToken=null\u0027\r\nis referencing an older version of Cake.Core (1.0.0).\r\nFor best compatibility it should target Cake.Core version 2.0.0.\r\nArguments:\r\n    target                         externals\r\nSource Control:\r\n    PREVIEW_LABEL                  preview\r\n    FEATURE_NAME\r\n    BUILD_NUMBER                   0\r\n    GIT_SHA\r\n    GIT_BRANCH_NAME\r\n    GIT_URL\r\n\r\n========================================\r\nexternals-android\r\n========================================\r\nArguments:\r\n    target                         Default\r\n\r\n========================================\r\ngit-sync-deps\r\n========================================\r\nAn error occurred when executing task \u0027git-sync-deps\u0027.\r\nError: An error occurred trying to start process \u0027\u0022python3\u0022\u0027 with working directory \u0027C:/Development/Examples/SkiaSharpNew/externals/skia\u0027. The system cannot find the file specified.\r\nAn error occurred when executing task \u0027externals-android\u0027.\r\nError: .NET CLI: Process returned an error (exit code 1).\r\n\u0060\u0060\u0060\r\n\r\n### Code\r\n\r\nNo code, this is compile time error.\r\n\r\n### Expected Behavior\r\n\r\nExpected a build.\r\n\r\n### Actual Behavior\r\n\r\nBuild fails.\r\n\r\n### Version of SkiaSharp\r\n\r\n2.88.3 (Current)\r\n\r\n### Last Known Good Version of SkiaSharp\r\n\r\n2.88.2 (Previous)\r\n\r\n### IDE / Editor\r\n\r\nVisual Studio (Windows)\r\n\r\n### Platform / Operating System\r\n\r\nWindows\r\n\r\n### Platform / Operating System Version\r\n\r\nVisual Studio 2022 17.8.0, Windows 11 x64\r\n\r\n### Devices\r\n\r\nPC\r\n\r\n### Relevant Screenshots\r\n\r\n![image](https://github.com/mono/SkiaSharp/assets/13279060/ef2a67cd-217f-4db3-9042-88e122473340)\r\n\r\n\r\n### Relevant Log Output\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "BradChase2011",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "status/needs-info",
      "color": "B8EC4A"
    },
    {
      "name": "status/no-recent-activity",
      "color": "B8EC4A"
    }
  ],
  "assignees": [],
  "createdAt": "2023-11-18T03:09:58",
  "updatedAt": "2024-02-16T02:00:21",
  "closedAt": "2024-02-16T02:00:21",
  "commentCount": 6,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T12:57:17.0204962Z",
    "reactions": [],
    "comments": [
      {
        "id": 1817364871,
        "author": "BradChase2011",
        "body": "I got a little further, apparently I had to set the environment variable (PYTHON_EXE) for the python exe instead of just the path variable.  I updated dependencies again, and after that I was missing choco and ninja.\r\n\r\nI am wondering if the install docs need updated?  They are the same as when we first built our own libraries and they are MUCH different now.  But good news is, I am compiling now, so I guess this can be closed.",
        "createdAt": "2023-11-18T04:09:58",
        "reactions": []
      },
      {
        "id": 1817366856,
        "author": "BradChase2011",
        "body": "Compiling after setting the PYTHON_EXE environment variable to the actual exe instead of only the path.",
        "createdAt": "2023-11-18T04:18:56",
        "reactions": []
      },
      {
        "id": 1817383278,
        "author": "BradChase2011",
        "body": "I jumped the gun, externals-windows works but android does not.  I can get it to compile by copying the python executable to python3.exe but I am sure thats the wrong route.  The script is running cmd.exe which doesnt have the variable is my suspicion.  python3 error again:\r\n\u0060\u0060\u0060\r\n========================================\r\nlibSkiaSharp\r\n========================================\r\nDone. Made 113 targets from 55 files in 234ms\r\n                                             ninja: Entering directory \u0060out/android/x86\u0027\r\n[907/1395] link libskcms.a\r\nFAILED: libskcms.a\r\ncmd.exe /c  python3 \u0022C:/Development/Examples/SkiaSharpNew/externals/skia/gn/rm.py\u0022 \u0022libskcms.a\u0022 \u0026\u0026 C:/Development/Android/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/llvm-ar.exe rcs libskcms.a @libskcms.a.rsp\r\n\u0027python3\u0027 is not recognized as an internal or external command,\r\noperable program or batch file.\r\n[932/1395] compile ../../../modules/skottie/src/effects/SphereEffect.cpp\r\nninja: build stopped: subcommand failed.\r\nAn error occurred when executing task \u0027libSkiaSharp\u0027.\r\nError: Process \u0027C:/Program Files/Python312/Python.exe\u0027 failed with error: 1\r\nAn error occurred when executing task \u0027externals-android\u0027.\r\nError: .NET CLI: Process returned an error (exit code 1).\r\n\u0060\u0060\u0060",
        "createdAt": "2023-11-18T05:05:42",
        "reactions": []
      },
      {
        "id": 1935087427,
        "author": "mattleibow",
        "body": "Do you have python3 installed into the PATH variable?",
        "createdAt": "2024-02-08T23:23:25",
        "reactions": []
      },
      {
        "id": 1935160407,
        "author": "BradChase2011",
        "body": "\u003E Do you have python3 installed into the PATH variable?\r\n\r\nYea sorry its been awhile since I looked at this but we are fully compiling now.  The issue I think that needs resolved is an update to the docs as they appear really outdated.  We saved a list in a \u0022How To\u0022 so we can just keep coming back to that as its hard to remember the entire list when you only re compile every so often on updates.  We have a full list of packages and programs to install and then a build list of environment variables to set as well as what not to install (Tizen) and what to skip (Tizen).  Tizen has some install issues right now in VS and windows that basically kills any other development on mobile including android.  They are aware of the issue but arent willing to fix it (we used to restore backups on a build machine after builds where Tizen wasnt installed).  We dont target Tizen anyways, and really just need the info in the build list.\r\n\r\nSo again, I think its just the build docs need updated with everything needed like LLVM, choco, Python, Ninja, Tizen, Node.js, on and on...  As well as all the environment settings to build each time, for us for some reason we have to tell it where everything is like \u0027PYTHON_EXE\u0027, \u0027LLVM_HOME\u0027, \u0027ANDROID_NDK_HOME\u0027, as well as adding nodejs and Python312 paths.\r\n\r\n",
        "createdAt": "2024-02-09T00:50:18",
        "reactions": []
      },
      {
        "id": 1939974783,
        "author": "ghost",
        "body": "This issue has been automatically marked as stale because it has been marked as requiring author feedback but has not had any activity for **4 days**. It will be closed if no further activity occurs **within 3 days of this comment**. If it *is* closed, feel free to comment when you are able to provide the additional information and we will re-investigate.",
        "createdAt": "2024-02-13T01:00:28",
        "reactions": []
      }
    ]
  }
}