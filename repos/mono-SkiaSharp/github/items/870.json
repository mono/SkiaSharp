{
  "number": 870,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] App can crash due to trying to set SKCanvasView EnableTouchEvents to false",
  "body": "**Description**\r\n\r\nTesters for our apps are experiencing crashes which seem to be caused by setting an instance of a \u0060SKCanvasView.EnabledTouchEvents = true\u0060.\r\n\r\nUnfortunately this happens in a rather complex app and I cannot share the app or source related to the app for reproduction, but I will provide as much information as I can to help solve the problem.\r\n\r\n**Code**\r\n\r\nIn our case we have a page which has a view with the following snippet:\r\n\r\n\u0060\u0060\u0060\r\npublic class MyView : SKCanvasView\r\n{\r\n    public MyView()\r\n    {\r\n        ....\r\n\r\n        PaintSurface \u002B= HandlePaintSurface;\r\n        SizeChanged \u002B= HandleSizeChanged;\r\n\r\n        EnableTouchEvents = true; // \u003C- This is the critical line of code\r\n        Touch \u002B= HandleTouch;\r\n        \r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\nFor testing, our testers navigate in and out and in and out of this page multiple times, sometimes 7 times or more. The app will not crash until going to a different page - possibly when a GC occurs?\r\n\r\nIf we instead change the assignment to EnableTouchEvents to false, testers cannot reproduce this crash:\r\n\r\n\u0060\u0060\u0060\r\n  ...\r\n  EnableTouchEvents = false;\r\n  ..\r\n\u0060\u0060\u0060\r\nNote that testers have not been able to reproduce this with a debugger attached, only with a deployed build, disconnected from Visual Studio. I don\u0027t know if that\u0027s relevant here.\r\n\r\n**Expected Behavior**\r\n\r\nThe underling code should properly be able to set EnabledTouchEvent (or whatever platform-specific equivalent exists) without crashing.\r\n\r\n**Actual Behavior**\r\n\r\nGiven enough back and forth navigation, the application will crash.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  1.68.0\r\n- Last known good version:  Unknown, this is a new page in our app that was added after we upgraded to 1.68.0.\r\n- IDE:  Visual Studio on Windows 10\r\n- Platform Target Frameworks: \r\n  - Android: Android 8.1 (API Level 27 - Oreo)\r\n- Target Devices:  \r\n  - Nexus 5X\r\n  - Emulator (Android 8.1.0)\r\n  - Pixel (Android 9.0 - this is the original pixel)\r\n\r\n**Screenshots**\r\n\r\n**Reproduction Link**\r\n\r\n**Additional Information**\r\n\r\nThe following information is provided by AppCenter:\r\n\r\nSKTouchHandler.SetEnabled (Android.Views.View view, System.Boolean enableTouchEvents)\r\nSystem.ObjectDisposedException: Cannot access a disposed object. Object name: \u0027SkiaSharp.Views.Android.SKCanvasView\u0027.\r\n\r\nCallstack:\r\n\r\n\u0060\u0060\u0060\r\nJniPeerMembers.AssertSelf (Java.Interop.IJavaPeerable self)\r\nJniPeerMembers\u002BJniInstanceMethods.InvokeVirtualVoidMethod (System.String encodedMember, Java.Interop.IJavaPeerable self, Java.Interop.JniArgumentValue* parameters)\r\nView.SetOnTouchListener (Android.Views.View\u002BIOnTouchListener l)\r\nView\u002B\u003C\u003Ec__DisplayClass2576_0.\u003Cremove_Touch\u003Eb__0 (Android.Views.View\u002BIOnTouchListener __v)\r\nEventHelper.RemoveEventHandler[TInterface,TImplementor] (System.WeakReference\u0026 implementor, System.Func\u00602[T,TResult] empty, System.Action\u00601[T] unsetListener, System.Action\u00601[T] remove)\r\nView.remove_Touch (System.EventHandler\u00601[TEventArgs] value)\r\nSKTouchHandler.SetEnabled (Android.Views.View view, System.Boolean enableTouchEvents)\r\nSKTouchHandler.Detach (Android.Views.View view)\r\nSKCanvasViewRendererBase\u00602[TFormsView,TNativeView].Dispose (System.Boolean disposing)\r\nObject.Finalize ()\r\n\u0060\u0060\u0060",
  "author": {
    "login": "vchelaru",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2019-06-20T21:36:56",
  "updatedAt": "2022-08-19T12:01:17",
  "closedAt": "2020-04-26T06:22:44",
  "commentCount": 4,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T14:07:43.3114148Z",
    "reactions": [
      {
        "user": "ValonK",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:07:43.3114221Z"
      }
    ],
    "comments": [
      {
        "id": 504216211,
        "author": "vchelaru",
        "body": "**Workaround**\r\n\r\nI found that a workaround! The page that contains the SKCanvasView can enable/disable touch events:\r\n\r\n\u0060\u0060\u0060\r\nprotected override void OnAppearing()\r\n{\r\n    base.OnAppearing();\r\n    view.EnableTouchEvents = true;\r\n}\r\n\r\nprotected override void OnDisappearing()\r\n{\r\n    view.EnableTouchEvents = false;\r\n    base.OnDisappearing();\r\n}\r\n\u0060\u0060\u0060\r\n\r\nMaybe this will help others who run into this problem until a proper fix is put in place.",
        "createdAt": "2019-06-20T22:03:33",
        "reactions": [
          {
            "user": "josephmesteban",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:07:42.7033295Z"
          },
          {
            "user": "EmilAlipiev",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:07:42.70333Z"
          }
        ]
      },
      {
        "id": 619491185,
        "author": "mattleibow",
        "body": "This should no longer be happening due to dispose keeping a reference to the control during execution.",
        "createdAt": "2020-04-26T06:22:44",
        "reactions": []
      },
      {
        "id": 987231960,
        "author": "vchelaru",
        "body": "Unfortunately I have been able to reproduce this again:\r\n\r\n\u0060\u0060\u0060\r\n[mono-rt] [ERROR] FATAL UNHANDLED EXCEPTION: System.ObjectDisposedException: Cannot access a disposed object.\r\n[mono-rt] Object name: \u0027SkiaSharp.Views.Android.SKCanvasView\u0027.\r\n[mono-rt]   at Java.Interop.JniPeerMembers.AssertSelf (Java.Interop.IJavaPeerable self) [0x00029] in \u003Cbd6bd528a8784b7caf03e9f25c9f0d7b\u003E:0 \r\n[mono-rt]   at Java.Interop.JniPeerMembers\u002BJniInstanceMethods.InvokeVirtualVoidMethod (System.String encodedMember, Java.Interop.IJavaPeerable self, Java.Interop.JniArgumentValue* parameters) [0x00000] in \u003Cbd6bd528a8784b7caf03e9f25c9f0d7b\u003E:0 \r\n[mono-rt]   at Android.Views.View.SetOnTouchListener (Android.Views.View\u002BIOnTouchListener l) [0x0002c] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/obj/Release/monoandroid10/android-30/mcw/Android.Views.View.cs:23279 \r\n[mono-rt]   at Android.Views.View\u002B\u003C\u003Ec__DisplayClass2854_0.\u003Cremove_Touch\u003Eb__0 (Android.Views.View\u002BIOnTouchListener __v) [0x00000] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/obj/Release/monoandroid10/android-30/mcw/Android.Views.View.cs:24822 \r\n[mono-rt]   at Java.Interop.EventHelper.RemoveEventHandler[TInterface,TImplementor] (System.WeakReference\u0026 implementor, System.Func\u00602[T,TResult] empty, System.Action\u00601[T] unsetListener, System.Action\u00601[T] remove) [0x00032] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/Java.Interop/EventHelper.cs:35 \r\n[mono-rt]   at Android.Views.View.remove_Touch (System.EventHandler\u00601[TEventArgs] value) [0x00014] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/obj/Release/monoandroid10/android-30/mcw/Android.Views.View.cs:24819 \r\n[mono-rt]   at SkiaSharp.Views.Forms.SKTouchHandler.SetEnabled (Android.Views.View view, System.Boolean enableTouchEvents) [0x00003] in \u003C70db931b20b148d097dc1e71a7f1cc73\u003E:0 \r\n[mono-rt]   at SkiaSharp.Views.Forms.SKTouchHandler.Detach (Android.Views.View view) [0x00000] in \u003C70db931b20b148d097dc1e71a7f1cc73\u003E:0 \r\n[mono-rt]   at SkiaSharp.Views.Forms.SKCanvasViewRendererBase\u00602[TFormsView,TNativeView].Dispose (System.Boolean disposing) [0x00059] in \u003C70db931b20b148d097dc1e71a7f1cc73\u003E:0 \r\n[mono-rt]   at Java.Lang.Object.Java.Interop.IJavaPeerable.Finalized () [0x00000] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/Java.Lang/Object.cs:183 \r\n[mono-rt]   at Android.Runtime.AndroidValueManager.FinalizePeer (Java.Interop.IJavaPeerable value) [0x00068] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/Android.Runtime/AndroidRuntime.cs:675 \r\n[mono-rt]   at Java.Lang.Object.Finalize () [0x00010] in /Users/builder/azdo/_work/1/s/xamarin-android/src/Mono.Android/Java.Lang/Object.cs:65 \r\n\u0060\u0060\u0060\r\n\r\nThis time I am using:\r\n\r\nSkia Sharp 2.80.3\r\nXamarin Forms 5.0.0.2244\r\nSkiaSharp.Views 2.80.3\r\nSkiaSharp.Views.Forms 2.80.3\r\n\r\n",
        "createdAt": "2021-12-06T21:22:21",
        "reactions": []
      },
      {
        "id": 1173244950,
        "author": "MaximMikhisor",
        "body": "\u003E This should no longer be happening due to dispose keeping a reference to the control during execution.\r\n\r\nIn what version was it fix?\r\n\r\nWe also still gettting this error.\r\nWe are using Skia Sharp 2.80.2\r\n",
        "createdAt": "2022-07-04T01:38:17",
        "reactions": []
      }
    ]
  }
}