{
  "number": 1001,
  "type": "issue",
  "state": "open",
  "title": "[BUG] Unable to load DLL \u0027libSkiaSharp\u0027 or one of its dependencies on Azure Functions ",
  "body": "**Description**\r\n\r\nI have an AzureFunctions application that is using .netcoreapp3.0 and the v3-preview. It runs perfectly fine locally but when I deploy it to Azure I get the following error as soon as I use Skia:\r\n\r\nException while executing function: \u003C--- The type initializer for \u0027SkiaSharp.SKAbstractManagedStream\u0027 threw an exception. \u003C--- Unable to load DLL \u0027libSkiaSharp\u0027 or one of its dependencies: The specified module could not be found. (0x8007007E)\r\n\r\nThe only difference I\u0027ve noticed from locally and deployed is locally the runtimes folder which contains libSkiaSharp.dll is within the bin and deployed on Azure it\u0027s on the same file level as bin.\r\n\r\nThe files/folders on the functions app are restricted access so I can\u0027t manually upload the runtimes folder into the bin to see if that helps.\r\n\r\nThoughts?\r\n\r\n**Code**\r\n\r\n\u003C!-- a snippet of code that demonstrates the issue --\u003E\r\n\r\n**Expected Behavior**\r\n\r\n\u003C!-- a general description of what was the expected behavior or result --\u003E\r\n\r\n**Actual Behavior**\r\n\r\n\u003C!-- a general description of what really happened --\u003E\r\n\r\n**Basic Information**\r\n\r\n- Version with issue: 1.68.0\r\n- Last known good version:  \u003C!-- the version of SkiaSharp that still working --\u003E\r\n- IDE:  \u003C!-- Visual Studio / Visual Studio for Mac / MonoDevelop / Visual Studio Code --\u003E\r\n- Platform Target Frameworks: .Net Core 3.0\r\n  - Android: \u003C!-- the version of the Android SDK you are compiling against, e.g. 7.1 --\u003E \r\n  - iOS:  \u003C!-- the version of the iOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Linux:  \u003C!-- The version and distro of linux that you are building for, e.g. Ubuntu 16.04 --\u003E\r\n  - macOS:  \u003C!-- The version of macOS you are building for, e.g. 10.10 --\u003E\r\n  - Tizen:  \u003C!-- the version of the Tizen SDK you are compiling against, e.g. 4.0 --\u003E \r\n  - tvOS:  \u003C!-- the version of the tvOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - UWP:  \u003C!-- the version of the UWP SDK you are compiling against, e.g. 16299 --\u003E \r\n  - watchOS:  \u003C!-- the version of the watchOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Windows Classic:  \u003C!-- the version of Windows you are building for, e.g. Windows 7 --\u003E\r\n- Target Devices:   \u003C!-- the devices that you noticed this on, e.g. iPhone X --\u003E\r\n  - \u003C!-- any --\u003E\r\n\r\n**Screenshots**\r\n\r\n\u003C!-- if the issue is a visual issue, please include screenshots showing the problem if possible --\u003E\r\n\r\n**Reproduction Link**\r\n\r\n\u003C!-- please upload or provide a link to a reproduction case --\u003E\r\n",
  "author": {
    "login": "VividDigital",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2019-11-06T21:38:30",
  "updatedAt": "2022-06-14T15:25:55",
  "commentCount": 3,
  "reactionCount": 2,
  "engagement": {
    "syncedAt": "2026-02-06T14:20:56.0112054Z",
    "reactions": [
      {
        "user": "jsgoupil",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:20:56.0112131Z"
      },
      {
        "user": "srinathck",
        "content": "\u002B1",
        "createdAt": "2026-02-06T14:20:56.011214Z"
      }
    ],
    "comments": [
      {
        "id": 555762633,
        "author": "AlexeiScherbakov",
        "body": "I have same issue in .netcoreapp3.0 service on docker",
        "createdAt": "2019-11-19T23:24:29",
        "reactions": []
      },
      {
        "id": 555852557,
        "author": "mattleibow",
        "body": "I had a look at this and it is a tad annoying, but it appears that Azure Functions are not quite perfect in the way things work. Looks like the runtime does not load the native files like other .net core apps and websites.\r\n\r\nBut, this is not to say that we can\u0027t do anything about it. As part of the publish step, we can hook in there and manually copy the files we know we will need. For example, we know we are going to need the native \u0060libSkiaSharp.dll\u0060, so we can copy it in a custom target in the .csproj.\r\n\r\n\u0060\u0060\u0060xml\r\n\u003CTarget Name=\u0022CopyRequiredNativeAssets\u0022 AfterTargets=\u0022_FunctionsPostPublish\u0022\u003E\r\n  \u003CItemGroup\u003E\r\n    \u003CNativeAssetToCopy Include=\u0022$(PublishDir)runtimes\\win-x86\\native\\libSkiaSharp.dll\u0022 /\u003E\r\n  \u003C/ItemGroup\u003E\r\n  \u003CCopy SourceFiles=\u0022@(NativeAssetToCopy)\u0022 DestinationFolder=\u0022$(PublishDir)bin\u0022 /\u003E\r\n\u003C/Target\u003E\r\n\u0060\u0060\u0060\r\n\r\nI think this is a missing feature on the functions side, so I added a comment on an open issue there. Not sure what will happen, but we can try: https://github.com/Azure/Azure-Functions/issues/622#issuecomment-555850877 Maybe drop a vote?\r\n\r\nI did notice that the runtime seems to be 32-bit on the cloud, we we have to use that one there.\r\n\r\nI have created a test repo (https://github.com/mattleibow/SkiaSharpFunctions) and have something hosted for your viewing pleasure (https://skiasharpfunctions.azurewebsites.net/api/images)",
        "createdAt": "2019-11-20T06:01:01",
        "reactions": [
          {
            "user": "daltonks",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:20:55.7697765Z"
          },
          {
            "user": "rachelblasucci",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:20:55.7697769Z"
          },
          {
            "user": "mslot",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:20:55.769777Z"
          },
          {
            "user": "srinathck",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:20:55.7697771Z"
          }
        ]
      },
      {
        "id": 1155349953,
        "author": "BenjaminMichaelis",
        "body": "I commented my fix here on [#622](https://github.com/Azure/Azure-Functions/issues/622) with this comment https://github.com/Azure/Azure-Functions/issues/622#issuecomment-1155320104",
        "createdAt": "2022-06-14T15:24:38",
        "reactions": []
      }
    ]
  }
}