{
  "number": 672,
  "type": "issue",
  "state": "closed",
  "title": "ASP,NET Core 2.1: throws exception System.DllNotFoundException: Unable to load DLL \u0027libSkiaSharp\u0027 or one of its dependencies: Access is denied.",
  "body": "### Description\r\n\r\nWhen loading image it throws an error:\r\n\r\n{System.TypeInitializationException: The type initializer for \u0027SkiaSharp.SKAbstractManagedStream\u0027 threw an exception. ---\u003E System.DllNotFoundException: Unable to load DLL \u0027libSkiaSharp\u0027 or one of its dependencies: Access is denied.\r\n\r\nIf I run it in console application, it works and I see that there is an libSkiaSharp.dll in the bin folder while\r\nit is missing in bin folder of ASP.NET MVC project\r\n### Code\r\n\r\nstring inputPath = @\u0022C:\\pexels-photo-248797.jpeg\u0022;\r\n                            const int size = 150;\r\n                            const int quality = 75;\r\n\r\n                            using (var input = File.OpenRead(inputPath))\r\n                            {\r\n                                using (var inputStream = new SKManagedStream(input)) // This throws the error\r\n                                {\r\n",
  "author": {
    "login": "eddyuk",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/question",
      "color": "daffa8"
    }
  ],
  "assignees": [],
  "createdAt": "2018-11-04T10:12:53",
  "updatedAt": "2022-08-19T12:02:52",
  "closedAt": "2018-11-04T13:48:57",
  "commentCount": 4,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T14:04:54.8407384Z",
    "reactions": [],
    "comments": [
      {
        "id": 435671221,
        "author": "eddyuk",
        "body": "Ok, I found the problem. Since I was using IIS, needed to grant permissions to library folder",
        "createdAt": "2018-11-04T13:48:57",
        "reactions": []
      },
      {
        "id": 435696231,
        "author": "mattleibow",
        "body": "Great to see that you resolved it! Let us know if you have any other issues!",
        "createdAt": "2018-11-04T19:02:25",
        "reactions": []
      },
      {
        "id": 435840987,
        "author": "neodynamic",
        "body": "@eddyuk may you tell us how and where to grant such permissions? thanks",
        "createdAt": "2018-11-05T11:22:50",
        "reactions": []
      },
      {
        "id": 435844539,
        "author": "eddyuk",
        "body": "\u003E @eddyuk may you tell us how and where to grant such permissions? thanks\r\n\r\nI followed [this article](https://docs.microsoft.com/en-us/iis/manage/configuring-security/application-pool-identities) to grand permissions to the web site folder. Note: if you using IIS in development (not Kestrel) and used nuget to retrieve the library, you need to do the same to packages folder.",
        "createdAt": "2018-11-05T11:36:26",
        "reactions": []
      }
    ]
  }
}