{
  "number": 460,
  "type": "issue",
  "state": "closed",
  "title": "SKGLView crashes in Android ",
  "body": "This can be reproduced with any app using the latest SKGLView (SkiaSharp.Views.Forms 1.60.0), even the [SkiaSharp Xamarin.Forms sample](https://github.com/mono/SkiaSharp/tree/master/samples/Gallery/Xamarin.Forms) app. With the previous version (SkiaSharp.Views.Forms 1.59.3 and Xamarin.Forms 2.4.0) the app works fine, so this bug was likely introduced in 1.60.0.\r\n\r\n**Reproduction steps**\r\n1. Start the Xamarin.Forms SkiaSharpSample app in Android.\r\n2. Select OpenGL from settings.\r\n3. Tap Android overview button (square icon).\r\n4. Return back to the app. SKGLView remains empty.\r\n5. Swipe the SKGLView. And the app crashes in a System.NullReferenceException.\r\n\r\n**Tested with**\r\nSkiaSharp v1.60.0\r\nXamarin.Forms v2.5.0.77107 and v2.5.0.280555\r\nAndroid App targeting : Android 8.0 (Oreo)",
  "author": {
    "login": "pragmatheorist",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "area/SkiaSharp.Views",
      "color": "0052cc"
    },
    {
      "name": "area/SkiaSharp.Views.Forms",
      "color": "0052cc"
    }
  ],
  "assignees": [],
  "milestone": "1.60.1",
  "createdAt": "2018-03-02T08:22:11",
  "updatedAt": "2022-08-19T18:01:24",
  "closedAt": "2018-05-04T16:32:38",
  "commentCount": 4,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T14:01:42.7217029Z",
    "reactions": [],
    "comments": [
      {
        "id": 370689365,
        "author": "mattleibow",
        "body": "Thanks for reporting this. It very well might be something in the new view. We switched from a GLSurfaceView under the hood, to a TextureView.\r\n\r\nI will have a look.",
        "createdAt": "2018-03-06T07:31:37",
        "reactions": []
      },
      {
        "id": 371989711,
        "author": "hallidev",
        "body": "I\u0027ll second this one. Just found this thread after starting to pull my hair out. Same steps to re-create as @pragmatheorist details.",
        "createdAt": "2018-03-10T01:18:27",
        "reactions": []
      },
      {
        "id": 376387000,
        "author": "EEVblog",
        "body": "I believe I have the same issue. The issue occurs when an activity is started then closed or the window is resumed. this issue has made it impossible to save files, or switch between apps on the phone without the view crashing and throwing a null reference exception.\r\n\r\nThe issue does not occur when using the software renderer.\r\n\r\nTested With Android 6.XX\r\nSkiasharp 1.60.0",
        "createdAt": "2018-03-27T03:41:25",
        "reactions": []
      },
      {
        "id": 386623300,
        "author": "mattleibow",
        "body": "I managed to find out what was happening. When the app is paused, the texture is destroyed. This is all good so far. However, when the app resumed, the texture is re-created under the hood and thus follows another path - and this is where I was missing logic to recreate the SkiaSharp context.",
        "createdAt": "2018-05-04T14:42:22",
        "reactions": []
      }
    ]
  }
}