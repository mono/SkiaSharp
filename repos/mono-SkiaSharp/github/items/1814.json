{
  "number": 1814,
  "type": "issue",
  "state": "open",
  "title": "[BUG] Pen Pressure always 1",
  "body": "**Description**\r\n\r\nI creating a vector drawing app, and while testing on my MS Surface I cannot get the pen pressure to work at all.\r\n\r\n**Code**\r\n\r\nI use the \u0060Touch\u0060 Event of \u0060SKCanvasView\u0060 \r\n\r\n\u0060\u0060\u0060csharp\r\n\r\nprivate void OnTouch(object sender, SKTouchEventArgs args)\r\n{\r\n    var penIsUsed = args.DeviceType == SKTouchDeviceType.Pen;\r\n    float pressure = 10;\r\n    \r\n    if (penIsUsed)\r\n    {\r\n        pressure = args.Pressure * 10;\r\n    }\r\n[...]\r\n\u0060\u0060\u0060\r\n**Expected Behavior**\r\n\r\nThe pressure varies between 0 and 1\r\n\r\n**Actual Behavior**\r\n\r\nThe pressure is always at 1 even when an actual pen is used and even recognised as \u0060SKTouchDeviceType.Pen\u0060\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  2.80.3\r\n- Last known good version:  none\r\n- IDE:  Visual Studio\r\n\r\n- Platform Target Frameworks:\r\n  - UWP:  19041\r\n  \r\n- Target Devices:\r\n  - Windows Tablets and PCs with Tablets \r\n  - Android\r\n  - iOS\r\n\r\n**Screenshots**\r\n\r\nFirst I draw in PaintToolSai2 to prove that pressure works, then in my App which should react to pressure, but doesn\u0027t.\r\n\r\n![pen](https://user-images.githubusercontent.com/5176531/134356865-b2a0f4f5-6f84-412e-a97a-7e95a87bad4f.gif)\r\n\r\n\r\n**Reproduction Link**\r\n\r\n\u0060\u0060\u0060xaml\r\n\u003Cskia:SKCanvasView x:Name=\u0022canvasView\u0022\r\n     PaintSurface=\u0022OnCanvasViewPaintSurface\u0022 \r\n     EnableTouchEvents=\u0022True\u0022\r\n     Touch=\u0022OnTouch\u0022\r\n\u0060\u0060\u0060\r\n\r\nwith\r\n\r\n\u0060\u0060\u0060csharp\r\nprivate void OnTouch(object sender, SKTouchEventArgs args)\r\n{\r\n    var penIsUsed = args.DeviceType == SKTouchDeviceType.Pen;\r\n    float pressure = 10;\r\n  \r\n    if (penIsUsed)\r\n    {\r\n        pressure = args.Pressure * 10;\r\n    }\r\n[...]\r\n    args.Handled = true;\r\n}\r\n\u0060\u0060\u0060\r\n",
  "author": {
    "login": "hrkrx",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2021-09-22T13:56:59",
  "updatedAt": "2025-12-09T21:20:22",
  "commentCount": 5,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:22:12.5475378Z",
    "reactions": [],
    "comments": [
      {
        "id": 925745614,
        "author": "hrkrx",
        "body": "I am still Investigating, but with WinAPI I got a usable result\r\n\r\nAlso nice to know: The event ID is the same as the underlying pointer event message ID, so it can just be passed through\r\n\u0060\u0060\u0060csharp\r\n[StructLayout(LayoutKind.Sequential)]\r\npublic struct POINT\r\n{\r\n    public int X;\r\n    public int Y;\r\n}\r\n\r\npublic enum POINTER_INPUT_TYPE\r\n{\r\n    PT_POINTER = 0x00000001,   //generic pointer type, this never appears in pointer messages or pointer data\r\n    PT_TOUCH = 0x00000002,   //Touch pointer type\r\n    PT_PEN = 0x00000003,   //Pen pointer type\r\n    PT_MOUSE = 0x00000004    //Mouse pointer type\r\n}\r\n\r\n[StructLayout(LayoutKind.Sequential)]\r\npublic struct POINTER_INFO\r\n{\r\n    public POINTER_INPUT_TYPE pointerType;\r\n    public UInt32 pointerID;\r\n    public UInt32 frameID;\r\n    public UInt32 pointerFlags;//Pointer flags\r\n    public IntPtr sourceDevice; //handle\r\n    public IntPtr hwndTarget; //hwnd\r\n    public POINT ptPixelLocation;       //The predicted screen coordinates of the pointer, in pixels. \r\n    public POINT ptHimetricLocation;    //The predicted screen coordinates of the pointer, in HIMETRIC units. \r\n    public POINT ptPixelLocationRaw;    //The screen coordinates of the pointer, in pixels. For adjusted screen coordinates, see ptPixelLocation.\r\n    public POINT ptHimetricLocationRaw; //The screen coordinates of the pointer, in HIMETRIC units. For adjusted screen coordinates, see ptHimetricLocation.\r\n    public UInt32 dwTime;               //A message time stamp assigned by the system when this input was received.\r\n    public UInt32 historyCount;\r\n    public Int32 inputData;\r\n    public UInt32 dwKeyStates;\r\n    public UInt64 PerformanceCount;\r\n    public UInt32 ButtonChangeType;     //POINTER_BUTTON_CHANGE_TYPE\r\n}\r\n\r\n[StructLayout(LayoutKind.Sequential)]\r\npublic struct POINTER_PEN_INFO \r\n{\r\n    public POINTER_INFO pointerInfo;\r\n    public UInt32 penFlags;\r\n    public UInt32 penMask;\r\n    public UInt32 pressure;\r\n    public UInt32 rotation;\r\n    public Int32 tiltX;\r\n    public Int32 tiltY;\r\n}\r\n\r\n\r\npublic class PointerPressureService : IPointerPressureService\r\n{\r\n\r\n    [DllImport(\u0022user32.dll\u0022, CharSet = CharSet.Auto)]\r\n    unsafe extern static bool GetPointerPenInfo(UInt32 pointerId, [In, Out] ref POINTER_PEN_INFO penInfo);\r\n\r\n    [DllImport(\u0022kernel32.dll\u0022)]\r\n    static extern uint GetLastError();\r\n\r\n    public unsafe float GetPressure(uint pointerId)\r\n    {\r\n        POINTER_PEN_INFO ppPointer = new POINTER_PEN_INFO();\r\n        var success = GetPointerPenInfo(pointerId, ref ppPointer);\r\n\r\n        if (!success)\r\n        {\r\n            var error = GetLastError();\r\n            return 1;\r\n        }\r\n\r\n        return ppPointer.pressure / 1024f; // pressure returns actual pressure levels from 0 to 1024 or whatever your pen is capable of \r\n    }\r\n}\r\n\u0060\u0060\u0060",
        "createdAt": "2021-09-23T12:02:06",
        "reactions": []
      },
      {
        "id": 925756549,
        "author": "hrkrx",
        "body": "![pen](https://user-images.githubusercontent.com/5176531/134505105-595e3d17-8b4f-45ef-b574-ffbb67ac08da.gif)\r\n\r\nSadly with this method the preformance ~~far away from optimal~~ is with a bit of optimization not so bad.",
        "createdAt": "2021-09-23T12:17:32",
        "reactions": []
      },
      {
        "id": 1030737071,
        "author": "hrkrx",
        "body": "I got myself an iPad with an Apple Pen. And I have to say this also does not work. I will share my solution to this once I get it working, but I am not impressed with how little the pressure/pen stuff works \r\n\r\nEDIT:\r\nAfter going through the source, I saw, that pressure is not even used in the iOS implementation, so it never gets even set.\r\nBut it is used in the MAUI variant so I assume this bug will never get fixed\r\n\r\nanyway it should be easy fixable if one edits the SKTouchHandler and includes the force of the touch as pressure",
        "createdAt": "2022-02-06T02:19:52",
        "reactions": [
          {
            "user": "FoggyFinder",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:22:12.0680604Z"
          },
          {
            "user": "timskillman",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:22:12.0680609Z"
          }
        ]
      },
      {
        "id": 1320978648,
        "author": "timskillman",
        "body": "I would love to see this bug fixed also! I bought a surface pro to develop a sketching app for kids using .NET MAUI - finding this issue in its current state was a little disheartening :(\r\n",
        "createdAt": "2022-11-19T22:01:50",
        "reactions": []
      },
      {
        "id": 3634327378,
        "author": "mihaigonciar",
        "body": "Putting together a cross-platform app using MAUI, .NET 10 and SkiaSharp .\nPressure works as intended on my Android device (Samsung Fold 5 with S Pen Fold Edition).\nPressure does not work at all in Windows using a Wacom tablet (tested against other apps to make sure pressure works).\nAttached image shows the graphic tablet using a different \u0060SKTouchEventArgs.Id\u0060 than the mouse, but \u0060Pressure\u0060 being constantly 1.\n\n\u003Cimg width=\u00221021\u0022 height=\u0022467\u0022 alt=\u0022Image\u0022 src=\u0022https://github.com/user-attachments/assets/21e98b77-88df-4a8d-a733-086a658b6bc6\u0022 /\u003E\n\nI did not test this on macOS with the Wacom tablet, but can do if it helps.\nI don\u0027t own an iPad to test there but based on @hrkrx \u0027s comment I will assume it still doesn\u0027t work.",
        "createdAt": "2025-12-09T21:20:22",
        "reactions": []
      }
    ]
  }
}