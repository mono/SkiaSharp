{
  "number": 2451,
  "type": "issue",
  "state": "closed",
  "title": "How to automatically include \u0022libSkiaSharp.dll\u0022 when publishing a \u0022Self-contained\u0022 console application?",
  "body": "Having a .NET 7 Console application that runs on Windows, I publish it in Visual Studio 2022 as \u0022Deployment mode: Self-contained\u0022.\r\n\r\nWhile this produces a large single executable (as expected), the executable fails to run as soon as accessing SkiaSharp functions:\r\n\r\n\u003E The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception.        \r\n\u003E System.TypeInitializationException: The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception. The type initializer for \u0027SkiaSharp.SKImageInfo\u0027 threw an exception.    at SkiaSharp.SKBitmap..ctor(Int32 width, Int32 height, Boolean isOpaque)\r\n\u003E Dll was not found.    at SkiaSharp.SkiaApi.sk_colortype_get_default_8888()        \r\n\u003E    at SkiaSharp.SKImageInfo..cctor()           \r\n\u003E    at SkiaSharp.SKBitmap..ctor(Int32 width, Int32 height, Boolean isOpaque)\r\n\r\nIf I not only ship my executable but also the file \u0022**libSkiaSharp.dll**\u0022, the error goes away and my application runs as expected.\r\n\r\nSince I explicitly configured my publish in Visual Studio to produce a single executable, I do not want to ship an additional DLL file.\r\n\r\n### My question\r\n\r\nIs there any way to tell the build/publish system to also include \u0022libSkiaSharp.dll\u0022 in the single-executable assembly?",
  "author": {
    "login": "UweKeim",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-05-03T10:14:29",
  "updatedAt": "2023-06-09T12:00:48",
  "closedAt": "2023-05-10T09:52:59",
  "commentCount": 2,
  "reactionCount": 1,
  "engagement": {
    "syncedAt": "2026-02-06T13:46:02.205466Z",
    "reactions": [
      {
        "user": "UweKeim",
        "content": "eyes",
        "createdAt": "2026-02-06T13:46:02.2054681Z"
      }
    ],
    "comments": [
      {
        "id": 1541520397,
        "author": "Webreaper",
        "body": "Have you tried the \u0060IncludeNativeLibrariesForSelfExtract\u0060 option? \r\n\r\nhttps://learn.microsoft.com/en-us/dotnet/core/deploying/single-file/overview?tabs=cli#native-libraries",
        "createdAt": "2023-05-10T07:52:44",
        "reactions": [
          {
            "user": "UweKeim",
            "content": "heart",
            "createdAt": "2026-02-06T13:46:01.9289475Z"
          }
        ]
      },
      {
        "id": 1541828088,
        "author": "UweKeim",
        "body": "Awesome, that did the trick, thank you very much, @Webreaper!\r\n\r\nFor anyone coming here, you have to add \u0060IncludeNativeLibrariesForSelfExtract\u0060 to your CSPROJ file, inside a \u0060PropertyGroup\u0060, e.g.:\r\n\r\n\u0060\u0060\u0060xml\r\n\u003CPropertyGroup\u003E\r\n    \u003CIncludeNativeLibrariesForSelfExtract\u003Etrue\u003C/IncludeNativeLibrariesForSelfExtract\u003E \r\n\u003C/PropertyGroup\u003E\r\n\u0060\u0060\u0060",
        "createdAt": "2023-05-10T09:52:52",
        "reactions": [
          {
            "user": "Webreaper",
            "content": "\u002B1",
            "createdAt": "2026-02-06T13:46:02.1552139Z"
          }
        ]
      }
    ]
  }
}