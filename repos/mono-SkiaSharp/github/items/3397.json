{
  "number": 3397,
  "type": "pr",
  "state": "closed",
  "title": "Enable Control Flow Guard for all Windows native DLLs",
  "body": "Enable Control Flow Guard for all Windows native DLLs: libSkiaSharp.dll, libHarfBuzzSharp.dll, SkiaSharp.Views.WinUI.Native.dll, libEGL.dll, and libGLESv2.dll\r\n\r\n- Add ControlFlowGuard compiler and linker settings to all configurations\r\n- libSkiaSharp: Add /guard:cf to extra_cflags and extra_ldflags in GN build (applies to all Windows variants including nanoserver)\r\n- libHarfBuzzSharp: Add ControlFlowGuard settings to all Debug/Release builds for Win32, x64, and ARM64 platforms\r\n- SkiaSharp.Views.WinUI.Native: Add ControlFlowGuard settings to all WinUI configurations\r\n- libEGL \u0026 libGLESv2: Add /guard:cf to extra_cflags and extra_ldflags in ANGLE GN build for all architectures\r\n- Improves security by preventing ROP/JOP attacks with minimal performance impact\r\n\r\n\r\n\r\n|Library | Purpose | Build System | Architectures | CFG Status |\r\n|-- | -- | -- | -- | --|\r\n|libSkiaSharp.dll | Core 2D Graphics | GN/Ninja (Skia) | Win32, x64, ARM64 | \u2705\u00A0ENABLED |\r\n|libHarfBuzzSharp.dll | Text Shaping | Visual Studio | Win32, x64, ARM64 | \u2705\u00A0ENABLED|\r\n|SkiaSharp.Views.WinUI.Native.dll | WinUI Integration | Visual Studio | Win32, x64, ARM64 | \u2705\u00A0ENABLED|\r\n|libEGL.dll | OpenGL ES Context | GN/Ninja (ANGLE) | x86, x64, arm64 | \u2705\u00A0ENABLED|\r\n|libGLESv2.dll | OpenGL ES Graphics | GN/Ninja (ANGLE) | x86, x64, arm64 | \u2705\u00A0ENABLED|\r\n\r\n\r\n**PR Checklist**\r\n\r\n- [ ] Has tests (if omitted, state reason in description)\r\n- [ ] Rebased on top of main at time of PR\r\n- [ ] Merged related skia PRs\r\n- [ ] Changes adhere to coding standard\r\n- [ ] Updated documentation\r\n",
  "author": {
    "login": "Aguilex",
    "type": "User"
  },
  "labels": [
    {
      "name": "os/Windows-Classic",
      "color": "fbca04"
    },
    {
      "name": "area/libHarfBuzzSharp.native",
      "color": "0052cc"
    }
  ],
  "assignees": [],
  "createdAt": "2025-10-28T20:06:47",
  "updatedAt": "2025-10-29T00:20:23",
  "closedAt": "2025-10-29T00:20:20",
  "commentCount": 1,
  "reactionCount": 0,
  "draft": false,
  "merged": true,
  "mergedAt": "2025-10-29T00:20:19",
  "mergeableState": "unknown",
  "baseBranch": "main",
  "headBranch": "enable-cfg-harfbuzz",
  "additions": 19,
  "deletions": 3,
  "changedFiles": 4,
  "commits": 1,
  "reviews": [
    {
      "author": "mattleibow",
      "state": "APPROVED",
      "submittedAt": "2025-10-28T20:37:32"
    },
    {
      "author": "mattleibow",
      "state": "COMMENTED",
      "submittedAt": "2025-10-28T22:13:12"
    }
  ],
  "engagement": {
    "syncedAt": "2026-02-06T13:23:15.6807804Z",
    "reactions": [],
    "comments": [
      {
        "id": 3458274560,
        "author": "github-actions[bot]",
        "body": "**Triage Summary**  \n\nLabels will be applied to indicate the affected area of the library (libHarfBuzzSharp.native) and the operating system (Windows-Classic) related to Control Flow Guard settings.\n\nThis issue does not qualify as a regression as it pertains to security improvements rather than compatibility or reliability concerns.\n\nAdditional remarks:\n* The issue focuses on adding compiler and linker settings for enhanced security and does not relate to performance or previous versions.\n* Labels relating to graphic rendering backends are not applicable to this issue.\n\n\u003Cdetails\u003E\n\u003Csummary\u003EDetailed Summary and Actions\u003C/summary\u003E\n\nSummary of the triage:\n\n- The issue pertains to enabling Control Flow Guard for the \u0060libHarfBuzzSharp.dll\u0060, specifically related to the native implementation of HarfBuzz in C#.\n- The issue specifically targets Windows operating systems, focusing on adding Control Flow Guard settings for Win32, x64, and ARM64 platforms.\n\nSummary of the actions that will be performed:\n\n| Action          | Item                        | Description                                                                                   |\n| :-------------- | :-------------------------- | :-------------------------------------------------------------------------------------------- |\n| Apply Label     | area/libHarfBuzzSharp.native | The issue concerns enabling Control Flow Guard settings related to the native implementation of HarfBuzz. |\n| Apply Label     | os/Windows-Classic         | The issue pertains to adding Control Flow Guard specifically for Microsoft Windows configurations targeting relevant platforms. |\n\n\u003C/details\u003E\n\n\n\n_This entire triage process was automated by AI and mistakes may have been made. Please let us know so we can continue to improve._",
        "createdAt": "2025-10-28T20:07:30",
        "reactions": []
      }
    ]
  }
}