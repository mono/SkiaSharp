{
  "number": 1868,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] SKRuntimeEffect compilation is missing build-in functions",
  "body": "**Description**\r\n\r\nI\u0027ve been trying out the new SKRuntimeEffect support in 2.88.0-preview.155 . Compilation of shaders using some opengl functions fails. (Tested with step and smoothstep). Not sure if this a skiasharp problem or a skia problem.\r\n\r\n**Code**\r\n\r\n\u0060\u0060\u0060\r\nuniform float2 iResolution; \r\nuniform float2 iPos; \r\n\r\nhalf4 main(float2 fragcoord) {\r\n  float2 uv = (fragcoord - sk_FragCoord.xy) / iResolution.y;\r\n  float d = length(uv);\r\n  float m = 0.03 / d;\r\n  m *= step(0.2, 0.3);\r\n  return half4(m, m, m, m);\r\n}\u0022\r\n\u0060\u0060\u0060\r\n\r\n**Expected Behavior**\r\n\r\nThis should compile. The same code works on the skia-sksl demo [https://shaders.skia.org/](website).\r\n\r\n**Actual Behavior**\r\n\r\nCompilation outputs the following error:\r\n\u0060error: 9: unknown identifier \u0027step\u0027\u0060\r\nThis also happens with \u0027smoothstep\u0027. Its weird that the \u0027length\u0027 function still works though. I have read that Skia only supports a subset of GL functions, but since it works on the demo site and these being very important shader functions, I doubt that they aren\u0027t included.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  2.88.0-preview.155\r\n- Platform Target Frameworks:\r\n  - Android: 11 (API level 21)\r\n  - Xamarin: 5.0.0.2244",
  "author": {
    "login": "Oribow",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2021-11-18T23:45:12",
  "updatedAt": "2023-09-04T09:00:27",
  "closedAt": "2023-08-05T06:55:22",
  "commentCount": 4,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:43:26.1376837Z",
    "reactions": [],
    "comments": [
      {
        "id": 1561392645,
        "author": "cyraid",
        "body": "It errors with \u0027round\u0027 or \u0027mod\u0027 as well.. I\u0027m wondering if it\u0027s \u0027cause it\u0027s a bit older of Skia? It kinda hampers the simple \u0027checkerboard\u0027 pattern shader I was gonna make. Not even \u0027coord.x % 32.0\u0027 works.",
        "createdAt": "2023-05-24T15:37:46",
        "reactions": []
      },
      {
        "id": 1596291085,
        "author": "LFLumirithmic",
        "body": "Can confirm it fails with \u0027mod\u0027 as well. I\u0027m using version 2.88.3 of SkiaSharp inside a .NET MAUI application. It would be great if support for these basic shader functions was added, especially since they work perfectly in the skia shader playground",
        "createdAt": "2023-06-18T22:28:14",
        "reactions": []
      },
      {
        "id": 1666417160,
        "author": "mattleibow",
        "body": "Updating skia to the latest makes most of the functions work, however, the \u0060sk_FragCoord\u0060 uniform is not actually available in the public spec. That is just for internal use by skia. ",
        "createdAt": "2023-08-05T06:55:11",
        "reactions": []
      },
      {
        "id": 1666417178,
        "author": "mattleibow",
        "body": "Duplicate of https://github.com/mono/SkiaSharp/issues/2543",
        "createdAt": "2023-08-05T06:55:20",
        "reactions": []
      }
    ]
  }
}