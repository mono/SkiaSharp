{
  "number": 904,
  "type": "pr",
  "state": "closed",
  "title": "Update HarfBuzz to v2.5.3",
  "body": "**Description of Change**\r\n\r\nHarfBuzz is now updated to 2.5.3\r\nUnicodeFunctions are now customizable via delegates like FontFunctions\r\nSome overloads that except int as Unicode codepoint were removed for more consistency\r\n\r\n**Bugs Fixed**\r\n\r\n- Related to issue #894 \r\n\r\n**API Changes**\r\n\r\nAdded: \r\n \r\n- \u0060UnicodeFunctions (UnicodeFunctions parent)\u0060\r\n- \u0060UnicodeFunctions UnicodeFunctions.Parent {get;}\u0060\r\n- \u0060uint UnicodeFunctions.GetMirroring (uint unicode)\u0060\r\n- \u0060bool UnicodeFunctions.TryCompose (uint a, uint b, out uint ab)\u0060\r\n- \u0060bool UnicodeFunctions.TryDecompose (uint ab, out uint a, out uint b) \u0060\r\n- \u0060voidUnicodeFunctions. SetCombiningClassDelegate (CombiningClassDelegate del, ReleaseDelegate destroy = null)\u0060\r\n- \u0060void UnicodeFunctions.SetGeneralCategoryDelegate (GeneralCategoryDelegate del, ReleaseDelegate destroy = null)\u0060\r\n- \u0060void UnicodeFunctions.SetMirroringDelegate (MirroringDelegate del, ReleaseDelegate destroy = null)\u0060\r\n- \u0060void UnicodeFunctions.SetScriptDelegate (ScriptDelegate del, ReleaseDelegate destroy = null)\u0060\r\n- \u0060void UnicodeFunctions.SetComposeDelegate (ComposeDelegate del, ReleaseDelegate destroy = null)\u0060\r\n- \u0060void UnicodeFunctions.SetDecomposeDelegate (DecomposeDelegate del, ReleaseDelegate destroy = null)\u0060\r\n\r\nChanged:\r\n\r\n - \u0060void FontFunctions.SetHorizontalFontExtentsDelegate (FontExtentsDelegate del, ReleaseDelegate destroy) =\u003E void FontFunctions.SetHorizontalFontExtentsDelegate (FontExtentsDelegate del, ReleaseDelegate destroy = null)\u0060 etc.\r\n\r\nRemoved:\r\n- \u0060void FontFunctions.SetHorizontalFontExtentsDelegate (FontExtentsDelegate del)\u0060 etc.\r\n\r\n- \u0060UnicodeCombiningClass UnicodeFunctions.GetCombiningClass (int unicode)\u0060\r\n- \u0060UnicodeGeneralCategory UnicodeFunctions.GetGeneralCategory (int unicode)\u0060\r\n- \u0060Script UnicodeFunctions.GetScript (int unicode)\u0060\r\n\r\n\r\n**Behavioral Changes**\r\n\r\n**PR Checklist**\r\n\r\n- [x] Has tests (if omitted, state reason in description)\r\n- [ ] Rebased on top of master at time of PR\r\n- [x] Changes adhere to coding standard\r\n- [ ] Updated documentation\r\n",
  "author": {
    "login": "Gillibald",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "milestone": "v1.68.1",
  "createdAt": "2019-07-03T13:46:25",
  "updatedAt": "2019-11-21T20:35:10",
  "closedAt": "2019-07-13T05:33:15",
  "commentCount": 12,
  "reactionCount": 0,
  "draft": false,
  "mergeable": false,
  "merged": true,
  "mergedAt": "2019-07-13T05:33:15",
  "mergeableState": "dirty",
  "baseBranch": "master",
  "headBranch": "harfbuzzUpdate",
  "additions": 664,
  "deletions": 414,
  "changedFiles": 32,
  "commits": 15,
  "reviews": [
    {
      "author": "mattleibow",
      "state": "COMMENTED",
      "submittedAt": "2019-07-03T19:51:15"
    },
    {
      "author": "Gillibald",
      "state": "COMMENTED",
      "submittedAt": "2019-07-03T20:48:17"
    },
    {
      "author": "mattleibow",
      "state": "COMMENTED",
      "submittedAt": "2019-07-13T03:56:16"
    }
  ],
  "engagement": {
    "syncedAt": "2026-02-06T14:34:48.3896472Z",
    "reactions": [],
    "comments": [
      {
        "id": 508101551,
        "author": "Gillibald",
        "body": "I would like to remove all overloads that currently take \u0060int\u0060 as codepoints. \u0060UnicodeFunctions\u0060 returns \u0060uint\u0060 as codepoint and HarfBuzz in general uses \u0060uint\u0060 under the hood so it makes sense to remove these overloads.",
        "createdAt": "2019-07-03T13:50:13",
        "reactions": []
      },
      {
        "id": 508217613,
        "author": "mattleibow",
        "body": "\u003E I would like to remove all overloads that currently take \u0060int\u0060 as codepoints. \u0060UnicodeFunctions\u0060 returns \u0060uint\u0060 as codepoint and HarfBuzz is general uses \u0060uint\u0060 under the hood so it makes sense to remove these overloads.\r\n\r\nSounds good.",
        "createdAt": "2019-07-03T19:00:07",
        "reactions": []
      },
      {
        "id": 508219113,
        "author": "mattleibow",
        "body": "I am having a look at the usage of \u0060unsafe\u0060, previously I was all \u0022keep it hidden\u0022, but it just makes the code more verbose - and I have learned to not fear it. So, I am thinking that if it reduces the code a bit by adding it to the member definition, then let\u0027s do it. ",
        "createdAt": "2019-07-03T19:05:02",
        "reactions": []
      },
      {
        "id": 508226954,
        "author": "Gillibald",
        "body": "I changed it to match the style of recent additions but as you mentioned defining unsafe on the member definition looks much cleaner.",
        "createdAt": "2019-07-03T19:31:21",
        "reactions": [
          {
            "user": "mattleibow",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:34:46.1925951Z"
          }
        ]
      },
      {
        "id": 508232461,
        "author": "mattleibow",
        "body": "I have been changed since working with you. I used to be a \u0022safe\u0022 guy, but since seeing how awesome Spans and void* really are, I can see all the places where I was wrong. Thanks for putting up with me.",
        "createdAt": "2019-07-03T19:51:01",
        "reactions": []
      },
      {
        "id": 508706663,
        "author": "Gillibald",
        "body": "@mattleibow Do you know why CI is always aborted?",
        "createdAt": "2019-07-05T10:04:13",
        "reactions": []
      },
      {
        "id": 508966459,
        "author": "mattleibow",
        "body": "Not sure exactly... seems the builds are timing out after 2 hours - which means something got stuck. Rebuilding now, sometimes DevOps has hiccups.",
        "createdAt": "2019-07-07T02:22:46",
        "reactions": []
      },
      {
        "id": 510520297,
        "author": "mattleibow",
        "body": "This looks good, just doing a last build before merging. Is this PR complete?",
        "createdAt": "2019-07-11T14:54:08",
        "reactions": []
      },
      {
        "id": 510528584,
        "author": "Gillibald",
        "body": "Yes. This PR is complete. ",
        "createdAt": "2019-07-11T15:14:09",
        "reactions": []
      },
      {
        "id": 510529357,
        "author": "Gillibald",
        "body": "Should we add - static-libstdc\u002B\u002B only to the linker step in the makefile to avoid these warnings?",
        "createdAt": "2019-07-11T15:16:02",
        "reactions": []
      },
      {
        "id": 510531673,
        "author": "mattleibow",
        "body": "\u003E Should we add - static-libstdc\u002B\u002B only to the linker step in the makefile to avoid these warnings?\r\n\r\nAh, that might be good. Use the \u0060LDFLAGS\u0060.",
        "createdAt": "2019-07-11T15:21:41",
        "reactions": []
      },
      {
        "id": 510532476,
        "author": "mattleibow",
        "body": "\u003E Are you sure we can use a Tag here? I read only branches are valid.\r\n\r\nI think I have always used the tag, not sure if it is valid... We probably don\u0027t need that at all - it was more to stop the docs tool from breaking - but that is now a separate repo. But, we can remove that in a separate PR - along with the other branches.",
        "createdAt": "2019-07-11T15:23:44",
        "reactions": [
          {
            "user": "Gillibald",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:34:48.3401308Z"
          }
        ]
      }
    ]
  }
}