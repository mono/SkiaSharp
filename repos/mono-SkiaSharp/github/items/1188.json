{
  "number": 1188,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] macOS native crashes in gr_backendrendertarget_get_gl_framebufferinfo",
  "body": "**Description**\r\ni using SkiaSharp in a Xamarin.Forms app on macOS, after following the discussion in #1144 i have updated to the latest preview .45 which unfortunately doesn\u0027t solve the issue with native crashes for me (\u0060gr_backendrendertarget_get_gl_framebufferinfo\u0060). I have a different issue open which is related to \u0060SKImage\u0060 #1164 but i\u0027m not sure if this is the same - so here is a new open issue \uD83E\uDD13\r\n\r\n I\u0027m using an \u0060SKGLView\u0060 to draw several shapes and images which lead to a freeze and the following native crash.\r\n\r\n**Code**\r\n\r\nin my case it might be related with \u0060GRContext.GetResourceCacheUsage\u0060 \uD83E\uDD37\u200D\u2642\uFE0F\r\n\r\n\u0060\u0060\u0060\r\n=================================================================\r\n\tNative Crash Reporting\r\n=================================================================\r\nGot a SIGSEGV while executing native code. This usually indicates\r\na fatal error in the mono runtime or one of the native libraries \r\nused by your application.\r\n=================================================================\r\n\r\n=================================================================\r\n\tNative stacktrace:\r\n=================================================================\r\n\t0x107350d28 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_dump_native_crash_info\r\n\t0x1073446e5 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_handle_native_crash\r\n\t0x107661303 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : altstack_handle_and_restore.cold.1\r\n\t0x1072c1dac - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : altstack_handle_and_restore\r\n\t0x107d34465 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MonoBundle/libSkiaSharp.dylib : gr_backendrendertarget_get_gl_framebufferinfo\r\n\t0x142ab5e43 - Unknown\r\n\t0x142ab5c3b - Unknown\r\n\t0x142ab4803 - Unknown\r\n\t0x14294fec3 - Unknown\r\n\t0x142949c63 - Unknown\r\n\t0x142946c14 - Unknown\r\n\t0x142946ae8 - Unknown\r\n\t0x142944bed - Unknown\r\n\t0x142943d6b - Unknown\r\n\t0x142943f7e - Unknown\r\n\t0x10735b1ee - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_jit_runtime_invoke\r\n\t0x10748d318 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_runtime_invoke_checked\r\n\t0x107491c9e - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_runtime_invoke\r\n\t0x1072133d2 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : xamarin_invoke_trampoline\r\n\t0x10721499b - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : xamarin_arch_trampoline\r\n\t0x107215bc6 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : xamarin_x86_64_common_trampoline\r\n\t0x7fff33acfe29 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSGestureRecognizer_Routing) _sendEventToGestureRecognizers:requireAcceptsFirstMouse:]\r\n\t0x7fff33ad7ac2 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) _handleMouseDownEvent:isDelayedEvent:]\r\n\t0x7fff33a41c5c - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) _reallySendEvent:isDelayedEvent:]\r\n\t0x7fff33a41005 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) sendEvent:]\r\n\t0x7fff33a3f37c - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSApplication(NSEvent) sendEvent:]\r\n\t0x7fff3388b0cf - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSApplication run]\r\n\t0x7fff3385d465 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : NSApplicationMain\r\n\t0x1113e8aec - Unknown\r\n\t0x1112bc2a3 - Unknown\r\n\t0x10879d8fb - Unknown\r\n\t0x10879da91 - Unknown\r\n\t0x10735b1ee - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_jit_runtime_invoke\r\n\t0x10748d318 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_runtime_invoke_checked\r\n\t0x1074947c5 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_runtime_exec_main_checked\r\n\t0x1072b7e9c - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_jit_exec\r\n\t0x1072bafd4 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : mono_main\r\n\t0x107216578 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : xamarin_main\r\n\t0x1072173e4 - /Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MacOS/Project : main\r\n\t0x7fff6dd7a7fd - /usr/lib/system/libdyld.dylib : start\r\n\r\n=================================================================\r\n\tTelemetry Dumper:\r\n=================================================================\r\nPkilling 0x70000a25d000 from 0x108a2edc0\r\nPkilling 0x70000e14f000 from 0x108a2edc0\r\nPkilling 0x70000a866000 from 0x108a2edc0\r\nPkilling 0x70000b587000 from 0x108a2edc0\r\nPkilling 0x70000e758000 from 0x108a2edc0\r\nPkilling 0x70000ae6f000 from 0x108a2edc0\r\nPkilling 0x70000bb90000 from 0x108a2edc0\r\nPkilling 0x70000ed61000 from 0x108a2edc0\r\nPkilling 0x70000c199000 from 0x108a2edc0\r\nPkilling 0x70000c7a2000 from 0x108a2edc0\r\nPkilling 0x70000d740000 from 0x108a2edc0\r\nPkilling 0x70000e352000 from 0x108a2edc0\r\nPkilling 0x70000aa69000 from 0x108a2edc0\r\nPkilling 0x70000b78a000 from 0x108a2edc0\r\nPkilling 0x70000e95b000 from 0x108a2edc0\r\nPkilling 0x70000b072000 from 0x108a2edc0\r\nPkilling 0x70000bd93000 from 0x108a2edc0\r\nPkilling 0x70000c39c000 from 0x108a2edc0\r\nPkilling 0x700009d51000 from 0x108a2edc0\r\nPkilling 0x70000c9a5000 from 0x108a2edc0\r\nPkilling 0x70000d943000 from 0x108a2edc0\r\nPkilling 0x70000df4c000 from 0x108a2edc0\r\nPkilling 0x70000a663000 from 0x108a2edc0\r\nPkilling 0x70000e555000 from 0x108a2edc0\r\nPkilling 0x70000ac6c000 from 0x108a2edc0\r\nPkilling 0x70000b98d000 from 0x108a2edc0\r\nPkilling 0x70000eb5e000 from 0x108a2edc0\r\nPkilling 0x70000b275000 from 0x108a2edc0\r\nPkilling 0x70000bf96000 from 0x108a2edc0\r\nPkilling 0x700009f54000 from 0x108a2edc0\r\nPkilling 0x70000cba8000 from 0x108a2edc0\r\nPkilling 0x70000d1b1000 from 0x108a2edc0\r\nCould not exec mono-hang-watchdog, expected on path \u0027/Users/Documents/Dev/Project/Project.MyProject.MacOS/bin/Debug/Project.app/Contents/MonoBundle/../bin/mono-hang-watchdog\u0027 (errno 2)\r\nEntering thread summarizer pause from 0x108a2edc0\r\nFinished thread summarizer pause from 0x108a2edc0.\r\n\r\nWaiting for dumping threads to resume\r\n\r\n=================================================================\r\n\tExternal Debugger Dump:\r\n=================================================================\r\nsocket_transport_send Cannot transition thread 0x108a2edc0 from STATE_BLOCKING with DO_BLOCKING\r\n\u0060\u0060\u0060\r\n**Expected Behavior**\r\n\r\nSKGLView should render without any problems\u002B\r\n\r\n**Actual Behavior**\r\n\r\nrandom freezes and stuck app - only force close or \u0060killall lldb\u0060 helps in my case\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  1.68.2-preview.45\r\n- IDE:  Visual Studio for Mac 8.5 (build 3183)\r\n- Platform Target Frameworks: \u003C!-- all that apply, remove the platforms that aren\u0027t broken or haven\u0027t had any testing --\u003E\r\n  - macOS: 10.15.3 (19D76)\r\n\r\n- Target Devices:   \u003C!-- the devices that you noticed this on, e.g. iPhone X --\u003E\r\n  - MacBook Pro (13-inch, 2018, Four Thunderbolt 3 Ports) | 16 GB 2133 MHz LPDDR3 | 2,3 GHz Quad-Core Intel Core i5 | Intel Iris Plus Graphics 655 1536 MB\r\n\r\n**Reproduction Link**\r\n\r\n",
  "author": {
    "login": "nor0x",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "milestone": "v1.68.2",
  "createdAt": "2020-03-25T10:02:35",
  "updatedAt": "2022-08-19T06:02:15",
  "closedAt": "2020-04-20T06:52:07",
  "commentCount": 15,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T14:12:19.9350679Z",
    "reactions": [],
    "comments": [
      {
        "id": 603892620,
        "author": "mattleibow",
        "body": "With this crash, are you using the \u0060ToTextureImage\u0060? If so, does it still crash without it?\r\n\r\nAlso, are you running the updates to the SkiaSharp.Views package? That is where the bug was.\r\n\r\nFinally, did you clean and rebuild? Sometimes the old assemblies are used. But I am assuming that you did and this is more for the native binaries. But, maybe straws need to be clutched earlier on? :)",
        "createdAt": "2020-03-25T15:05:00",
        "reactions": []
      },
      {
        "id": 603924041,
        "author": "nor0x",
        "body": "i\u0027m not using \u0060ToTextureImage\u0060 in my current tests. i\u0027m drawing some shapes (rectangles, polygons, circles,...) which can be dragged and scaled. i cannot share the project source with the public though.\r\n\u0060SkiaSharp\u0060 and \u0060SkiaSharp.Views\u0060 are both on version \u00601.68.2-preview.45\u0060",
        "createdAt": "2020-03-25T15:58:35",
        "reactions": []
      },
      {
        "id": 604063932,
        "author": "mattleibow",
        "body": "I bet it is related to #1137 which is still the root cause of #1121. Something is being disposed incorrectly. And this happens with the GL bits which is usually with more threads. So, I am looking at that still. I worked around the main crash in #1180, but the underlying issue is still there. I believe I have a repro case as well.",
        "createdAt": "2020-03-25T20:18:08",
        "reactions": []
      },
      {
        "id": 604319465,
        "author": "nor0x",
        "body": "thanks for your hard work. i\u0027m happy to share more details and code in a private session because it\u0027s a big and closed source project i\u0027m working on right now.",
        "createdAt": "2020-03-26T09:22:46",
        "reactions": []
      },
      {
        "id": 604369054,
        "author": "mattleibow",
        "body": "Awesome, thanks. Let me see what I can do with what I have right now and then if that doesn\u0027t work we can talk about your code.",
        "createdAt": "2020-03-26T11:10:17",
        "reactions": [
          {
            "user": "nor0x",
            "content": "\u002B1",
            "createdAt": "2026-02-06T14:12:17.8354835Z"
          }
        ]
      },
      {
        "id": 605720449,
        "author": "mattleibow",
        "body": "I think I found the cause and fix of the issue. It was due to concurrency with the construction and destruction of objects with the same native handle. As soon as PR #1200 is complete, then I\u0027ll push to the preview feed for testing.",
        "createdAt": "2020-03-29T23:45:18",
        "reactions": [
          {
            "user": "nor0x",
            "content": "hooray",
            "createdAt": "2026-02-06T14:12:18.0452385Z"
          }
        ]
      },
      {
        "id": 605929277,
        "author": "nor0x",
        "body": "sounds great! thanks for the fix :-) ",
        "createdAt": "2020-03-30T10:53:12",
        "reactions": []
      },
      {
        "id": 607452535,
        "author": "mattleibow",
        "body": "@nor0x I have pushed what I think is now a good version to the preview feed: **https://aka.ms/skiasharp-eap/index.json**\r\nCheck out the PR version: **1.68.2-pr.1200.20**\r\n\r\nLet me know how it goes.",
        "createdAt": "2020-04-01T19:42:13",
        "reactions": [
          {
            "user": "nor0x",
            "content": "hooray",
            "createdAt": "2026-02-06T14:12:18.4789788Z"
          }
        ]
      },
      {
        "id": 608433516,
        "author": "mattleibow",
        "body": "Hey folks, it has been a long time coming and thanks to all the folks with your repros, samples and stack traces I think we have finally managed to fix those pesky crashes - at least the ones we know about. I have just pushed **1.68.2-preview.50** to NuGet so let me know if this fixes all the crashes you have ever had \uD83D\uDE04 ",
        "createdAt": "2020-04-03T13:28:28",
        "reactions": []
      },
      {
        "id": 608584251,
        "author": "nor0x",
        "body": "thanks for the preview build! works great for me \uD83C\uDF89",
        "createdAt": "2020-04-03T18:06:41",
        "reactions": []
      },
      {
        "id": 608607657,
        "author": "mattleibow",
        "body": "All good? Awesome!",
        "createdAt": "2020-04-03T19:01:57",
        "reactions": []
      },
      {
        "id": 609010672,
        "author": "nor0x",
        "body": "Oh no, too early. In my first quick tests everything was fine, but now after more intense testing i\u0027m experiencing random native crashes / freezes again. I really don\u0027t wanted to reopen this \uD83D\uDE48 @mattleibow \r\n\r\nnot sure if it helps, but if if i go back to preview .43 these crashes seems to happen less often \uD83E\uDD37\u200D\u2642\uFE0F\r\n\r\n\u0060\u0060\u0060\r\n=================================================================\r\n\tNative Crash Reporting\r\n=================================================================\r\nGot a SIGSEGV while executing native code. This usually indicates\r\na fatal error in the mono runtime or one of the native libraries \r\nused by your application.\r\n=================================================================\r\n\r\n=================================================================\r\n\tNative stacktrace:\r\n=================================================================\r\n\t0x10f31fbd8 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_dump_native_crash_info\r\n\t0x10f313595 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_handle_native_crash\r\n\t0x10f629023 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : altstack_handle_and_restore.cold.1\r\n\t0x10f290c5c - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : altstack_handle_and_restore\r\n\t0x1102f7465 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MonoBundle/libSkiaSharp.dylib : gr_backendrendertarget_get_gl_framebufferinfo\r\n\t0x14e818c63 - Unknown\r\n\t0x14e818a5b - Unknown\r\n\t0x14e817563 - Unknown\r\n\t0x14e80bc53 - Unknown\r\n\t0x14e7f7c63 - Unknown\r\n\t0x14e80aa44 - Unknown\r\n\t0x14e80a918 - Unknown\r\n\t0x14e80967d - Unknown\r\n\t0x14e8087fb - Unknown\r\n\t0x14e808a0e - Unknown\r\n\t0x10f32a09e - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_jit_runtime_invoke\r\n\t0x10f45c1c8 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_runtime_invoke_checked\r\n\t0x10f460b4e - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_runtime_invoke\r\n\t0x10f1e2397 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : xamarin_invoke_trampoline\r\n\t0x10f1e38e9 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : xamarin_arch_trampoline\r\n\t0x10f1e4aee - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : xamarin_x86_64_common_trampoline\r\n\t0x7fff2e483574 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSGestureRecognizer_Routing) _sendEventToGestureRecognizers:requireAcceptsFirstMouse:]\r\n\t0x7fff2e48b235 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) _handleMouseDownEvent:isDelayedEvent:]\r\n\t0x7fff2e3f5a81 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) _reallySendEvent:isDelayedEvent:]\r\n\t0x7fff2e3f4e29 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSWindow(NSEventRouting) sendEvent:]\r\n\t0x7fff2e3f31b4 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSApplication(NSEvent) sendEvent:]\r\n\t0x7fff2e24021f - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : -[NSApplication run]\r\n\t0x7fff2e211ff6 - /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit : NSApplicationMain\r\n\t0x119387cac - Unknown\r\n\t0x1191d82a3 - Unknown\r\n\t0x1100408fb - Unknown\r\n\t0x110040a91 - Unknown\r\n\t0x10f32a09e - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_jit_runtime_invoke\r\n\t0x10f45c1c8 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_runtime_invoke_checked\r\n\t0x10f463675 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_runtime_exec_main_checked\r\n\t0x10f286d4c - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_jit_exec\r\n\t0x10f289e84 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : mono_main\r\n\t0x10f1e547c - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : xamarin_main\r\n\t0x10f1e62b4 - /MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MacOS/MyProject : main\r\n\t0x7fff6af1acc9 - /usr/lib/system/libdyld.dylib : start\r\n\t0x2 - Unknown\r\n\r\n=================================================================\r\n\tTelemetry Dumper:\r\n=================================================================\r\nPkilling 0x700009e0f000 from 0x1101dedc0\r\nPkilling 0x70000e996000 from 0x1101dedc0\r\nPkilling 0x70000b742000 from 0x1101dedc0\r\nPkilling 0x70000bd4b000 from 0x1101dedc0\r\nPkilling 0x70000d375000 from 0x1101dedc0\r\nPkilling 0x70000c354000 from 0x1101dedc0\r\nPkilling 0x70000d97e000 from 0x1101dedc0\r\nPkilling 0x70000aa2a000 from 0x1101dedc0\r\nPkilling 0x70000c95d000 from 0x1101dedc0\r\nPkilling 0x70000df87000 from 0x1101dedc0\r\nPkilling 0x70000b033000 from 0x1101dedc0\r\nPkilling 0x70000e590000 from 0x1101dedc0\r\nPkilling 0x70000a012000 from 0x1101dedc0\r\nPkilling 0x70000eb99000 from 0x1101dedc0\r\nPkilling 0x70000b945000 from 0x1101dedc0\r\nPkilling 0x70000bf4e000 from 0x1101dedc0\r\nPkilling 0x70000d578000 from 0x1101dedc0\r\nPkilling 0x70000a624000 from 0x1101dedc0\r\nPkilling 0x70000c557000 from 0x1101dedc0\r\nPkilling 0x70000db81000 from 0x1101dedc0\r\nPkilling 0x70000a298000 from 0x1101dedc0\r\nPkilling 0x70000ac2d000 from 0x1101dedc0\r\nPkilling 0x70000cb60000 from 0x1101dedc0\r\nPkilling 0x70000e18a000 from 0x1101dedc0\r\nPkilling 0x70000b236000 from 0x1101dedc0\r\nPkilling 0x70000e793000 from 0x1101dedc0\r\nPkilling 0x70000b53f000 from 0x1101dedc0\r\nPkilling 0x70000bb48000 from 0x1101dedc0\r\nPkilling 0x70000d172000 from 0x1101dedc0\r\nPkilling 0x70000c151000 from 0x1101dedc0\r\nPkilling 0x70000d77b000 from 0x1101dedc0\r\nPkilling 0x70000a827000 from 0x1101dedc0\r\nPkilling 0x70000c75a000 from 0x1101dedc0\r\nPkilling 0x70000dd84000 from 0x1101dedc0\r\nPkilling 0x70000cd63000 from 0x1101dedc0\r\nPkilling 0x70000ae30000 from 0x1101dedc0\r\nPkilling 0x70000e38d000 from 0x1101dedc0\r\nCould not exec mono-hang-watchdog, expected on path \u0027/MyPath/MyProject/MyProject.MacOS/bin/Debug/MyProject.app/Contents/MonoBundle/../bin/mono-hang-watchdog\u0027 (errno 2)\r\nEntering thread summarizer pause from 0x1101dedc0\r\nFinished thread summarizer pause from 0x1101dedc0.\r\n\r\nWaiting for dumping threads to resume\r\nsocket_transport_send Cannot transition thread 0x1101dedc0 from STATE_BLOCKING with DO_BLOCKING\r\n=================================================================\r\n\tExternal Debugger Dump:\r\n=================================================================\r\n\r\n\u0060\u0060\u0060",
        "createdAt": "2020-04-04T10:50:17",
        "reactions": []
      },
      {
        "id": 609069396,
        "author": "mattleibow",
        "body": "At this point I don\u0027t think this is the concurrency anymore. It may be that the GC is collection things that are no longer used on the managed side.\r\n\r\nThis is gonna be crazy, but try using a \u0060GC.KeepAlive(\u003Cobject\u003E)\u0060 for all skia objects. Or add them to a \u0022method global\u0022 list:\r\n\r\n\u0060\u0060\u0060csharp\r\nvoid OnPaint() {\r\n    var paint = new SKPaint();\r\n    ...\r\n    GC.KeepAlive(paint);\r\n}\r\n\u0060\u0060\u0060\r\n\r\n\u0060\u0060\u0060csharp\r\nvoid OnPaint() {\r\n    var objects = new List\u003CSKObject\u003E();\r\n\r\n    var paint = new SKPaint();\r\n    objects.Add(paint);\r\n\r\n    ...\r\n}\r\n\u0060\u0060\u0060\r\n\r\nBasically, you want to keep these objects alive as long as possible.\r\n\r\nBut, if this is gonna be to crazy to do on your codebase, then we can talk over a private connection and maybe I can have a look at the drawing code. Maybe something will pop out.\r\nMy email is maleib@microsoft.com, just drop me an email and we can talk.",
        "createdAt": "2020-04-04T18:21:44",
        "reactions": []
      },
      {
        "id": 609654530,
        "author": "nor0x",
        "body": "alright i have added try the \u0060KeepAlive\u0060 suggestion and i have dropped you an email since my drawing code is somewhat complex. Thanks @mattleibow ",
        "createdAt": "2020-04-06T08:35:27",
        "reactions": []
      },
      {
        "id": 616347609,
        "author": "nor0x",
        "body": "seems to be fixed by #1224. after a lot of testing i don\u0027t get any crashes so i\u0027m closing this now, hopefully for good",
        "createdAt": "2020-04-20T06:52:07",
        "reactions": [
          {
            "user": "mattleibow",
            "content": "hooray",
            "createdAt": "2026-02-06T14:12:19.884672Z"
          }
        ]
      }
    ]
  }
}