{
  "number": 2870,
  "type": "issue",
  "state": "open",
  "title": "If the application path contains \u0022Unicode characters\u0022 (for instance: \u0151) the SkiaSharp.dll cannot load native libSkiaSharp.dll.",
  "body": "### Description\n\nIf the application path contains Unicode characters (\u0151) the SkiaSharp.dll cannot load native libSkiaSharp.dll.\r\n\r\nThe app is .NET fx 4.7.2 x64. NuGet version 2.88.8\n\n### Code\n\nJust put a character like \u0151 somewhere into the path and start the application\n\n### Expected Behavior\n\nIt should handle the library paths as Unicode strings, like CreateFileW does\n\n### Actual Behavior\n\nException thrown\n\n### Version of SkiaSharp\n\n2.88.3 (Current)\n\n### Last Known Good Version of SkiaSharp\n\nOther (Please indicate in the description)\n\n### IDE / Editor\n\nVisual Studio (Windows)\n\n### Platform / Operating System\n\nWindows\n\n### Platform / Operating System Version\n\nWin11 23H2 x64\n\n### Devices\n\nPC\n\n### Relevant Screenshots\n\n![image](https://github.com/mono/SkiaSharp/assets/45529851/63540daf-8497-42a6-9728-bd986e703d50)\r\n![image](https://github.com/mono/SkiaSharp/assets/45529851/63540daf-8497-42a6-9728-bd986e703d50)\r\n\n\n### Relevant Log Output\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "BadaPZ",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    }
  ],
  "assignees": [],
  "createdAt": "2024-05-27T11:11:18",
  "updatedAt": "2025-01-06T13:47:36",
  "commentCount": 2,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T13:30:53.25055Z",
    "reactions": [],
    "comments": [
      {
        "id": 2134445094,
        "author": "BadaPZ",
        "body": "Is there anything wrong with not having LoadLibraryW and CharSet = CharSet.Unicode implemented here?\r\n\r\n\t\tprivate static class Win32\r\n\t\t{\r\n\t\t\tprivate const string SystemLibrary = \u0022Kernel32.dll\u0022;\r\n\r\n\t\t\t[DllImport (SystemLibrary, SetLastError = true, CharSet = CharSet.Ansi)]\r\n\t\t\tpublic static extern IntPtr LoadLibrary (string lpFileName);\r\n\r\n\t\t\t[DllImport (SystemLibrary, SetLastError = true, CharSet = CharSet.Ansi)]\r\n\t\t\tpublic static extern IntPtr GetProcAddress (IntPtr hModule, string lpProcName);\r\n\r\n\t\t\t[DllImport (SystemLibrary, SetLastError = true, CharSet = CharSet.Ansi)]\r\n\t\t\tpublic static extern void FreeLibrary (IntPtr hModule);\r\n\t\t}\r\n",
        "createdAt": "2024-05-28T06:33:18",
        "reactions": []
      },
      {
        "id": 2573147522,
        "author": "EugeneZaitsev",
        "body": "Confirming an issue. Any non-unicode character path on Windows causes loading fails.",
        "createdAt": "2025-01-06T13:47:34",
        "reactions": []
      }
    ]
  }
}