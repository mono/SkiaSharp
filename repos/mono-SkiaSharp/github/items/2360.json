{
  "number": 2360,
  "type": "issue",
  "state": "closed",
  "title": "Net7.Android - \u0027SkiaSharp.Views.Android.SKGLSurfaceView\u0027: no Java peer type found",
  "body": "### Android application type\r\n\r\nAndroid for .NET (net7.0-android)\r\n\r\n### Affected platform version\r\n\r\n.Net 7.0.102\r\n\r\n### Description\r\n\r\nI\u0027m using [Mapsui](https://www.nuget.org/packages/Mapsui/4.0.0-beta.6) in my net6-android project and it\u0027s been working fine. I recently upgraded to net7-android. Everything works fine after this update as long as I deploy as Debug. but when I build and deploy a Release version the Mapsui constructor crashes with \r\n\u0060System.NotSupportedException: Cannot create instance of type \u0027SkiaSharp.Views.Android.SKGLSurfaceView\u0027: no Java peer type found.\u0060\r\n\r\nCrash occures on:\r\n\u0060\u0060\u0060cs\r\nvar mapControl = new MapControl(Context, null);\r\n\u0060\u0060\u0060\r\n\r\n### Steps to Reproduce\r\n\r\nCreate new \u0027Android Application\u0027 in VS 17.4.4\r\nAdd reference to Mapsui library\r\nconstruct masui MapControl:\r\n\u0060\u0060\u0060cs\r\nvar mapControl = new MapControl(Context, null);\r\n\u0060\u0060\u0060\r\n\r\nBuild and deploy to emulator as Debug - it works\r\nBuild and deploy to emulator as Release - it crashes\r\n\r\n\r\n### Did you find any workaround?\r\n\r\nno, tried adding SkiaSharp reference but didn\u0027t help.\r\n\r\n### Relevant log output\r\n\r\n\u0060\u0060\u0060shell\r\nError: Unhandled Exception\r\nSystem.Exception: CurrentDomainOnUnhandledException\r\n ---\u003E System.NotSupportedException: Cannot create instance of type \u0027SkiaSharp.Views.Android.SKGLSurfaceView\u0027: no Java peer type found.\r\n   at Java.Interop.JniPeerMembers.JniInstanceMethods..ctor(Type )\r\n   at Java.Interop.JniPeerMembers.JniInstanceMethods.GetConstructorsForType(Type )\r\n   at Java.Interop.JniPeerMembers.JniInstanceMethods.StartCreateInstance(String , Type , JniArgumentValue* )\r\n   at Android.Opengl.GLSurfaceView..ctor(Context )\r\n   at SkiaSharp.Views.Android.SKGLSurfaceView..ctor(Context context)\r\n   at Mapsui.UI.Android.MapControl.StartHardwareRenderMode()\r\n   at Mapsui.UI.Android.MapControl.Initialize()\r\n   at Mapsui.UI.Android.MapControl..ctor(Context context, IAttributeSet attrs)\r\n   at GTApp.Android.MapMeasure.OnConfigureDataView()\r\n   at GTApp.Android.MeasureView\u00601[[Mapsui.UI.Android.MapControl, Mapsui.UI.Android, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null]].BuildDataView()\r\n   at GTApp.Android.MeasureView\u00601[[Mapsui.UI.Android.MapControl, Mapsui.UI.Android, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null]]..ctor(Context context, MeasureDef measureDef, Activity activity, LayoutViewMode mode)\r\n   at GTApp.Android.MapMeasure..ctor(Context context, MeasureDef measureDef, Activity activity, LayoutViewMode mode)\r\n   at GTApp.Android.MeasureView.GetViewFor(Context context, MeasureDef measureDef, Activity activity, LayoutViewMode mode)\r\n   at GTApp.Android.MeasureView.\u003C\u003Ec__DisplayClass100_0.\u003CGetViewsForListOrdered\u003Eb__2(Measure m)\r\n   at System.Linq.Enumerable.SelectListIterator\u00602[[GTCore.Measure, GTCore, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[GTApp.Android.MeasureView, GTApp.Android, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].MoveNext()\r\n   at System.Collections.Generic.List\u00601[[GTApp.Android.MeasureView, GTApp.Android, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].InsertRange(Int32 , IEnumerable\u00601 )\r\n   at System.Collections.Generic.List\u00601[[GTApp.Android.MeasureView, GTApp.Android, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].AddRange(IEnumerable\u00601 )\r\n   at GTApp.Android.MeasureView.GetViewsForListOrdered(Context context, Activity gtActivity)\r\n   at GTApp.Android.MeasureListDialog.OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)\r\n   at AndroidX.Fragment.App.Fragment.n_OnCreateView_Landroid_view_LayoutInflater_Landroid_view_ViewGroup_Landroid_os_Bundle_(IntPtr , IntPtr , IntPtr , IntPtr , IntPtr )\r\n   at Android.Runtime.JNINativeWrapper.Wrap_JniMarshal_PPLLL_L(_JniMarshal_PPLLL_L , IntPtr , IntPtr , IntPtr , IntPtr , IntPtr )\r\n   Exception_EndOfInnerExceptionStack\r\n\u0060\u0060\u0060\r\n",
  "author": {
    "login": "DevronB",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-01-17T21:14:17",
  "updatedAt": "2024-01-08T12:00:27",
  "closedAt": "2023-12-09T09:03:31",
  "commentCount": 0,
  "reactionCount": 0
}