{
  "number": 382,
  "type": "issue",
  "state": "closed",
  "title": "Blurry text on WPF",
  "body": "I am using SkiaSharp\u0027s WPF View (SkiaSharp.Views.WPF) to render some stuff that has text in it but the text gets blurry when the WPF View has some specific width and height values. You can see an example below:\r\n\r\nCrisp:\r\n![crisp](https://user-images.githubusercontent.com/5212626/31851690-44d087f8-b66b-11e7-9a4a-4991e924c831.PNG)\r\n\r\nBlurry:\r\n![blurry](https://user-images.githubusercontent.com/5212626/31851686-3a6c86fe-b66b-11e7-9a30-271de2c98e07.PNG)\r\n\r\nI have read the [Blurry text with SkiaSharp in WPF](https://stackoverflow.com/questions/41862848/blurry-text-with-skiasharp-in-wpf)  topic on StackOverflow and in my case \r\n\u0060PresentationSource.FromVisual(this).CompositionTarget.TransformToDevice;\u0060 returns 1 for \u0060dpiX \u0060and \u0060dpiY\u0060.\r\n\r\nIs there a solution or workaround for this? \r\nThanks.\r\n\r\nMainWindow.xaml\r\n\u0060\u0060\u0060\r\n\u003CWindow x:Class=\u0022TextRendering.MainWindow\u0022\r\n        xmlns=\u0022http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0022\r\n        xmlns:x=\u0022http://schemas.microsoft.com/winfx/2006/xaml\u0022\r\n        xmlns:d=\u0022http://schemas.microsoft.com/expression/blend/2008\u0022\r\n        xmlns:mc=\u0022http://schemas.openxmlformats.org/markup-compatibility/2006\u0022\r\n        xmlns:local=\u0022clr-namespace:TextRendering\u0022\r\n        xmlns:sk=\u0022clr-namespace:SkiaSharp.Views.WPF;assembly=SkiaSharp.Views.WPF\u0022\r\n        mc:Ignorable=\u0022d\u0022\r\n        Title=\u0022MainWindow\u0022 Height=\u0022350\u0022 Width=\u0022531\u0022\u003E\r\n    \u003CUniformGrid Columns=\u00222\u0022\u003E\r\n        \u003CBorder BorderBrush=\u0022Gray\u0022 BorderThickness=\u00221\u0022\u003E\r\n        \u003Csk:SKElement PaintSurface=\u0022SKElement_PaintSurface\u0022/\u003E\r\n        \u003C/Border\u003E\r\n        \u003CBorder BorderBrush=\u0022Gray\u0022 BorderThickness=\u00221\u0022\u003E\r\n            \u003Csk:SKElement PaintSurface=\u0022SKElement_PaintSurface\u0022/\u003E\r\n        \u003C/Border\u003E\r\n    \u003C/UniformGrid\u003E\r\n\u003C/Window\u003E\r\n\u0060\u0060\u0060\r\nMainWindow.xaml.cs\r\n\u0060\u0060\u0060\r\nusing SkiaSharp;\r\nusing System.Windows;\r\n\r\nnamespace TextRendering\r\n{\r\n\t/// \u003Csummary\u003E\r\n\t/// Interaction logic for MainWindow.xaml\r\n\t/// \u003C/summary\u003E\r\n\tpublic partial class MainWindow : Window\r\n\t{\r\n\t\tpublic MainWindow()\r\n\t\t{\r\n\t\t\tInitializeComponent();\r\n\t\t}\r\n\r\n\t\tprivate void SKElement_PaintSurface(object sender, SkiaSharp.Views.Desktop.SKPaintSurfaceEventArgs e)\r\n\t\t{\r\n\t\t\tOnDrawSample(e.Surface.Canvas, e.Info.Width, e.Info.Height);\r\n\t\t}\r\n\r\n\t\tprotected void OnDrawSample(SKCanvas canvas, int width, int height)\r\n\t\t{\r\n\t\t\tcanvas.DrawColor(SKColors.White);\r\n\r\n\t\t\tusing (var paint = new SKPaint())\r\n\t\t\t{\r\n\t\t\t\tpaint.TextSize = 16.0f;\r\n\t\t\t\tpaint.Typeface = SKTypeface.FromFamilyName(\u0022Segoe UI\u0022);\r\n\t\t\t\tpaint.IsAntialias = true;\r\n\t\t\t\tpaint.Color = (SKColors.Black);\r\n\t\t\t\tpaint.Style = SKPaintStyle.Fill;\r\n\t\t\t\tpaint.IsStroke = false;\r\n\r\n\t\t\t\tfor (int k = 0; k \u003C 64; k\u002B\u002B)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (int i = 0; i \u003C 64; i\u002B\u002B)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcanvas.DrawText(\u0022000\u0022, k* 32.0f, i * 32.0f, paint);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\u0060\u0060\u0060\r\n\r\n\r\n",
  "author": {
    "login": "eoner",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2017-10-21T14:25:58",
  "updatedAt": "2022-08-19T18:02:24",
  "closedAt": "2017-12-04T21:23:38",
  "commentCount": 2,
  "reactionCount": 0
}