{
  "number": 3483,
  "type": "pr",
  "state": "closed",
  "title": "Add structured workflow for adding APIs to SkiaSharp",
  "body": "**Description of Change**\r\n\r\nCreated a skill-based architecture for adding C# APIs to SkiaSharp, eliminating duplication and establishing clear separation between execution workflows, quick reference, and comprehensive documentation.\r\n\r\n**Changes:**\r\n\r\n- **Created \u0060.github/skills/add-api/SKILL.md\u0060** \u2014 6-phase structured workflow (analyze C\u002B\u002B \u2192 add C API \u2192 commit submodule \u2192 generate bindings \u2192 wrap in C# \u2192 test) with checkpoints preventing common mistakes (lost submodule commits, manual edits of generated files, skipped tests)\r\n\r\n- **Optimized \u0060.github/copilot-instructions.md\u0060** \u2014 Reduced from 496 to 416 lines by replacing detailed workflows with summaries and links. Added \u0060add-api\u0060 to skills table. Created \u0022Working with Native Skia Submodule\u0022 and \u0022Adding New APIs\u0022 sections as concise references pointing to the skill and comprehensive docs.\r\n\r\n- **Enhanced \u0060documentation/adding-apis.md\u0060** \u2014 Added submodule git workflow section with step-by-step commands, expanded checklist from 3 to 5 phases, added common mistakes table.\r\n\r\n**Architecture:** Three-tier system where skill provides structured execution, instructions provide quick reference, and documentation provides comprehensive guide. Follows pattern established by native-dependency-update and other skills.\r\n\r\n**Bugs Fixed**\r\n\r\nNone.\r\n\r\n**API Changes**\r\n\r\nNone.\r\n\r\n**Behavioral Changes**\r\n\r\nNone.\r\n\r\n**Required skia PR**\r\n\r\nNone.\r\n\r\n**PR Checklist**\r\n\r\n- [x] Has tests (if omitted, state reason in description) \u2014 Documentation only\r\n- [ ] Rebased on top of main at time of PR\r\n- [ ] Merged related skia PRs\r\n- [x] Changes adhere to coding standard\r\n- [x] Updated documentation\r\n",
  "author": {
    "login": "Copilot",
    "type": "Bot"
  },
  "labels": [],
  "assignees": [
    {
      "login": "mattleibow",
      "type": "User"
    },
    {
      "login": "Copilot",
      "type": "Bot"
    }
  ],
  "createdAt": "2026-01-31T15:13:10",
  "updatedAt": "2026-02-01T20:25:10",
  "closedAt": "2026-02-01T20:25:08",
  "commentCount": 4,
  "reactionCount": 0,
  "draft": false,
  "merged": true,
  "mergedAt": "2026-02-01T20:25:08",
  "mergeableState": "unknown",
  "baseBranch": "main",
  "headBranch": "copilot/fix-drawsurface-sampling-options",
  "additions": 507,
  "deletions": 39,
  "changedFiles": 9,
  "commits": 18,
  "reviews": [],
  "engagement": {
    "syncedAt": "2026-02-06T13:20:59.7371173Z",
    "reactions": [],
    "comments": [
      {
        "id": 3828889697,
        "author": "mattleibow",
        "body": "@copilot can you investigate if there is benefit to having a new skill for this or if this is too fine frame and can be instructions. \n\nI also see large parts of docs that are duplicated. Can you see what should be in instructions and what can be in the docs. Maybe the instructions can have summaries and links to parts of the docs. \n\nAlso review the docs and instructions to make sure they make sense, the important things in the right place and the order/flow is good for AI model perfect. \n\nFocus on making things better, more reliable and easier to maintain. ",
        "createdAt": "2026-01-31T17:37:16",
        "reactions": []
      },
      {
        "id": 3828892229,
        "author": "Copilot",
        "body": "\n\u003E @copilot can you investigate if there is benefit to having a new skill for this or if this is too fine frame and can be instructions. \n\u003E \n\u003E I also see large parts of docs that are duplicated. Can you see ...\n\nI analyzed the documentation structure and found significant duplication. Here\u0027s my recommendation:\n\n**Create a new \u0060add-api\u0060 skill** - Yes, there\u0027s clear benefit similar to the \u0060native-dependency-update\u0060 skill pattern.\n\n**Key findings:**\n- 80\u002B lines of duplicated submodule workflow between instructions and docs\n- Instructions grew to 496 lines (too detailed for quick reference)\n- Adding APIs is a structured, repeatable workflow that benefits from skill-based execution\n\n**Plan:**\n1. Create \u0060.github/skills/add-api/SKILL.md\u0060 with 6-phase workflow and checkpoints\n2. Reduce instructions to 30-line summary with links (saves ~50 lines)\n3. Keep \u0060documentation/adding-apis.md\u0060 as comprehensive reference (unchanged)\n4. Add skill to copilot-instructions.md skills table\n\nThis follows the native-dependency-update pattern: structured skill for execution, summary in instructions, full reference in docs. Working on implementation now.",
        "createdAt": "2026-01-31T17:38:54",
        "reactions": []
      },
      {
        "id": 3830490844,
        "author": "mattleibow",
        "body": "@copilot please remove things about working around networking issues. This was a temporary firewall rule that was fixed. Maybe change to say if there are networking issues you can retry once and then stop the process to let the dev know they need to fix it.\n\nAlso, please remove the nuget.exe as we are not allowed to use that. \n\nFinally, let\u0027s remove the actual api changes as this PR should just be the docs and skills update. The original goal was to make api changes, but let\u0027s totally skip that and keep the docs changes. Update the PR title and body to focus just on the skills and docs and instructions. ",
        "createdAt": "2026-02-01T06:55:13",
        "reactions": []
      },
      {
        "id": 3830493197,
        "author": "Copilot",
        "body": "\n\u003E @copilot please remove things about working around networking issues. This was a temporary firewall rule that was fixed. Maybe change to say if there are networking issues you can retry once and then ...\n\nDone. Changes made in commit 682668f:\n\n1. \u2705 Removed network workaround instructions - replaced with \u0022retry once, then stop and notify\u0022 guidance\n2. \u2705 Removed .nuget/nuget.exe file\n3. \u2705 Reverted all API changes (SKCanvas.cs, SKSurface.cs, SkiaApi.generated.cs, SKCanvasTest.cs)\n4. \u2705 Reverted externals/skia submodule to original commit\n5. \u2705 Updated PR title and description to focus on documentation/skills improvements only\n\nThe PR now contains only documentation structure optimizations:\n- add-api skill creation\n- copilot-instructions.md improvements\n- adding-apis.md enhancements\n\nNet change: -131 lines of API code, keeping only the documentation architecture improvements.",
        "createdAt": "2026-02-01T06:58:11",
        "reactions": []
      }
    ]
  }
}