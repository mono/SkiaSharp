{
  "number": 2871,
  "type": "issue",
  "state": "open",
  "title": ".NET MAUI and/or WinUI 3 \u0060SKGLView\u0060 is not transparent",
  "body": "### Description\n\nSKGLView always draws an opaque gray background instead of a transparent background when specified to be transparent. SKCanvasView works fine.\n\n### Code\n\nhttps://github.com/hyvanmielenpelit/GnollHack\n\n### Expected Behavior\n\nBoth SKGLView and SKCanvasView draw a transparent background upon \u0060canvas.Clear()\u0060.\n\n### Actual Behavior\n\nSKCanvasView draws a transparent background upon \u0060canvas.Clear()\u0060 but SKGLView draws an opaque gray background.\n\n### Version of SkiaSharp\n\n3.x (Alpha)\n\n### Last Known Good Version of SkiaSharp\n\nOther (Please indicate in the description)\n\n### IDE / Editor\n\nVisual Studio (Windows)\n\n### Platform / Operating System\n\nWindows\n\n### Platform / Operating System Version\n\nWindows 11 Home, version 10.0.22631\n\n### Devices\n\nMicro-Star International Co., Ltd. Pulse GL66 11UDK\n\n### Relevant Screenshots\n\n![image](https://github.com/mono/SkiaSharp/assets/53081197/d5130cc8-db50-4d51-8a83-97a298b3a342)\r\n\n\n### Relevant Log Output\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "janne-hmp",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "status/help-wanted",
      "color": "B8EC4A"
    }
  ],
  "assignees": [],
  "createdAt": "2024-05-27T15:29:18",
  "updatedAt": "2024-06-02T18:58:25",
  "commentCount": 11,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-06T12:53:50.5798612Z",
    "reactions": [],
    "comments": [
      {
        "id": 2134021247,
        "author": "TommiGustafsson-HMP",
        "body": "This is most likely because SwapChainPanel does not support transparency:\r\n\r\nhttps://learn.microsoft.com/en-us/windows/apps/windows-app-sdk/composition\r\n\r\nSKGLView uses it on MAUI Windows.",
        "createdAt": "2024-05-27T20:32:13",
        "reactions": [
          {
            "user": "taublast",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:53:48.5215791Z"
          }
        ]
      },
      {
        "id": 2141847904,
        "author": "taublast",
        "body": "Indeed this is not a bug but unfortunately by design as windows GL hardware-accelerated view cannot be transparent.",
        "createdAt": "2024-05-31T11:35:15",
        "reactions": []
      },
      {
        "id": 2141875976,
        "author": "TommiGustafsson-HMP",
        "body": "This is surely the limitation of the WinUI 3 composition engine, because WinUI 2 and UWP supported transparent backgrounds for swap chains.",
        "createdAt": "2024-05-31T11:49:02",
        "reactions": []
      },
      {
        "id": 2141954708,
        "author": "janne-hmp",
        "body": "\u003E Indeed this is not a bug but unfortunately by design as windows GL hardware-accelerated view cannot be transparent.\n\nWould you be able to make a feature request for the WinUI3 team to add support for transparency?\n\nWithout transparency, Windows SKGLView is pretty useless. Both Android and iOS support transparency for SKGLView. If transparency worked in WinUI2, I don\u0027t see why it would be impossible to implement for WinUI3.",
        "createdAt": "2024-05-31T12:18:52",
        "reactions": []
      },
      {
        "id": 2141968846,
        "author": "TommiGustafsson-HMP",
        "body": "It\u0027s already been done here:\r\n\r\nhttps://github.com/microsoft/microsoft-ui-xaml/issues/5025\r\n\r\nIt\u0027s a long standing issue requested by many users already.",
        "createdAt": "2024-05-31T12:23:46",
        "reactions": []
      },
      {
        "id": 2141986120,
        "author": "TommiGustafsson-HMP",
        "body": "A similar thread is here:\r\n\r\nhttps://github.com/microsoft/microsoft-ui-xaml/issues/8130#issuecomment-1817217110",
        "createdAt": "2024-05-31T12:29:34",
        "reactions": []
      },
      {
        "id": 2142136173,
        "author": "TommiGustafsson-HMP",
        "body": "An interesting thing is that some of the use-cases, such as a transparent WebView2 over a MediaPlayerElement, could be done with the current composition engine, if there were a way to activate transparency for external content that is over other external content.",
        "createdAt": "2024-05-31T13:14:30",
        "reactions": []
      },
      {
        "id": 2142347954,
        "author": "taublast",
        "body": "Well, we all would sure want to render an accelerated canvas over a usual MAUI content, so.. Not until we have a different backend for WinUI what would be close to a miracle. =)",
        "createdAt": "2024-05-31T14:25:03",
        "reactions": []
      },
      {
        "id": 2142601185,
        "author": "mattleibow",
        "body": "Maybe this PR will expose Direct3D and then we can add a new D3D view to be used as a backing element: \r\n\r\n* #2817\r\n* https://github.com/mono/SkiaSharp/pull/2823\r\n\r\nAnyone that can help test or review will make things go faster. Also, if there are any folks that know how to hook up the WinUI \u002B Direct3D \u002B Composition, then please feel very free to help in any way.",
        "createdAt": "2024-05-31T16:24:48",
        "reactions": [
          {
            "user": "jeremy-visionaid",
            "content": "\u002B1",
            "createdAt": "2026-02-06T12:53:50.1322198Z"
          }
        ]
      },
      {
        "id": 2142858094,
        "author": "TommiGustafsson-HMP",
        "body": "I\u0027m not sure how we could best help here, but at least we could test new views, if they are available as a NuGet package for .NET MAUI on Windows.",
        "createdAt": "2024-05-31T19:23:47",
        "reactions": []
      },
      {
        "id": 2143986574,
        "author": "TommiGustafsson-HMP",
        "body": "Here\u0027s an example in C\u002B\u002B how to make a transparent DirectX SwapChainPanel:\r\n\r\nhttps://github.com/brabebhin/MayazucMediaPlayer/blob/main/source/MayazucNativeFramework/SubtitleRenderer.cpp\r\n\r\nInfo from here: https://github.com/microsoft/microsoft-ui-xaml/discussions/9684#discussioncomment-9640311",
        "createdAt": "2024-06-02T18:58:24",
        "reactions": []
      }
    ]
  }
}