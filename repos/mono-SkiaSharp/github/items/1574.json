{
  "number": 1574,
  "type": "issue",
  "state": "open",
  "title": "[BUG] App crashes when passing an surrogate charactor to SKFontManager.MatchCharacter in MacOS or iOS",
  "body": "**Description**\r\n\r\nAs the title.\r\nBTW, SKFontManager.MatchCharacter returns null without error in WPF.\r\n\r\n**Code**\r\n\r\n\u0060\u0060\u0060\r\nforeach (char c in \u0022\uD83C\uDF39\u0022)\r\nSkiaSharp.SKFontManager.Default.MatchCharacter(c);\r\n\u0060\u0060\u0060\r\n\r\n**Expected Behavior**\r\n\r\nReturns null\r\n\r\n**Actual Behavior**\r\n\r\nnative crash at https://github.com/mono/SkiaSharp/blob/master/binding/Binding/SKFontManager.cs#L185\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  SkiaSharp 2.80.2\r\n- Last known good version:  older version does not support SKFontManager,\r\n- IDE:  Visual Studio for Mac\r\n- Platform Target Frameworks: \r\n  - iOS:  13.5\r\n  - macOS:  10.15.7\r\n- Target Devices:   \u003C!-- the devices that you noticed this on, e.g. iPhone X --\u003E\r\n  - iMac (21.5inch,2017)\r\n  - iPhone 8\r\n  \r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EDetailed IDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\nVisual Studio Professional 2019 for Mac\r\nVersion 8.8.4 (build 30)\r\nInstallation UUID: 2f2401d6-d175-4013-90cd-4ef09e99dd39\r\n    GTK\u002B 2.24.23 (Raleigh theme)\r\n    Xamarin.Mac 6.18.0.23 (d16-6 / 088c73638)\r\n\r\n \r\n\r\n    Package version: 612000113\r\n\r\n \r\n\r\nMono Framework MDK\r\nRuntime:\r\n    Mono 6.12.0.113 (2020-02/4fdfb5b1fd5) (64-bit)\r\n    Package version: 612000113\r\n\r\n \r\n\r\nRoslyn (Language Service)\r\n3.8.0-5.20519.18\u002B4c195c3ac1974edcefa76774d7a59a2350ec55fa\r\n\r\n \r\n\r\nNuGet\r\n\u30D0\u30FC\u30B8\u30E7\u30F3: 5.8.0.6860\r\n\r\n \r\n\r\n.NET Core SDK\r\nSDK: /usr/local/share/dotnet/sdk/5.0.101/Sdks\r\nSDK \u30D0\u30FC\u30B8\u30E7\u30F3:\r\n    5.0.101\r\n    5.0.100\r\n    3.1.404\r\n    3.1.403\r\n    3.1.402\r\n    2.1.302\r\n    2.1.301\r\n    2.1.4\r\nMSBuild SDK: /Applications/Visual Studio.app/Contents/Resources/lib/monodevelop/bin/MSBuild/Current/bin/Sdks\r\n\r\n \r\n\r\n.NET Core Runtime\r\n\u30E9\u30F3\u30BF\u30A4\u30E0: /usr/local/share/dotnet/dotnet\r\n\u30E9\u30F3\u30BF\u30A4\u30E0 \u30D0\u30FC\u30B8\u30E7\u30F3:\r\n    5.0.1\r\n    5.0.0\r\n    3.1.10\r\n    3.1.9\r\n    3.1.8\r\n    2.1.23\r\n    2.1.22\r\n    2.1.2\r\n    2.1.1\r\n    2.0.5\r\n\r\n \r\n\r\n.NET Core 3.1 SDK\r\nSDK: 3.1.404\r\n\r\n \r\n\r\nXamarin.Profiler\r\n\u30D0\u30FC\u30B8\u30E7\u30F3:1.6.15.68\r\n\u5834\u6240: /Applications/Xamarin Profiler.app/Contents/MacOS/Xamarin Profiler\r\n\r\n \r\n\r\nUpdater\r\n\u30D0\u30FC\u30B8\u30E7\u30F3: 11\r\n\r\n \r\n\r\nApple Developer Tools\r\nXcode 12.2 (17535)\r\nBuild 12B45b\r\n\r\n \r\n\r\nXamarin.Mac\r\nVersion: 7.0.0.15 (Visual Studio Professional)\r\nHash: 87a1b18d8\r\nBranch: d16-8\r\nBuild date: 2020-11-16 21:39:40-0500\r\n\r\n \r\n\r\nXamarin.iOS\r\nVersion: 14.6.0.15 (Visual Studio Professional)\r\nHash: 87a1b18d8\r\nBranch: d16-8\r\nBuild date: 2020-11-16 21:39:41-0500\r\n\r\n \r\n\r\nXamarin Designer\r\nVersion: 16.8.0.510\r\nHash: 44e3f3ce9\r\nBranch: remotes/origin/d16-8\r\nBuild date: 2020-12-10 00:06:14 UTC\r\n\r\n \r\n\r\nXamarin.Android\r\n\u30D0\u30FC\u30B8\u30E7\u30F3:11.1.0.17 (Visual Studio Professional)\r\n\u30B3\u30DF\u30C3\u30C8:xamarin-android/d16-8/c0e2b8e\r\nAndroid SDK: /Users/feidn/Library/Developer/Xamarin/android-sdk-macosx\r\n    \u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B Android \u30D0\u30FC\u30B8\u30E7\u30F3:\r\n        \u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u306A\u3057\r\n\r\n \r\n\r\nSDK Tools \u306E\u30D0\u30FC\u30B8\u30E7\u30F3: 26.1.1\r\nSDK \u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0 \u30C4\u30FC\u30EB\u306E\u30D0\u30FC\u30B8\u30E7\u30F3: 30.0.4\r\nSDK \u30D3\u30EB\u30C9 \u30C4\u30FC\u30EB\u306E\u30D0\u30FC\u30B8\u30E7\u30F3: 29.0.2\r\n\r\n \r\n\r\n\u30D3\u30EB\u30C9\u60C5\u5831: \r\nMono: be2226b\r\nJava.Interop: xamarin/java.interop/d16-8@79d9533\r\nProGuard: Guardsquare/proguard/proguard6.2.2@ebe9000\r\nSQLite: xamarin/sqlite/3.32.1@1a3276b\r\nXamarin.Android Tools: xamarin/xamarin-android-tools/d16-8@2fb1cbc\r\n\r\n \r\n\r\nMicrosoft OpenJDK for Mobile\r\nJava SDK: /Users/feidn/Library/Developer/Xamarin/jdk/microsoft_dist_openjdk_1.8.0.25\r\n1.8.0-25\r\nAndroid Designer EPL \u306E\u30B3\u30FC\u30C9\u306F\u4EE5\u4E0B\u304B\u3089\u5165\u624B\u3067\u304D\u307E\u3059\u3002\r\nhttps://github.com/xamarin/AndroidDesigner.EPL\r\n\r\n \r\n\r\nAndroid SDK Manager\r\nVersion: 16.8.0.32\r\nHash: 01a7774\r\nBranch: remotes/origin/d16-8\r\nBuild date: 2020-12-10 00:32:24 UTC\r\n\r\n \r\n\r\nAndroid Device Manager\r\nVersion: 16.8.0.46\r\nHash: 0a81419\r\nBranch: remotes/origin/d16-8\r\nBuild date: 2020-12-10 00:32:44 UTC\r\n\r\n \r\n\r\nBuild Information\r\nRelease ID: 808040030\r\nGit revision: eaa21a8983aa5c4bcf6a665892478b4f3d413418\r\nBuild date: 2020-12-10 11:06:12-05\r\nBuild branch: release-8.8\r\nXamarin extensions: eaa21a8983aa5c4bcf6a665892478b4f3d413418\r\n\r\n \r\n\r\nOperating System\r\nMac OS X 10.15.7\r\nDarwin 19.6.0 Darwin Kernel Version 19.6.0\r\n    Mon Aug 31 22:12:52 PDT 2020\r\n    root:xnu-6153.141.2~1/RELEASE_X86_64 x86_64\r\n \r\n\r\n\u003C/details\u003E\r\n\r\n",
  "author": {
    "login": "rocktyt",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2021-01-05T02:13:35",
  "updatedAt": "2021-01-05T03:26:38",
  "commentCount": 0,
  "reactionCount": 0
}