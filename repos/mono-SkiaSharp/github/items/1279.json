{
  "number": 1279,
  "type": "issue",
  "state": "open",
  "title": "Unable to create \u0022Euclid Flex Semibold\u0022 Typeface while running in Docker",
  "body": "**Description**\r\n\r\nWe are Unable to create \u0022Euclid Flex Semibold\u0022 font typeface with skia sharp when running in Docker.\r\n\r\n**Code**\r\n\r\n            SKTypeface typeface = GetTypeface(\u0022Euclid Flex Semibold\u0022, SKTypefaceStyle.Normal);\r\n            FileStream fontStream = new FileStream(Path.Combine(Path.GetDirectoryName(inputTemplate), \u0022semibold.otf\u0022), FileMode.Create, FileAccess.ReadWrite);\r\n            SKStreamAsset stream = typeface.OpenStream();\r\n            if (stream != null \u0026\u0026 stream.Length \u003E 0)\r\n            {\r\n                Console.WriteLine(\u0022stream is not null\u0022);\r\n                byte[] fontData = new byte[stream.Length - 1];\r\n                stream.Read(fontData, stream.Length);\r\n                MemoryStream m_stream = new MemoryStream(fontData);\r\n                CreatePDF(m_stream, inputTemplate);\r\n                Console.WriteLine(m_stream.Length);\r\n                m_stream.WriteTo(fontStream);\r\n                fontStream.Flush();\r\n                SKTypeface sKTypeface = SKTypeface.FromStream(stream);\r\n                Console.WriteLine(sKTypeface.FamilyName);\r\n                stream.Dispose();\r\n                m_stream.Dispose();\r\n            }\r\n\r\n        internal static SKTypeface GetTypeface(string fontName, SKTypefaceStyle style)\r\n        {\r\n            SKFontStyleWeight sKFontStyleWeight = SKFontStyleWeight.Normal;\r\n            SKFontStyleSlant sKFontStyleSlant = SKFontStyleSlant.Upright;\r\n            SKFontStyleWidth sKFontStyleWidth = SKFontStyleWidth.Normal;\r\n            string actualFontName = fontName;\r\n            System.Diagnostics.Debug.WriteLine(fontName);\r\n            if (style == SKTypefaceStyle.Italic || style == SKTypefaceStyle.BoldItalic || fontName.Contains(\u0022Italic\u0022) || fontName.Contains(\u0022It\u0022))\r\n            {\r\n                sKFontStyleSlant = SKFontStyleSlant.Italic;\r\n                if (fontName.Contains(\u0022Italic\u0022))\r\n                    fontName = fontName.Replace(\u0022Italic\u0022, string.Empty).Trim();\r\n                else if (fontName.Contains(\u0022It\u0022))\r\n                    fontName = fontName.Replace(\u0022It\u0022, string.Empty).Trim();\r\n            }\r\n\r\n            if (style == SKTypefaceStyle.Bold || style == SKTypefaceStyle.BoldItalic||fontName.Contains(\u0022Bold\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.Bold;\r\n                if (fontName.Contains(\u0022Bold\u0022))\r\n                    fontName = fontName.Replace(\u0022Bold\u0022, string.Empty).Trim();\r\n            }\r\n\r\n            if (fontName.Contains(\u0022Semibold\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.SemiBold;\r\n                fontName = fontName.Replace(\u0022Semibold\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Extra Bold\u0022) || fontName.Contains(\u0022Ultra Bold\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.ExtraBold;\r\n                if (fontName.Contains(\u0022Extra Bold\u0022))\r\n                    fontName = fontName.Replace(\u0022Extra Bold\u0022, string.Empty).Trim();\r\n                else\r\n                    fontName = fontName.Replace(\u0022Ultra Bold\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Medium\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.Medium;\r\n                fontName = fontName.Replace(\u0022Medium\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022UltraLight\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.ExtraLight;\r\n                fontName = fontName.Replace(\u0022UltraLight\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Regular\u0022))\r\n            {\r\n                fontName = fontName.Replace(\u0022Regular\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022 Light\u0022) || fontName.Contains(\u0022Semilight\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.Light;\r\n                if (fontName.Contains(\u0022 Light\u0022))\r\n                    fontName = fontName.Replace(\u0022Light\u0022, string.Empty).Trim();\r\n                else\r\n                    fontName = fontName.Replace(\u0022Semilight\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Extra Light\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.ExtraLight;\r\n                fontName = fontName.Replace(\u0022Extra Light\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Black\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.Black;\r\n                fontName = fontName.Replace(\u0022Black\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Extra Black\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.ExtraBlack;\r\n                fontName = fontName.Replace(\u0022Extra Black\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Heavy\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.ExtraBold;\r\n                fontName = fontName.Replace(\u0022Heavy\u0022, string.Empty).Trim();\r\n            }\r\n            if (fontName.Contains(\u0022Condensed\u0022) || fontName.Contains(\u0022Cond\u0022) || fontName.Contains(\u0022Cn\u0022))\r\n            {\r\n                sKFontStyleWidth = SKFontStyleWidth.Condensed;\r\n                if (fontName.Contains(\u0022Condensed\u0022))\r\n                    fontName = fontName.Replace(\u0022Condensed\u0022, string.Empty).Trim();\r\n                else if (fontName.Contains(\u0022Cn\u0022))\r\n                    fontName = fontName.Replace(\u0022Cn\u0022, string.Empty).Trim();\r\n                else\r\n                    fontName = fontName.Replace(\u0022Cond\u0022, string.Empty).Trim();\r\n            }\r\n            else if (fontName.Contains(\u0022Thin\u0022))\r\n            {\r\n                sKFontStyleWeight = SKFontStyleWeight.Thin;\r\n                fontName = fontName.Replace(\u0022Thin\u0022, string.Empty).Trim();\r\n            }\r\n            SKTypeface typeface = SKTypeface.FromFamilyName(actualFontName, sKFontStyleWeight, sKFontStyleWidth, sKFontStyleSlant);\r\n            //No need to trim the font name if the valid font was created with full name.\r\n            if (typeface != null \u0026\u0026 typeface.FamilyName == actualFontName)\r\n            {\r\n                Console.WriteLine(actualFontName \u002B \u0022 - \u0022 \u002B typeface.FamilyName \u002B \u0022-\u0022 \u002B sKFontStyleWeight.ToString() \u002B \u0022-\u0022 \u002B sKFontStyleWidth.ToString() \u002B \u0022-\u0022 \u002B sKFontStyleSlant.ToString());\r\n                return typeface;\r\n            }\r\n                \r\n            typeface = SKTypeface.FromFamilyName(fontName, sKFontStyleWeight, sKFontStyleWidth, sKFontStyleSlant);\r\n            // When a font name and typeface family name are mismatch, we check that font name are present in the embedded font name.\r\n            // if font name match with embedded font name and we create typeface from the embedded font stream.\r\n            Console.WriteLine(actualFontName \u002B \u0022 - \u0022 \u002B typeface.FamilyName \u002B \u0022-\u0022 \u002B sKFontStyleWeight.ToString()\u002B\u0022-\u0022\u002B sKFontStyleWidth.ToString()\u002B\u0022-\u0022\u002B sKFontStyleSlant.ToString());\r\n\r\n            return typeface;\r\n        }\r\n\r\n**Expected Behavior**\r\n\r\nThe create font should contain font name \u0022Euclid Flex Semibold\u0022\r\n\r\n**Actual Behavior**\r\nThe create font name is \u0022Euclid Flex Semibolditalic\u0022\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  1.68.1.1\r\n- IDE:  Visual studio 2019\r\n- Platform Target Frameworks: .Net core 3.0\r\n  - Docker: 2.2.0.5\r\n\r\n\r\n**Reproduction Link**\r\n\r\nRun the code sample in docker environment and check the generated font to reproduce the issue.\r\n",
  "author": {
    "login": "Jack-Paul",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2020-05-08T14:44:33",
  "updatedAt": "2021-12-17T07:03:25",
  "commentCount": 9,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T21:00:45.5061244Z",
    "reactions": [],
    "comments": [
      {
        "id": 625859542,
        "author": "Gillibald",
        "createdAt": "2020-05-08T15:04:18",
        "reactions": []
      },
      {
        "id": 628641691,
        "author": "Jack-Paul",
        "createdAt": "2020-05-14T13:39:00",
        "reactions": []
      },
      {
        "id": 629003176,
        "author": "mattleibow",
        "createdAt": "2020-05-15T03:19:11",
        "reactions": []
      },
      {
        "id": 633824001,
        "author": "Jack-Paul",
        "createdAt": "2020-05-26T06:02:31",
        "reactions": []
      },
      {
        "id": 652207593,
        "author": "ManikandanRavichandranSync",
        "createdAt": "2020-07-01T05:53:36",
        "reactions": []
      },
      {
        "id": 708062982,
        "author": "mattleibow",
        "createdAt": "2020-10-13T23:25:51",
        "reactions": []
      },
      {
        "id": 720645537,
        "author": "ManikandanRavichandranSync",
        "createdAt": "2020-11-02T18:24:46",
        "reactions": []
      },
      {
        "id": 759404915,
        "author": "ManikandanRavichandranSync",
        "createdAt": "2021-01-13T12:03:41",
        "reactions": []
      },
      {
        "id": 996485051,
        "author": "ManikandanRavichandranSync",
        "createdAt": "2021-12-17T07:03:25",
        "reactions": []
      }
    ]
  }
}