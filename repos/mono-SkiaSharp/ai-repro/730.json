{
  "meta": {
    "schemaVersion": "2.0",
    "number": 730,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-12T00:27:29Z"
  },
  "conclusion": "needs-platform",
  "notes": "This bug requires Windows with UWP (Universal Windows Platform) and the ANGLE OpenGL ES emulation layer. The crash occurs in SkiaSharp.Views.UWP.AngleSwapChainPanel.EnsureRenderSurface() when a parent Xamarin.Forms view is rotated via ViewExtensions.RotateYTo, causing the EGL surface to become invalid. The entire reproduction stack — SKGLView on UWP, AngleSwapChainPanel, GlesContext, SwapChainPanel composition events, and Xamarin.Forms UWP — is unavailable on macOS. The relevant source code (AngleSwapChainPanel.cs, GlesContext.cs) exists in the SkiaSharp codebase under SkiaSharp.Views.WinUI, confirming this is a real code path but one that can only execute on Windows.",
  "assessment": "likely-bug",
  "reproductionTime": "~5 minutes",
  "versionResults": [
    {
      "version": "1.68.0-preview28",
      "source": "nuget",
      "result": "not-tested",
      "notes": "Reporter's version. Cannot test — requires UWP on Windows."
    },
    {
      "version": "main (source)",
      "source": "source",
      "result": "not-tested",
      "notes": "Cannot test — bug is in UWP-specific ANGLE/EGL surface management code that only runs on Windows."
    }
  ],
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Analyze issue requirements: SKGLView exception on UWP when parent view is rotated with ViewExtensions.RotateYTo. Requires Xamarin.Forms UWP app with ANGLE OpenGL ES backend (AngleSwapChainPanel).",
      "layer": "setup"
    },
    {
      "stepNumber": 2,
      "description": "Check current platform — macOS arm64. UWP apps cannot run on macOS. The AngleSwapChainPanel and GlesContext classes require Windows ANGLE/EGL and UWP SwapChainPanel APIs.",
      "layer": "setup",
      "command": "uname -ms && sw_vers",
      "exitCode": 0,
      "output": "Darwin arm64\nProductName: macOS\nProductVersion: 26.2",
      "result": "success"
    },
    {
      "stepNumber": 3,
      "description": "Verify that the ANGLE/EGL surface management code exists in the codebase. AngleSwapChainPanel.cs and GlesContext.cs are present under SkiaSharp.Views.WinUI, confirming the code path is real but Windows-only.",
      "layer": "csharp",
      "command": "find source/SkiaSharp.Views/SkiaSharp.Views.WinUI -name 'AngleSwapChainPanel.cs' -o -name 'GlesContext.cs'",
      "exitCode": 0,
      "output": "source/SkiaSharp.Views/SkiaSharp.Views.WinUI/GlesInterop/GlesContext.cs\nsource/SkiaSharp.Views/SkiaSharp.Views.WinUI/AngleSwapChainPanel.cs",
      "result": "success"
    },
    {
      "stepNumber": 4,
      "description": "Confirm that Xamarin.Forms UWP tooling is unavailable on macOS. UWP development requires Windows and Visual Studio with UWP workload. No Docker workaround exists for UWP apps.",
      "layer": "deployment",
      "result": "skip"
    }
  ],
  "errorMessages": {
    "primaryError": "System.Exception: Failed to create EGL surface (reported by user — not reproduced locally)",
    "stackTrace": "System.Exception: Failed to create EGL surface\n   at SkiaSharp.Views.GlesInterop.GlesContext.CreateSurface(SwapChainPanel panel, Nullable`1 renderSurfaceSize, Nullable`1 resolutionScale)\n   at SkiaSharp.Views.UWP.AngleSwapChainPanel.EnsureRenderSurface()\n   at SkiaSharp.Views.UWP.AngleSwapChainPanel.OnCompositionChanged(SwapChainPanel sender, Object args)"
  },
  "environment": {
    "os": "macOS 26.2",
    "arch": "arm64",
    "dotnetVersion": "8.0.417",
    "skiaSharpVersion": "1.68.0-preview28 (reporter's version, not tested)",
    "dockerUsed": false
  },
  "blockers": [
    "Requires Windows OS — UWP (Universal Windows Platform) apps can only run on Windows. Current environment is macOS arm64.",
    "Requires ANGLE/EGL OpenGL ES emulation — AngleSwapChainPanel and GlesContext use Windows-specific ANGLE bindings to provide OpenGL ES on UWP via DirectX. This cannot be emulated on macOS or in Docker.",
    "Requires Xamarin.Forms UWP — the SKGLView and ViewExtensions.RotateYTo interaction is specific to Xamarin.Forms UWP rendering pipeline, which has no macOS equivalent.",
    "No Docker workaround — UWP apps require Windows desktop with GUI; they cannot run in Linux containers."
  ]
}
