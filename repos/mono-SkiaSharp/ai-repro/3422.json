{
  "meta": {
    "schemaVersion": "1.0",
    "number": 3422,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-13T15:35:00Z"
  },
  "inputs": {
    "triageFile": "ai-triage/3422.json"
  },
  "conclusion": "not-reproduced",
  "assessment": "likely-bug",
  "notes": "Could not reproduce on macOS arm64 with .NET SDK 10.0.102 and wasm-tools workload 10.0.102/10.0.100. Tested SkiaSharp 3.119.2-preview.1 (reporter's version) and 3.119.1 (latest stable) — both build and render successfully in the browser with no TypeInitializationException or DllNotFoundException. The reporter was on an earlier .NET 10 preview SDK (Nov 2025) and some commenters report the issue persists on macOS. The discrepancy may be due to SDK version differences — the issue was reported when .NET 10 was in early preview. The wasm-tools workload is confirmed installed and functional in the test environment. Human review recommended given multiple user confirmations in the issue thread.",
  "scope": "unknown",
  "reproductionTime": "~15 minutes",
  "versionResults": [
    {
      "version": "3.119.2-preview.1",
      "source": "nuget",
      "result": "not-reproduced",
      "notes": "Build succeeded, runtime rendering works (SUCCESS: rendered 1600x1200), no browser console errors. Tested both with and without WasmBuildNative.",
      "platform": "wasm-blazor"
    },
    {
      "version": "3.119.1",
      "source": "nuget",
      "result": "not-reproduced",
      "notes": "Build succeeded, runtime rendering works (SUCCESS: rendered 1600x1200), no browser console errors.",
      "platform": "wasm-blazor"
    }
  ],
  "reproProject": {
    "type": "blazorwasm",
    "tfm": "net10.0",
    "packages": [
      {
        "name": "SkiaSharp.Views.Blazor",
        "version": "3.119.2-preview.1"
      },
      {
        "name": "Microsoft.AspNetCore.Components.WebAssembly",
        "version": "10.0.2"
      }
    ]
  },
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Create Blazor WASM project targeting net10.0 and add SkiaSharp.Views.Blazor 3.119.2-preview.1",
      "layer": "setup",
      "command": "dotnet new blazorwasm -n Repro --framework net10.0 && cd Repro && dotnet add package SkiaSharp.Views.Blazor --version 3.119.2-preview.1",
      "exitCode": 0,
      "output": "Restore succeeded.\nPackageReference for package 'SkiaSharp.Views.Blazor' version '3.119.2-preview.1' added.",
      "filesCreated": [
        {
          "filename": "Repro.csproj",
          "description": "Blazor WASM project file matching reporter's configuration (net10.0, no WasmBuildNative)",
          "content": "<Project Sdk=\"Microsoft.NET.Sdk.BlazorWebAssembly\">\n  <PropertyGroup>\n    <TargetFramework>net10.0</TargetFramework>\n    <Nullable>enable</Nullable>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <OverrideHtmlAssetPlaceholders>true</OverrideHtmlAssetPlaceholders>\n  </PropertyGroup>\n  <ItemGroup>\n    <PackageReference Include=\"Microsoft.AspNetCore.Components.WebAssembly\" Version=\"10.0.2\" />\n    <PackageReference Include=\"Microsoft.AspNetCore.Components.WebAssembly.DevServer\" Version=\"10.0.2\" PrivateAssets=\"all\" />\n    <PackageReference Include=\"SkiaSharp.Views.Blazor\" Version=\"3.119.2-preview.1\" />\n  </ItemGroup>\n</Project>"
        },
        {
          "filename": "Pages/Home.razor",
          "description": "Razor component with SKCanvasView matching reporter's code",
          "content": "@page \"/\"\n@using SkiaSharp\n@using SkiaSharp.Views.Blazor\n\n<h1>SkiaSharp WASM Test</h1>\n<SKCanvasView OnPaintSurface=\"OnPaintSurface\" style=\"width:800px;height:600px;\" />\n\n@code {\n    private void OnPaintSurface(SKPaintSurfaceEventArgs e)\n    {\n        var canvas = e.Surface.Canvas;\n        canvas.Clear(SKColors.White);\n        using var paint = new SKPaint\n        {\n            Color = SKColors.Black,\n            IsAntialias = true,\n            Style = SKPaintStyle.Fill\n        };\n        using var font = new SKFont { Size = 24 };\n        var coord = new SKPoint(e.Info.Width / 2, (e.Info.Height + font.Size) / 2);\n        canvas.DrawText(\"SkiaSharp\", coord, font, paint);\n        Console.WriteLine($\"SUCCESS: rendered {e.Info.Width}x{e.Info.Height}\");\n    }\n}"
        }
      ],
      "result": "success"
    },
    {
      "stepNumber": 2,
      "description": "Build Blazor WASM project (without WasmBuildNative, matching reporter's config)",
      "layer": "deployment",
      "command": "dotnet build",
      "exitCode": 0,
      "output": "Build succeeded.\n    0 Warning(s)\n    0 Error(s)\nTime Elapsed 00:00:05.82",
      "result": "success"
    },
    {
      "stepNumber": 3,
      "description": "Serve the app and verify rendering in browser via Playwright",
      "layer": "deployment",
      "command": "dotnet run --urls http://localhost:5112 --no-build",
      "exitCode": 0,
      "output": "Browser loaded page successfully. Console output: 'SUCCESS: rendered 1600x1200'. Page snapshot shows 'SkiaSharp WASM Test' heading and rendered canvas. Zero browser console errors.",
      "result": "success"
    },
    {
      "stepNumber": 4,
      "description": "Rebuild with WasmBuildNative=true to test both configurations",
      "layer": "deployment",
      "command": "dotnet build (with <WasmBuildNative>true</WasmBuildNative> in .csproj)",
      "exitCode": 0,
      "output": "Build succeeded. WASM native compilation completed (_WasmCompileNativeSourceFiles, _BrowserWasmLinkDotNet). Time Elapsed 00:00:07.80",
      "result": "success"
    },
    {
      "stepNumber": 5,
      "description": "Serve WasmBuildNative=true build and verify rendering in browser",
      "layer": "deployment",
      "command": "dotnet run --urls http://localhost:5111 --no-build",
      "exitCode": 0,
      "output": "Browser loaded page successfully. Console output: 'SUCCESS: rendered 1600x1200'. Zero browser console errors.",
      "result": "success"
    },
    {
      "stepNumber": 6,
      "description": "Test with SkiaSharp.Views.Blazor 3.119.1 (latest stable) in fresh project",
      "layer": "deployment",
      "command": "dotnet new blazorwasm -n Repro --framework net10.0 && dotnet add package SkiaSharp.Views.Blazor --version 3.119.1 && dotnet build && dotnet run --urls http://localhost:5113",
      "exitCode": 0,
      "output": "Build succeeded. Browser loaded page successfully. Console output: 'SUCCESS: rendered 1600x1200'. Zero browser console errors.",
      "result": "success"
    }
  ],
  "environment": {
    "os": "macOS 26.2",
    "arch": "arm64",
    "dotnetVersion": "10.0.2",
    "dotnetSdkVersion": "10.0.102",
    "wasmToolsVersion": "10.0.102/10.0.100",
    "skiaSharpVersion": "3.119.2-preview.1",
    "dockerUsed": false
  },
  "feedback": {
    "triageCorrections": [
      {
        "topic": "fixStatus",
        "upstream": "PR #3514 (open, not merged) is required for .NET 10 support — likelyFixed: false",
        "corrected": "SkiaSharp works on .NET 10 WASM with SDK 10.0.102 and wasm-tools workload without PR #3514. The issue may have been specific to early .NET 10 preview SDKs."
      }
    ]
  },
  "output": {
    "actionability": {
      "suggestedAction": "request-info",
      "confidence": 0.75,
      "reason": "Could not reproduce on macOS arm64 with .NET SDK 10.0.102 and wasm-tools workload installed. Multiple users confirm the issue but our environment (stable .NET 10 SDK) works. Need to determine if the issue persists on current stable SDK or was specific to early .NET 10 previews."
    },
    "workarounds": [
      "Ensure wasm-tools workload is installed: dotnet workload install wasm-tools",
      "Update to .NET SDK 10.0.102 or later (issue may have been fixed in newer SDK releases)"
    ],
    "missingInfo": [
      "Exact .NET SDK version (output of 'dotnet --info' run OUTSIDE any repo with global.json)",
      "Output of 'dotnet workload list' showing installed workloads",
      "Whether the issue persists with .NET SDK 10.0.102 (current stable)"
    ],
    "proposedResponse": {
      "status": "needs-human-edit",
      "summary": "Unable to reproduce with current .NET 10 SDK — requesting environment details from reporters still affected",
      "body": "Thanks for reporting this, and thanks to everyone in the thread for the additional data points.\n\nWe attempted to reproduce this on **macOS arm64** with **.NET SDK 10.0.102** and the `wasm-tools` workload installed (version 10.0.102/10.0.100). We tested both SkiaSharp **3.119.2-preview.1** and **3.119.1** — both build and render successfully in the browser with no `TypeInitializationException` or `DllNotFoundException`.\n\n**Tested configurations:**\n| Version | WasmBuildNative | Result |\n|---------|----------------|--------|\n| 3.119.2-preview.1 | ❌ No | ✅ Works |\n| 3.119.2-preview.1 | ✅ Yes | ✅ Works |\n| 3.119.1 | ❌ No | ✅ Works |\n\nThis issue was originally reported in November 2025 when .NET 10 was in early preview. It's possible the root cause was in the .NET 10 preview SDK or wasm-tools workload and has since been fixed.\n\nFor those still experiencing this issue, could you please share:\n1. The exact output of `dotnet --info` (run **outside** any repo that has a `global.json` file)\n2. The output of `dotnet workload list`\n3. Whether running `dotnet workload install wasm-tools` (or `dotnet workload restore`) resolves the issue\n\nIf the issue persists on the current stable .NET 10 SDK (10.0.102+), we'd like to investigate further."
    },
    "actions": [
      {
        "type": "add-comment",
        "description": "Request updated environment details from reporters still experiencing the issue",
        "risk": "medium",
        "confidence": 0.75
      },
      {
        "type": "update-labels",
        "description": "Remove incorrect os/Windows-Universal-UWP label — this is a WASM issue, not UWP",
        "risk": "low",
        "confidence": 0.95,
        "labels": [
          "type/bug",
          "area/SkiaSharp.Views.Blazor",
          "os/WASM",
          "tenet/reliability"
        ]
      }
    ]
  }
}
