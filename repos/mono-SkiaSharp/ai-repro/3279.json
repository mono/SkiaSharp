{
  "meta": {
    "schemaVersion": "1.0",
    "number": 3279,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-11T23:55:00Z"
  },
  "conclusion": "not-reproduced",
  "notes": "This is not a bug — it is an expected API migration from SkiaSharp 2.x to 3.x. The old static methods (MakeIdentity, MakeTranslation, MakeScale, MakeRotation, PostConcat with ref) were marked [Obsolete] in 2.88.9 and fully removed in 3.x. The replacement APIs (CreateIdentity, CreateTranslation, CreateScale, CreateRotation, instance PostConcat) all work correctly in 3.119.0 and on main. The obsolete warnings in 2.88.9 already pointed to the correct replacements.",
  "reproductionTime": "~5 minutes",
  "triageFile": null,
  "triageNotes": null,
  "versionResults": [
    {
      "version": "2.88.9",
      "source": "nuget",
      "result": "not-reproduced",
      "notes": "Old APIs compile with [Obsolete] warnings but work. The warnings name the replacement APIs."
    },
    {
      "version": "3.119.0",
      "source": "nuget",
      "result": "not-reproduced",
      "notes": "Old APIs removed (compiler errors CS0117/CS1501 as reported). New Create*/instance PostConcat APIs work correctly. This is expected behavior — API was intentionally renamed."
    },
    {
      "version": "main (source)",
      "source": "source",
      "result": "not-reproduced",
      "notes": "All 20 SKMatrixTest tests pass. CreateTranslation, CreateScale, CreateRotation, CreateIdentity all present in source."
    }
  ],
  "reproProject": {
    "type": "console",
    "tfm": "net8.0",
    "packages": [
      { "name": "SkiaSharp", "version": "3.119.0" }
    ]
  },
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Create console project with SkiaSharp 3.119.0 and attempt to build using old 2.x API patterns (MakeIdentity, MakeTranslation, MakeScale, MakeRotation, PostConcat with ref)",
      "layer": "setup",
      "command": "dotnet new console -n Repro --framework net8.0 && dotnet add package SkiaSharp --version 3.119.0",
      "output": "Restore succeeded.",
      "filesCreated": [
        {
          "filename": "Program.cs",
          "description": "Reproduction code using old 2.x SKMatrix API patterns that the reporter says don't compile in 3.x",
          "content": "using SkiaSharp;\n\nvar center = new SKPoint(100, 100);\nfloat scale = 2.0f;\nfloat angle = 45.0f;\nfloat width = 800, height = 600;\n\n// Old 2.x APIs:\nvar matrix = SKMatrix.MakeIdentity();\nvar translation = SKMatrix.MakeTranslation(width / 2.0f, height / 2.0f);\nvar scaleMatrix = SKMatrix.MakeScale(scale, scale, center.X, center.Y);\nvar rotation = SKMatrix.MakeRotation(angle, center.X, center.Y);\nSKMatrix.PostConcat(ref matrix, translation);\n\nConsole.WriteLine($\"Matrix: ScaleX={matrix.ScaleX}, TransX={matrix.TransX}\");"
        }
      ],
      "result": "success"
    },
    {
      "stepNumber": 2,
      "description": "Build with old 2.x API patterns — confirms the reporter's compiler errors (CS0117 for MakeIdentity/MakeTranslation/MakeScale/MakeRotation, CS1501 for PostConcat)",
      "layer": "csharp",
      "command": "dotnet build",
      "output": "error CS0117: 'SKMatrix' does not contain a definition for 'MakeIdentity'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeTranslation'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeScale'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeRotation'\nBuild failed with 4 error(s)",
      "filesCreated": null,
      "result": "success"
    },
    {
      "stepNumber": 3,
      "description": "Replace old API calls with 3.x equivalents (CreateIdentity, CreateTranslation, CreateScale, CreateRotation, instance PostConcat) and verify they work correctly",
      "layer": "csharp",
      "command": "dotnet run",
      "output": "1. Identity: ScaleX=1, ScaleY=1 (expected 1,1)\n2. CreateTranslation: TransX=400, TransY=300 (expected 400,300)\n3. CreateScale: ScaleX=2, ScaleY=2 (expected 2,2)\n4. CreateRotation: ScaleX=0.5253 (expected cos(45)≈0.5253)\n5. PostConcat: TransX=400, TransY=300 (expected 400,300)\n\nAll 3.x API equivalents work correctly.\nSkiaSharp version: 3.119.0.0",
      "filesCreated": [
        {
          "filename": "Program.cs",
          "description": "Updated code using correct 3.x API equivalents — all produce identical results to the 2.x APIs",
          "content": "using SkiaSharp;\n\nvar center = new SKPoint(100, 100);\nfloat scale = 2.0f;\nfloat angle = 45.0f;\nfloat width = 800, height = 600;\n\n// New 3.x APIs:\nvar matrix = SKMatrix.Identity;\nvar translation = SKMatrix.CreateTranslation(width / 2.0f, height / 2.0f);\nvar scaleMatrix = SKMatrix.CreateScale(scale, scale, center.X, center.Y);\nvar rotation = SKMatrix.CreateRotation(angle, center.X, center.Y);\nmatrix = matrix.PostConcat(translation);\n\nConsole.WriteLine($\"Matrix: ScaleX={matrix.ScaleX}, TransX={matrix.TransX}\");"
        }
      ],
      "result": "success"
    },
    {
      "stepNumber": 4,
      "description": "Verify old APIs work with SkiaSharp 2.88.9 (reporter's 'last known good' version) — confirms they were already marked [Obsolete] with replacement guidance",
      "layer": "csharp",
      "command": "dotnet add package SkiaSharp --version 2.88.9 && dotnet run",
      "output": "warning CS0618: 'SKMatrix.MakeIdentity()' is obsolete: 'Use CreateIdentity() instead.'\nwarning CS0618: 'SKMatrix.MakeTranslation(float, float)' is obsolete: 'Use CreateTranslation(float, float) instead.'\nwarning CS0618: 'SKMatrix.MakeScale(float, float, float, float)' is obsolete: 'Use CreateScale(float, float, float, float) instead.'\nwarning CS0618: 'SKMatrix.MakeRotation(float, float, float)' is obsolete: 'Use CreateRotation(float, float, float) instead.'\nwarning CS0618: 'SKMatrix.PostConcat(ref SKMatrix, SKMatrix)' is obsolete: 'Use PostConcat(SKMatrix) instead.'\n\nAll 2.x APIs work. Version: 2.88.0.0",
      "filesCreated": null,
      "result": "success"
    },
    {
      "stepNumber": 5,
      "description": "Run all 20 SKMatrix tests on main branch (source build) to confirm matrix APIs are working correctly",
      "layer": "csharp",
      "command": "dotnet test tests/SkiaSharp.Tests.Console/SkiaSharp.Tests.Console.csproj --no-build --filter \"FullyQualifiedName~SKMatrixTest\"",
      "output": "Passed!  - Failed: 0, Passed: 20, Skipped: 0, Total: 20, Duration: 6 ms",
      "filesCreated": null,
      "result": "success"
    }
  ],
  "artifacts": null,
  "errorMessages": null,
  "environment": {
    "os": "macOS 26.2",
    "arch": "arm64",
    "dotnetVersion": "10.0.102",
    "skiaSharpVersion": "3.119.0",
    "dockerUsed": false
  },
  "blockers": null
}
