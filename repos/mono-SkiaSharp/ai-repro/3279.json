{
  "meta": {
    "schemaVersion": "1.0",
    "number": 3279,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-12T00:18:00Z"
  },
  "conclusion": "reproduced",
  "notes": "Reproduced all 5 compiler errors as reported. SKMatrix.MakeIdentity(), MakeTranslation(), MakeScale(), MakeRotation() were renamed to CreateIdentity()/Identity, CreateTranslation(), CreateScale(), CreateRotation() in SkiaSharp 3.x. The static PostConcat(ref SKMatrix, SKMatrix) was changed to an instance method PostConcat(SKMatrix). These APIs were marked [Obsolete] in v2.88.9 with migration guidance before removal in v3.x. This is an intentional breaking change, not a regression.",
  "assessment": "breaking-change",
  "versionResults": [
    {
      "version": "2.88.9",
      "source": "nuget",
      "result": "not-reproduced",
      "notes": "All 5 APIs compile and run successfully. Each shows CS0618 obsolete warning with migration guidance (e.g., 'Use CreateIdentity() instead')."
    },
    {
      "version": "3.119.0",
      "source": "nuget",
      "result": "reproduced",
      "notes": "All 5 APIs fail with CS0117 or CS1501 compiler errors as reported."
    },
    {
      "version": "main (source)",
      "source": "source",
      "result": "reproduced",
      "notes": "Make* APIs are completely removed from SKMatrix.cs on main. The replacement Create* APIs and instance PostConcat() work correctly — all 20 SKMatrix tests pass."
    }
  ],
  "reproProject": {
    "type": "console",
    "tfm": "net8.0",
    "packages": [
      {
        "name": "SkiaSharp",
        "version": "3.119.0"
      }
    ]
  },
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Create standalone console project and add SkiaSharp 3.119.0",
      "layer": "setup",
      "command": "dotnet new console -n Repro --framework net8.0 && cd Repro && dotnet add package SkiaSharp --version 3.119.0",
      "result": "success",
      "exitCode": 0,
      "output": "PackageReference for package 'SkiaSharp' version '3.119.0' added."
    },
    {
      "stepNumber": 2,
      "description": "Write reproduction code using all 5 reported v2 APIs: MakeIdentity, MakeTranslation, MakeScale, MakeRotation, PostConcat(ref,matrix)",
      "layer": "setup",
      "filesCreated": [
        {
          "filename": "Program.cs",
          "description": "Reproduction code exercising all 5 reported failing APIs",
          "content": "using SkiaSharp;\n\n// Test all 5 reported API issues from issue #3279\nSKMatrix matrix = SKMatrix.MakeIdentity();\nvar translation = SKMatrix.MakeTranslation(100f, 200f);\nvar scale = SKMatrix.MakeScale(2.0f, 2.0f, 50f, 50f);\nvar rotation = SKMatrix.MakeRotation(0.5f, 50f, 50f);\nSKMatrix.PostConcat(ref matrix, translation);\nConsole.WriteLine($\"Matrix: [{matrix.ScaleX}, {matrix.SkewX}, {matrix.TransX}]\");\nConsole.WriteLine(\"All operations succeeded.\");"
        }
      ]
    },
    {
      "stepNumber": 3,
      "description": "Build with SkiaSharp 3.119.0 — all 4 Make* APIs fail with CS0117",
      "layer": "csharp",
      "command": "dotnet build",
      "result": "failure",
      "exitCode": 1,
      "output": "error CS0117: 'SKMatrix' does not contain a definition for 'MakeIdentity'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeTranslation'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeScale'\nerror CS0117: 'SKMatrix' does not contain a definition for 'MakeRotation'\nBuild failed with 4 error(s)"
    },
    {
      "stepNumber": 4,
      "description": "Test PostConcat 2-arg overload separately (first 4 errors prevented reaching it). Used v3 Identity/CreateTranslation but v2 PostConcat(ref, matrix) call.",
      "layer": "csharp",
      "command": "dotnet build",
      "result": "failure",
      "exitCode": 1,
      "output": "error CS1501: No overload for method 'PostConcat' takes 2 arguments"
    },
    {
      "stepNumber": 5,
      "description": "Switch to SkiaSharp 2.88.9 and build — all APIs compile with obsolete warnings",
      "layer": "csharp",
      "command": "dotnet remove package SkiaSharp && dotnet add package SkiaSharp --version 2.88.9 && dotnet build",
      "result": "success",
      "exitCode": 0,
      "output": "warning CS0618: 'SKMatrix.MakeIdentity()' is obsolete: 'Use CreateIdentity() instead.'\nwarning CS0618: 'SKMatrix.MakeTranslation(float, float)' is obsolete: 'Use CreateTranslation(float, float) instead.'\nwarning CS0618: 'SKMatrix.MakeScale(float, float, float, float)' is obsolete: 'Use CreateScale(float, float, float, float) instead.'\nwarning CS0618: 'SKMatrix.MakeRotation(float, float, float)' is obsolete: 'Use CreateRotation(float, float, float) instead.'\nwarning CS0618: 'SKMatrix.PostConcat(ref SKMatrix, SKMatrix)' is obsolete: 'Use PostConcat(SKMatrix) instead.'\nBuild succeeded."
    },
    {
      "stepNumber": 6,
      "description": "Run with SkiaSharp 2.88.9 — all APIs produce correct output",
      "layer": "csharp",
      "command": "dotnet run",
      "result": "success",
      "exitCode": 0,
      "output": "Matrix: [1, 0, 100, 0, 1, 200, 0, 0, 1]\nAll operations succeeded."
    },
    {
      "stepNumber": 7,
      "description": "Verify on main branch — Make* APIs removed, Create* equivalents and instance PostConcat work. 20 SKMatrix tests pass.",
      "layer": "csharp",
      "command": "dotnet test tests/SkiaSharp.Tests.Console/SkiaSharp.Tests.Console.csproj --no-build --filter 'FullyQualifiedName~SKMatrixTest'",
      "result": "success",
      "exitCode": 0,
      "output": "Passed! - Failed: 0, Passed: 20, Skipped: 0, Total: 20"
    }
  ],
  "errorMessages": {
    "primaryError": "CS0117: 'SKMatrix' does not contain a definition for 'MakeIdentity'/'MakeTranslation'/'MakeScale'/'MakeRotation'; CS1501: No overload for method 'PostConcat' takes 2 arguments",
    "additionalErrors": [
      "CS0117: 'SKMatrix' does not contain a definition for 'MakeTranslation'",
      "CS0117: 'SKMatrix' does not contain a definition for 'MakeScale'",
      "CS0117: 'SKMatrix' does not contain a definition for 'MakeRotation'",
      "CS1501: No overload for method 'PostConcat' takes 2 arguments"
    ]
  },
  "environment": {
    "os": "macOS",
    "arch": "arm64",
    "dotnetVersion": "8.0.417",
    "skiaSharpVersion": "3.119.0",
    "dockerUsed": false
  }
}
