{
  "meta": {
    "schemaVersion": "1.0",
    "number": 533,
    "repo": "mono/SkiaSharp",
    "analyzedAt": "2026-02-13T15:55:00Z"
  },
  "inputs": {
    "triageFile": "ai-triage/533.json"
  },
  "conclusion": "needs-platform",
  "assessment": "likely-bug",
  "notes": "Issue #533 reports uncapped framerates (300-1200+ FPS) on Android SKGLView when HasRenderLoop is enabled, caused by the switch from GLSurfaceView (which internally uses eglSwapInterval for VSync) to GLTextureView (which does not) in SkiaSharp 1.60.1. This is a runtime behavior observable only on Android with OpenGL rendering. A MAUI project with SKGLView and FPS measurement code was created and successfully built for net10.0-android, but cannot be run — no Android emulator or physical device is available in the current environment. The maintainer confirmed the root cause in issue comments and noted seeing 1.2K FPS in emulators. Multiple community members confirmed the issue on various devices (140 FPS on Moto g6, 230 FPS on Galaxy Note 3). The GLTextureView code remains in the current codebase and still does not call eglSwapInterval, so the bug is almost certainly still present.",
  "scope": "platform-specific/android",
  "reproductionTime": "~8 minutes",
  "versionResults": [
    {
      "version": "3.119.0-preview.1.2",
      "source": "nuget",
      "result": "not-tested",
      "notes": "MAUI project with SKGLView built successfully for net10.0-android but could not be run — no Android emulator or device available.",
      "platform": "host-macos-arm64"
    }
  ],
  "reproProject": {
    "type": "maui",
    "tfm": "net10.0-android",
    "packages": [
      {
        "name": "SkiaSharp.Views.Maui.Controls",
        "version": "3.119.0-preview.1.2"
      }
    ]
  },
  "reproductionSteps": [
    {
      "stepNumber": 1,
      "description": "Create MAUI project for Android FPS reproduction test",
      "layer": "setup",
      "command": "dotnet new maui -n Repro && cd Repro && dotnet add package SkiaSharp.Views.Maui.Controls --version 3.119.0-preview.1.2",
      "exitCode": 0,
      "output": "Restore succeeded.\nPackageReference for package 'SkiaSharp.Views.Maui.Controls' version '3.119.0-preview.1.2' added.",
      "filesCreated": [
        {
          "filename": "MainPage.xaml",
          "description": "XAML page with SKGLView configured with HasRenderLoop=True to test uncapped framerate behavior",
          "content": "<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<ContentPage xmlns=\"http://schemas.microsoft.com/dotnet/2021/maui\"\n             xmlns:x=\"http://schemas.microsoft.com/winfx/2009/xaml\"\n             xmlns:skia=\"clr-namespace:SkiaSharp.Views.Maui.Controls;assembly=SkiaSharp.Views.Maui.Controls\"\n             x:Class=\"Repro.MainPage\">\n    <VerticalStackLayout>\n        <Label x:Name=\"FpsLabel\" Text=\"FPS: --\" FontSize=\"24\" HorizontalOptions=\"Center\" />\n        <skia:SKGLView x:Name=\"GlView\" \n                       HasRenderLoop=\"True\"\n                       PaintSurface=\"OnPaintSurface\"\n                       HeightRequest=\"400\" />\n    </VerticalStackLayout>\n</ContentPage>"
        },
        {
          "filename": "MainPage.xaml.cs",
          "description": "FPS measurement code using Stopwatch to measure time between PaintSurface events, matching the approach from the maintainer's comment",
          "content": "using System.Diagnostics;\nusing SkiaSharp;\nusing SkiaSharp.Views.Maui;\n\nnamespace Repro;\n\npublic partial class MainPage : ContentPage\n{\n    private readonly Stopwatch _sw = Stopwatch.StartNew();\n    private TimeSpan _last;\n    private int _frameCount;\n    private double _fpsAccum;\n\n    public MainPage()\n    {\n        InitializeComponent();\n        _last = _sw.Elapsed;\n    }\n\n    private void OnPaintSurface(object sender, SKPaintGLSurfaceEventArgs e)\n    {\n        var now = _sw.Elapsed;\n        var delta = (now - _last).TotalSeconds;\n        _last = now;\n\n        if (delta > 0)\n        {\n            var fps = 1.0 / delta;\n            _fpsAccum += fps;\n            _frameCount++;\n\n            if (_frameCount % 30 == 0)\n            {\n                var avgFps = _fpsAccum / 30;\n                _fpsAccum = 0;\n                MainThread.BeginInvokeOnMainThread(() =>\n                {\n                    FpsLabel.Text = $\"FPS: {avgFps:F1} (frame {_frameCount})\";\n                });\n                Debug.WriteLine($\"[FPS] {avgFps:F1}\");\n            }\n        }\n\n        var canvas = e.Surface.Canvas;\n        canvas.Clear(SKColors.CornflowerBlue);\n        using var paint = new SKPaint { Color = SKColors.White };\n        using var font = new SKFont { Size = 48 };\n        canvas.DrawText($\"Frame {_frameCount}\", 50, 100, SKTextAlign.Left, font, paint);\n    }\n}"
        }
      ],
      "result": "success"
    },
    {
      "stepNumber": 2,
      "description": "Register SkiaSharp in MauiProgram.cs with UseSkiaSharp()",
      "layer": "setup",
      "command": "sed -i '' 's/.UseMauiApp<App>()/.UseMauiApp<App>().UseSkiaSharp()/' MauiProgram.cs",
      "exitCode": 0,
      "output": "Added using SkiaSharp.Views.Maui.Controls.Hosting and .UseSkiaSharp() call.",
      "result": "success"
    },
    {
      "stepNumber": 3,
      "description": "Build MAUI project targeting Android to verify the repro code compiles",
      "layer": "deployment",
      "command": "dotnet build -f net10.0-android",
      "exitCode": 0,
      "output": "Build succeeded.\n2 Warning(s) (obsolete SKPaint.TextSize and SKCanvas.DrawText overload)\n0 Error(s)\nTime Elapsed 00:00:41.56",
      "result": "success"
    },
    {
      "stepNumber": 4,
      "description": "Attempt to run the Android app to measure framerate — blocked by missing Android emulator",
      "layer": "deployment",
      "result": "skip"
    }
  ],
  "environment": {
    "os": "macOS 26.2",
    "arch": "arm64",
    "dotnetVersion": "10.0.0",
    "dotnetSdkVersion": "10.0.102",
    "skiaSharpVersion": "3.119.0-preview.1.2",
    "dockerUsed": false,
    "gpu": {
      "backend": "OpenGL",
      "available": false
    }
  },
  "blockers": [
    "Requires Android device or emulator to observe runtime framerate behavior — no Android emulator (ADB) is installed in the current environment",
    "Bug is in the Android GL view layer (SKGLTextureView / GLTextureView) which only executes on Android runtime — cannot be simulated in console, Docker, or any non-Android platform",
    "Console fallback is not applicable — the bug is about the rendering loop frame pacing in the OpenGL view, not a core SkiaSharp API issue"
  ]
}
