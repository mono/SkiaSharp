# SkiaSharp Project Dashboard

A Blazor WebAssembly dashboard for monitoring SkiaSharp project health, community metrics, and PR triage.

**Live**: https://mono.github.io/SkiaSharp/dashboard/

## Features

- **Insights** — Project health overview with charts and hot issues
- **Issues** — All issues with filters, engagement scoring, hot issue detection
- **AI Triage** — AI-powered issue classification, resolution proposals, and suggested responses
- **Pull Requests** — PR triage categories and analysis
- **Community** — Stars, forks, contributors, commit activity
- **NuGet** — Package download statistics with grouped layout

## Development

### Prerequisites

- .NET 10 SDK
- A local data cache (see below)

### One-time Setup

Create a git worktree for the data cache:

```bash
git worktree add .data-cache docs-data-cache
```

### Generate Dashboard Data

The dashboard loads JSON files from `wwwroot/data/`. These are **generated files** (gitignored) — you need to generate them from the cache before running locally:

```bash
# Generate all dashboard JSON from the data cache
dotnet run --project src/SkiaSharp.Triage.Cli -- generate --from-cache .data-cache -o src/SkiaSharp.Triage.Dashboard/wwwroot/data
```

To sync fresh data from APIs into the cache first:

```bash
# Sync GitHub data (issues, PRs, engagement)
dotnet run --project src/SkiaSharp.Triage.Cli -- sync github --cache-path .data-cache

# Sync NuGet package data
dotnet run --project src/SkiaSharp.Triage.Cli -- sync nuget --cache-path .data-cache

# Sync community data (contributors)
dotnet run --project src/SkiaSharp.Triage.Cli -- sync community --cache-path .data-cache
```

### Run the Dashboard

```bash
cd src/SkiaSharp.Triage.Dashboard
dotnet run
```

### Build for Production

```bash
cd src/SkiaSharp.Triage.Dashboard
dotnet publish -c Release
```

## Data Files

The dashboard loads data from JSON files in `wwwroot/data/`. These are **generated by CI** — not committed to source control.

| File | Source | Content |
|------|--------|---------|
| `github-stats.json` | Cache | Stars, issues, PRs, commits |
| `github-trends.json` | Cache | Monthly trends, closure rates |
| `nuget-stats.json` | Cache | Package downloads |
| `nuget-charts.json` | Cache | Download trend charts |
| `community-stats.json` | Cache | Contributors, activity |
| `issues.json` | Cache | All issues with engagement scores |
| `pr-triage.json` | Cache | PR analysis and categories |
| `triage.json` | Cache | AI triage results per issue |

## Architecture

### Branches

| Branch | Purpose |
|--------|---------|
| `docs-dashboard` | Dashboard source code (this branch) |
| `docs-data-cache` | Cached API data (GitHub/NuGet/Community/AI Triage) |
| `docs-live` | Deployed GitHub Pages site |

### Data Pipeline

```
docs-data-cache (hourly sync)
    ↓ generate command
JSON files in wwwroot/data/
    ↓ dotnet publish
docs-live/dashboard/ (GitHub Pages)
```

### CI/CD Workflows

| Workflow | Triggers | Purpose |
|----------|----------|---------|
| `sync-data-cache.yml` | Hourly + push to docs-dashboard | Sync APIs → cache branch |
| `build-dashboard.yml` | Every 6 hours + manual | Generate JSON → build → deploy |

## Projects

| Project | Path | Purpose |
|---------|------|---------|
| SkiaSharp.Triage.Dashboard | `src/SkiaSharp.Triage.Dashboard/` | Blazor WASM app |
| SkiaSharp.Triage.Cli | `src/SkiaSharp.Triage.Cli/` | CLI for data sync and generation |
