<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>The Skew Transform | SkiaSharp </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="The Skew Transform | SkiaSharp ">
      
      <meta name="description" content="This article explains how the skew transform can create tilted graphical objects in SkiaSharp, and demonstrates this with sample code.">
      <link rel="icon" href="../../images/logo.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../TOC.html">
      <meta name="docfx:tocrel" content="../TOC.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/mono/SkiaSharp/blob/docs/docs/docs/transforms/skew.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="the-skew-transform">The Skew Transform</h1>

<p><em>See how the skew transform can create tilted graphical objects in SkiaSharp</em></p>
<p>In SkiaSharp, the skew transform tilts graphical objects, such as the shadow in this image:</p>
<p><img src="skew-images/skewexample.png" alt="An example of skewing from the Skew Shadow Text program"></p>
<p>The skew turns a rectangle into a parallelogram, but a skewed ellipse is still an ellipse.</p>
<p>Although .NET MAUI defines properties for translation, scaling, and rotations, there is no corresponding property in .NET MAUI for skew.</p>
<p>The <a class="xref" href="https://learn.microsoft.com/dotnet/api/skiasharp.skcanvas.skew#skiasharp-skcanvas-skew(system-single-system-single)"><code>Skew</code></a> method of <code>SKCanvas</code> accepts two arguments for horizontal skew and vertical skew:</p>
<pre><code class="lang-csharp">public void Skew (Single xSkew, Single ySkew)
</code></pre>
<p>A second <a class="xref" href="https://learn.microsoft.com/dotnet/api/skiasharp.skcanvas.skew#skiasharp-skcanvas-skew(skiasharp-skpoint)"><code>Skew</code></a> method combines those arguments in a single <code>SKPoint</code> value:</p>
<pre><code class="lang-csharp">public void Skew (SKPoint skew)
</code></pre>
<p>However, it's unlikely that you'll be using either of these two methods in isolation.</p>
<p>The <strong>Skew Experiment</strong> page lets you experiment with skew values that range between –10 and 10. A text string is positioned in the upper-left corner of the page, with skew values obtained from two <code>Slider</code> elements. Here is the <code>PaintSurface</code> handler in the <a href="https://github.com/mono/SkiaSharp/blob/docs/samples/Demos/Demos/SkiaSharpFormsDemos/Transforms/SkewExperimentPage.xaml.cs"><code>SkewExperimentPage</code></a> class:</p>
<pre><code class="lang-csharp">void OnCanvasViewPaintSurface(object? sender, SKPaintSurfaceEventArgs args)
{
    SKImageInfo info = args.Info;
    SKSurface surface = args.Surface;
    SKCanvas canvas = surface.Canvas;

    canvas.Clear();

    using (SKPaint textPaint = new SKPaint
    {
        Style = SKPaintStyle.Fill,
        Color = SKColors.Blue
    })
    using (SKFont font = new SKFont
    {
        Size = 200
    })
    {
        string text = &quot;SKEW&quot;;
        SKRect textBounds = new SKRect();
        font.MeasureText(text, out textBounds);

        canvas.Skew((float)xSkewSlider.Value, (float)ySkewSlider.Value);
        canvas.DrawText(text, 0, -textBounds.Top, SKTextAlign.Left, font, textPaint);
    }
}
</code></pre>
<p>Values of the <code>xSkew</code> argument shift the bottom of the text right for positive values or left for negative values. Values of <code>ySkew</code> shift the right of the text down for positive values or up for negative values:</p>
<p><a href="skew-images/skewexperiment-large.png#lightbox" title="Triple screenshot of the Skew Experiment page"><img src="skew-images/skewexperiment-small.png" alt="Triple screenshot of the Skew Experiment page"></a></p>
<p>If the <code>xSkew</code> value is the negative of the <code>ySkew</code> value, the result is rotation, but also scaled somewhat.</p>
<p>The transform formulas are as follows:</p>
<p>x' = x + xSkew · y</p>
<p>y' = ySkew · x + y</p>
<p>For example, for a positive <code>xSkew</code> value, the transformed <code>x'</code> value increases as <code>y</code> increases. That's what causes the tilt.</p>
<p>If a triangle 200 pixels wide and 100 pixels high is positioned with its upper-left corner at the point (0, 0) and is rendered with an <code>xSkew</code> value of 1.5, the following parallelogram results:</p>
<p><img src="skew-images/skeweffect.png" alt="The effect of the skew transform on a rectangle"></p>
<p>The coordinates of the bottom edge have <code>y</code> values of 100, so it is shifted 150 pixels to the right.</p>
<p>For non-zero values of <code>xSkew</code> or <code>ySkew</code>, only the point (0, 0) remains the same. That point can be considered the center of skewing. If you need the center of skewing to be something else (which is usually the case), there is no <code>Skew</code> method that provides that. You'll need to explicitly combine <code>Translate</code> calls with the <code>Skew</code> call. To center the skewing at <code>px</code> and <code>py</code>, make the following calls:</p>
<pre><code class="lang-csharp">canvas.Translate(px, py);
canvas.Skew(xSkew, ySkew);
canvas.Translate(-px, -py);
</code></pre>
<p>The composite transform formulas are:</p>
<p>x' = x + xSkew · (y – py)</p>
<p>y' = ySkew · (x – px) + y</p>
<p>If <code>ySkew</code> is zero, then the <code>px</code> value is not used. The value is irrelevant, and similarly for <code>ySkew</code> and <code>py</code>.</p>
<p>You might feel more comfortable specifying skew as an angle of tilt, such as the angle α in this diagram:</p>
<p><img src="skew-images/skewangleeffect.png" alt="The effect of the skew transform on a rectangle with a skewing angle indicated"></p>
<p>The ratio of the 150-pixel shift to the 100-pixel vertical is the tangent of that angle, in this example 56.3 degrees.</p>
<p>The XAML file of the <strong>Skew Angle Experiment</strong> page is similar to the <strong>Skew Angle</strong> page except that the <code>Slider</code> elements range from –90 degrees to 90 degrees. The <a href="https://github.com/mono/SkiaSharp/blob/docs/samples/Demos/Demos/SkiaSharpFormsDemos/Transforms/SkewAngleExperimentPage.xaml.cs"><code>SkewAngleExperiment</code></a> code-behind file centers the text on the page and uses <code>Translate</code> to set a center of skewing to the center of the page. A short <code>SkewDegrees</code> method at the bottom of the code converts angles to skew values:</p>
<pre><code class="lang-csharp">void OnCanvasViewPaintSurface(object? sender, SKPaintSurfaceEventArgs args)
{
    SKImageInfo info = args.Info;
    SKSurface surface = args.Surface;
    SKCanvas canvas = surface.Canvas;

    canvas.Clear();

    using (SKPaint textPaint = new SKPaint
    {
        Style = SKPaintStyle.Fill,
        Color = SKColors.Blue
    })
    using (SKFont font = new SKFont
    {
        Size = 200
    })
    {
        float xCenter = info.Width / 2;
        float yCenter = info.Height / 2;

        string text = &quot;SKEW&quot;;
        SKRect textBounds = new SKRect();
        font.MeasureText(text, out textBounds);
        float xText = xCenter - textBounds.MidX;
        float yText = yCenter - textBounds.MidY;

        canvas.Translate(xCenter, yCenter);
        SkewDegrees(canvas, xSkewSlider.Value, ySkewSlider.Value);
        canvas.Translate(-xCenter, -yCenter);
        canvas.DrawText(text, xText, yText, SKTextAlign.Left, font, textPaint);
    }
}

void SkewDegrees(SKCanvas canvas, double xDegrees, double yDegrees)
{
    canvas.Skew((float)Math.Tan(Math.PI * xDegrees / 180),
                (float)Math.Tan(Math.PI * yDegrees / 180));
}
</code></pre>
<p>As an angle approaches positive or negative 90 degrees, the tangent approaches infinity, but angles up to about 80 degrees or so are usable:</p>
<p><a href="skew-images/skewangleexperiment-large.png#lightbox" title="Triple screenshot of the Skew Angle Experiment page"><img src="skew-images/skewangleexperiment-small.png" alt="Triple screenshot of the Skew Angle Experiment page"></a></p>
<p>A small negative horizontal skew can mimic oblique or italic text, as the <strong>Oblique Text</strong> page demonstrates. The <a href="https://github.com/mono/SkiaSharp/blob/docs/samples/Demos/Demos/SkiaSharpFormsDemos/Transforms/ObliqueTextPage.cs"><code>ObliqueTextPage</code></a> class shows how it's done:</p>
<pre><code class="lang-csharp">void OnCanvasViewPaintSurface(object? sender, SKPaintSurfaceEventArgs args)
{
    SKImageInfo info = args.Info;
    SKSurface surface = args.Surface;
    SKCanvas canvas = surface.Canvas;

    canvas.Clear();

    using (SKPaint textPaint = new SKPaint()
    {
        Style = SKPaintStyle.Fill,
        Color = SKColors.Maroon
    })
    using (SKFont font = new SKFont()
    {
        Size = info.Width / 8       // empirically determined
    })
    {
        canvas.Translate(info.Width / 2, info.Height / 2);
        SkewDegrees(canvas, -20, 0);
        canvas.DrawText(Title, 0, 0, SKTextAlign.Center, font, textPaint);
    }
}

void SkewDegrees(SKCanvas canvas, double xDegrees, double yDegrees)
{
    canvas.Skew((float)Math.Tan(Math.PI * xDegrees / 180),
                (float)Math.Tan(Math.PI * yDegrees / 180));
}
</code></pre>
<p>The <code>SKTextAlign.Center</code> parameter passed to <code>DrawText</code> positions the text with the horizontal center of the baseline at the specified location. The <code>SkewDegrees</code> skews the text horizontally 20 degrees relative to the baseline. The <code>Translate</code> call moves the horizontal center of the text's baseline to the center of the canvas:</p>
<p><a href="skew-images/obliquetext-large.png#lightbox" title="Triple screenshot of the Oblique Text page"><img src="skew-images/obliquetext-small.png" alt="Triple screenshot of the Oblique Text page"></a></p>
<p>The <strong>Skew Shadow Text</strong> page demonstrates how to use a combination of a 45-degree skew and vertical scale to make a text shadow that tilts away from the text. Here's the pertinent part of the <code>PaintSurface</code> handler:</p>
<pre><code class="lang-csharp">using (SKPaint textPaint = new SKPaint())
using (SKFont font = new SKFont())
{
    textPaint.Style = SKPaintStyle.Fill;
    font.Size = info.Width / 6;   // empirically determined

    // Common to shadow and text
    string text = &quot;Shadow&quot;;
    float xText = 20;
    float yText = info.Height / 2;

    // Shadow
    textPaint.Color = SKColors.LightGray;
    canvas.Save();
    canvas.Translate(xText, yText);
    canvas.Skew((float)Math.Tan(-Math.PI / 4), 0);
    canvas.Scale(1, 3);
    canvas.Translate(-xText, -yText);
    canvas.DrawText(text, xText, yText, SKTextAlign.Left, font, textPaint);
    canvas.Restore();

    // Text
    textPaint.Color = SKColors.Blue;
    canvas.DrawText(text, xText, yText, SKTextAlign.Left, font, textPaint);
}
</code></pre>
<p>The shadow is displayed first and then the text:</p>
<p><a href="skew-images/skewshadowtext1-large.png#lightbox" title="Triple screenshot of the Skew Shadow Text page"><img src="skew-images/skewshadowtext1-small.png" alt="Triple screenshot of the Skew Shadow Text page"></a></p>
<p>The vertical coordinate passed to the <code>DrawText</code> method indicates the position of the text relative to the baseline. That is the same vertical coordinate used for the center of skewing. This technique will not work if the text string contains descenders. For example, substitute the word &quot;quirky&quot; for &quot;Shadow&quot; and here's the result:</p>
<p><a href="skew-images/skewshadowtext2-large.png#lightbox" title="Triple screenshot of the Skew Shadow Text page with an alternative word with descenders"><img src="skew-images/skewshadowtext2-small.png" alt="Triple screenshot of the Skew Shadow Text page with an alternative word with descenders"></a></p>
<p>The shadow and text are still aligned at the baseline, but the effect just looks wrong. To fix it, you need to obtain the text bounds:</p>
<pre><code class="lang-csharp">SKRect textBounds = new SKRect();
font.MeasureText(text, out textBounds);
</code></pre>
<p>The <code>Translate</code> calls need to be adjusted by the height of the descenders:</p>
<pre><code class="lang-csharp">canvas.Translate(xText, yText + textBounds.Bottom);
canvas.Skew((float)Math.Tan(-Math.PI / 4), 0);
canvas.Scale(1, 3);
canvas.Translate(-xText, -yText - textBounds.Bottom);
</code></pre>
<p>Now the shadow extends from the bottom of those descenders:</p>
<p><a href="skew-images/skewshadowtext3-large.png#lightbox" title="Triple screenshot of the Skew Shadow Text page with adjustments for descenders"><img src="skew-images/skewshadowtext3-small.png" alt="Triple screenshot of the Skew Shadow Text page with adjustments for descenders"></a></p>
<h2 id="related-links">Related Links</h2>
<ul>
<li><a href="/dotnet/api/skiasharp">SkiaSharp APIs</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/mono/SkiaSharp/blob/docs/docs/docs/transforms/skew.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
