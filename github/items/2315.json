{
  "number": 2315,
  "type": "issue",
  "state": "closed",
  "title": "Not able resize image on Unix OS",
  "body": "I am not able to resize images using SkiaSharp. It is working fine on windows and ubuntu (using Visual studio remote debugging). I am using Amazon ECS Services and deploying a docker image on ECS Service. I am using \u0060SkiaSharp.NativeAssets.Linux.NoDependencies\u0060 library file version \u00602.88.3\u0060. I tried a different solution \u0026 code from the internet but no luck. I have mentioned my code \u0026 error below.\r\n\r\n\u003E**I have below questions**\r\n\u003E1. Does \u0060SkiaSharp\u0060 support Unix operating system?\r\n\u003E2. Why is it not able to find the codec? \r\n\u003E3. What am I doing wrong \u0026 how can I solve it?\r\n\r\n\r\n**Below is OS information from Aws ECS Service.**\r\nShell command output: PRETTY_NAME=\u0022Debian GNU/Linux 11 (bullseye)\u0022\r\nNAME=\u0022Debian GNU/Linux\u0022\r\nVERSION_ID=\u002211\u0022\r\nVERSION=\u002211 (bullseye)\u0022\r\nVERSION_CODENAME=bullseye\r\nID=debian\r\nHOME_URL=\u0022https://www.debian.org/\u0022\r\nSUPPORT_URL=\u0022https://www.debian.org/support\u0022\r\nBUG_REPORT_URL=\u0022https://bugs.debian.org/\u0022\r\n4.14.294-220.533.amzn2.x86_64 kernel version\r\n\r\n\r\n### Attempt 1\r\n\u0060\u0060\u0060\r\nError: Value cannot be null. (Parameter \u0027codec\u0027) at SkiaSharp.SKBitmap.Decode(SKCodec codec)\r\n\r\nusing (SKBitmap originalImage = SKBitmap.Decode(attachment))\r\n{\r\n    (int desiredWidth, int desiredHeight) = GetImageResizeSize(originalImage.Width, originalImage.Height);\r\n\r\n    using (SKBitmap resizedImage = originalImage.Resize(new SKImageInfo(desiredWidth, desiredHeight, originalImage.ColorType, originalImage.AlphaType, originalImage.ColorSpace), SKFilterQuality.None))\r\n    {\r\n        using (SKImage image = SKImage.FromBitmap(resizedImage))\r\n        {\r\n            MemoryStream outputImageStream = new();\r\n\r\n            image.Encode(SKEncodedImageFormat.Jpeg, 80).SaveTo(outputImageStream);\r\n\r\n            return outputImageStream.ToArray();\r\n        }\r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\n\r\n### Attempt 2\r\n\u0060\u0060\u0060\r\nError: System.NullReferenceException: Object reference not set to an instance of an object.\r\n\r\nMemoryStream inputAttachmentStream = new(attachment)\r\n{\r\n    Position = 0\r\n};\r\n\r\nSKManagedStream skiaManagedStream = new(inputAttachmentStream);\r\nSKData imageInputData = SKData.Create(skiaManagedStream);\r\nusing (SKBitmap originalImage = SKBitmap.Decode(imageInputData))\r\n{\r\n    (int desiredWidth, int desiredHeight) = GetImageResizeSize(originalImage.Width, originalImage.Height);\r\n\r\n    using (SKBitmap resizedImage = originalImage.Resize(originalImage.Info.WithSize(desiredWidth, desiredHeight), SKFilterQuality.None))\r\n    {\r\n        using (SKImage image = SKImage.FromBitmap(resizedImage))\r\n        {\r\n            MemoryStream outputImageStream = new();\r\n\r\n            image. Encode(SKEncodedImageFormat.Jpeg, 80).SaveTo(outputImageStream);\r\n\r\n            return outputImageStream.ToArray();\r\n        }\r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\n### Attempt 3\r\n\u0060\u0060\u0060\r\nError: System.ArgumentNullException: Value cannot be null. (Parameter \u0027image\u0027) at SkiaSharp.SKBitmap.FromImage(SKImage image)\r\n\r\nMemoryStream inputAttachmentStream = new(attachment)\r\n{\r\n    Position = 0\r\n};\r\n\r\nusing SKManagedStream stream = new SKManagedStream(inputAttachmentStream, false);\r\nSKImage img = SKImage.FromEncodedData(stream);\r\nSKBitmap? bitmap = SKBitmap.FromImage(img);\r\n\r\n(int desiredWidth, int desiredHeight) = GetImageResizeSize(bitmap. Width, bitmap. Height);\r\n\r\nusing (SKBitmap resizedImage = bitmap.Resize(bitmap.Info.WithSize(desiredWidth, desiredHeight), SKFilterQuality.None))\r\n{\r\n    using (SKImage image = SKImage.FromBitmap(resizedImage))\r\n    {\r\n        MemoryStream outputImageStream = new();\r\n\r\n        image.Encode(SKEncodedImageFormat.Jpeg, 80).SaveTo(outputImageStream);\r\n\r\n        return outputImageStream.ToArray();\r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\n\r\n**Please, let me know, if anyone required more information from my side.\r\nThank You.**\r\n",
  "author": {
    "login": "Manish082007",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2022-11-18T13:22:44",
  "updatedAt": "2023-01-04T12:00:51",
  "closedAt": "2022-12-05T10:57:22",
  "commentCount": 5,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T20:28:33.1203248Z",
    "reactions": [],
    "comments": [
      {
        "id": 1328876168,
        "author": "themcoo",
        "createdAt": "2022-11-28T10:51:34",
        "reactions": []
      },
      {
        "id": 1328883787,
        "author": "Manish082007",
        "createdAt": "2022-11-28T10:58:39",
        "reactions": []
      },
      {
        "id": 1328890734,
        "author": "themcoo",
        "createdAt": "2022-11-28T11:04:10",
        "reactions": []
      },
      {
        "id": 1328903915,
        "author": "Manish082007",
        "createdAt": "2022-11-28T11:14:07",
        "reactions": []
      },
      {
        "id": 1337134261,
        "author": "Manish082007",
        "createdAt": "2022-12-05T10:57:22",
        "reactions": []
      }
    ]
  }
}