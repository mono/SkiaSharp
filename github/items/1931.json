{
  "number": 1931,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] flushClearColor  throws an error",
  "body": "**Description**\r\n\r\nAttempting to \u0060surface.Canvas.DrawColor(SKColors.White);\u0060 and flush causes an exception\r\n\r\n**Code**\r\n\r\n\u0060\u0060\u0060\r\n            surface.Canvas.DrawColor(SKColors.White);\r\n\r\n            surface.Canvas.Flush();\r\n\u0060\u0060\u0060\r\n\r\n\r\n**Expected Behavior**\r\n\r\nThe canvas goes white\r\n\r\n**Actual Behavior**\r\n\r\nException occurs, \r\n\u0060\u0060\u0060\r\n\u0022RuntimeError: null function or function signature mismatch\r\n    at GrGLFunction\u003Cvoid (float, float, float, float)\u003E::GrGLFunction(void (*)(float, float, float, float))::\u0027lambda\u0027(void const*, float, float, float, float)::__invoke(void const*, float, float, float, float) (http://localhost:8000/wskia.wasm:wasm-function[42972]:0x153e1ca)\r\n    at GrGLGpu::flushClearColor(SkRGBA4f\u003C(SkAlphaType)2\u003E const\u0026) (http://localhost:8000/wskia.wasm:wasm-function[43322]:0x155382e)\r\n    at GrGLGpu::beginCommandBuffer(GrRenderTarget*, SkIRect const\u0026, GrSurfaceOrigin, GrOpsRenderPass::LoadAndStoreInfo const\u0026, GrOpsRenderPass::StencilLoadAndStoreInfo const\u0026) (http://localhost:8000/wskia.wasm:wasm-function[43337]:0x155583a)\r\n    at GrGLOpsRenderPass::begin() (http://localhost:8000/wskia.wasm:wasm-function[43382]:0x155b466)\r\n    at GrOpsTask::onExecute(GrOpFlushState*) (http://localhost:8000/wskia.wasm:wasm-function[43522]:0x1562580)\r\n    at GrDrawingManager::executeRenderTasks(int, int, GrOpFlushState*, int*) (http://localhost:8000/wskia.wasm:wasm-function[42907]:0x1537823)\r\n    at GrDrawingManager::flush(GrSurfaceProxy**, int, SkSurface::BackendSurfaceAccess, GrFlushInfo const\u0026, GrPrepareForExternalIORequests const\u0026) (http://localhost:8000/wskia.wasm:wasm-function[42906]:0x15373aa)\r\n    at GrDrawingManager::flushSurfaces(GrSurfaceProxy**, int, SkSurface::BackendSurfaceAccess, GrFlushInfo const\u0026) (http://localhost:8000/wskia.wasm:wasm-function[42908]:0x15379d8)\r\n    at GrRenderTargetContext::flush(SkSurface::BackendSurfaceAccess, GrFlushInfo const\u0026) (http://localhost:8000/wskia.wasm:wasm-function[32186]:0x1180ca5)\r\n    at SkGpuDevice::flush() (http://localhost:8000/wskia.wasm:wasm-function[36719]:0x12ef302)\u0022\r\n\u0060\u0060\u0060\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  WebAssembly 2.0.12\r\n- Last known good version:  \u003C!-- the version of SkiaSharp that still working --\u003E\r\n- IDE:  Visual Studio \r\n- Platform Target Frameworks: WebAssembly/emscripten\r\n- Target Devices:   Chrome Canary\r\n  \r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EDetailed IDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\n\u0060\u0060\u0060\r\n\r\nPASTE ANY DETAILED VERSION INFO HERE\r\n\r\n\u0060\u0060\u0060\r\n\u003C/details\u003E\r\n\r\n\r\n**Screenshots**\r\n\r\n\u003C!-- if the issue is a visual issue, please include screenshots showing the problem if possible --\u003E\r\n\r\n**Reproduction Link**\r\n\r\nhttps://github.com/yowl/wskia/tree/flush\r\n\r\nand build with \r\n\r\n\u0060\u0060\u0060\r\ndotnet publish /p:SelfContained=true -r browser-wasm -c Debug /p:TargetArchitecture=wasm /p:PlatformTarget=AnyCPU /p:MSBuildEnableWorkloadResolver=false  --self-contained /p:EmccExtraArgs=.packages\\skiasharp.nativeassets.webassembly\\2.80.3\\build\\netstandard1.0\\libSkiaSharp.a\\2.0.12\\libSkiaSharp.a\r\n\u0060\u0060\u0060\r\nThen server using some webserver and open in Chrome canary\r\n\r\n",
  "author": {
    "login": "yowl",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2022-01-23T19:54:55",
  "updatedAt": "2024-08-21T15:16:07",
  "closedAt": "2024-08-21T15:16:07",
  "commentCount": 2,
  "reactionCount": 2
}