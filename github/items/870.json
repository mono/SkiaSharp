{
  "number": 870,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] App can crash due to trying to set SKCanvasView EnableTouchEvents to false",
  "body": "**Description**\r\n\r\nTesters for our apps are experiencing crashes which seem to be caused by setting an instance of a \u0060SKCanvasView.EnabledTouchEvents = true\u0060.\r\n\r\nUnfortunately this happens in a rather complex app and I cannot share the app or source related to the app for reproduction, but I will provide as much information as I can to help solve the problem.\r\n\r\n**Code**\r\n\r\nIn our case we have a page which has a view with the following snippet:\r\n\r\n\u0060\u0060\u0060\r\npublic class MyView : SKCanvasView\r\n{\r\n    public MyView()\r\n    {\r\n        ....\r\n\r\n        PaintSurface \u002B= HandlePaintSurface;\r\n        SizeChanged \u002B= HandleSizeChanged;\r\n\r\n        EnableTouchEvents = true; // \u003C- This is the critical line of code\r\n        Touch \u002B= HandleTouch;\r\n        \r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\nFor testing, our testers navigate in and out and in and out of this page multiple times, sometimes 7 times or more. The app will not crash until going to a different page - possibly when a GC occurs?\r\n\r\nIf we instead change the assignment to EnableTouchEvents to false, testers cannot reproduce this crash:\r\n\r\n\u0060\u0060\u0060\r\n  ...\r\n  EnableTouchEvents = false;\r\n  ..\r\n\u0060\u0060\u0060\r\nNote that testers have not been able to reproduce this with a debugger attached, only with a deployed build, disconnected from Visual Studio. I don\u0027t know if that\u0027s relevant here.\r\n\r\n**Expected Behavior**\r\n\r\nThe underling code should properly be able to set EnabledTouchEvent (or whatever platform-specific equivalent exists) without crashing.\r\n\r\n**Actual Behavior**\r\n\r\nGiven enough back and forth navigation, the application will crash.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  1.68.0\r\n- Last known good version:  Unknown, this is a new page in our app that was added after we upgraded to 1.68.0.\r\n- IDE:  Visual Studio on Windows 10\r\n- Platform Target Frameworks: \r\n  - Android: Android 8.1 (API Level 27 - Oreo)\r\n- Target Devices:  \r\n  - Nexus 5X\r\n  - Emulator (Android 8.1.0)\r\n  - Pixel (Android 9.0 - this is the original pixel)\r\n\r\n**Screenshots**\r\n\r\n**Reproduction Link**\r\n\r\n**Additional Information**\r\n\r\nThe following information is provided by AppCenter:\r\n\r\nSKTouchHandler.SetEnabled (Android.Views.View view, System.Boolean enableTouchEvents)\r\nSystem.ObjectDisposedException: Cannot access a disposed object. Object name: \u0027SkiaSharp.Views.Android.SKCanvasView\u0027.\r\n\r\nCallstack:\r\n\r\n\u0060\u0060\u0060\r\nJniPeerMembers.AssertSelf (Java.Interop.IJavaPeerable self)\r\nJniPeerMembers\u002BJniInstanceMethods.InvokeVirtualVoidMethod (System.String encodedMember, Java.Interop.IJavaPeerable self, Java.Interop.JniArgumentValue* parameters)\r\nView.SetOnTouchListener (Android.Views.View\u002BIOnTouchListener l)\r\nView\u002B\u003C\u003Ec__DisplayClass2576_0.\u003Cremove_Touch\u003Eb__0 (Android.Views.View\u002BIOnTouchListener __v)\r\nEventHelper.RemoveEventHandler[TInterface,TImplementor] (System.WeakReference\u0026 implementor, System.Func\u00602[T,TResult] empty, System.Action\u00601[T] unsetListener, System.Action\u00601[T] remove)\r\nView.remove_Touch (System.EventHandler\u00601[TEventArgs] value)\r\nSKTouchHandler.SetEnabled (Android.Views.View view, System.Boolean enableTouchEvents)\r\nSKTouchHandler.Detach (Android.Views.View view)\r\nSKCanvasViewRendererBase\u00602[TFormsView,TNativeView].Dispose (System.Boolean disposing)\r\nObject.Finalize ()\r\n\u0060\u0060\u0060",
  "author": {
    "login": "vchelaru",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2019-06-20T21:36:56",
  "updatedAt": "2022-08-19T12:01:17",
  "closedAt": "2020-04-26T06:22:44",
  "commentCount": 4,
  "reactionCount": 1
}