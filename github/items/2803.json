{
  "number": 2803,
  "type": "issue",
  "state": "open",
  "title": "Using SKSwapChainPanel nuget package V3-Preview 2.1 in WinUI3 Throws an Exception: AccessViolationException",
  "body": "### Description\r\n\r\nHi Friends,\r\n\r\nFirst of all thank you so much for porting SKSwapChainPanel to WinUI3. I have been waiting for it for very long time.\r\n\r\nTo test new functionalities, I created a simple program which uses SKSwapChainPanel. I have installed Skiasharp.Views.WinUI (3.0.0-preview 2.1) nuget package.  But, when I run the application, I get System.AccessViolationException: \u0027Attempted to read or write protected memory. \r\n\r\n![image](https://github.com/mono/SkiaSharp/assets/19598410/88dc1f75-c69b-49ed-b388-a8f1be0b7d0a)\r\n\r\nSeems, I have installed all required packages.\r\n\r\n![image](https://github.com/mono/SkiaSharp/assets/19598410/a805fd95-11f1-4012-9507-fc84cb425818)\r\n\r\nI have also build and install angle with vcpkg. Without any luck.\r\n\r\nCan somebody please help me what I am missing here? Please let me know if you want me to upload project.\r\n\r\nThanks and Regards,\r\nAmit\r\n\r\n\r\n### Code\r\n\r\nThe best way to share code for larger projects is a link to a GitHub repository: https://github.com/user/repo/tree/bug-123\r\n\r\nBut, you can also share a short block of code here:\r\n\u0060\u0060\u0060cs\r\n// some C# code here\r\n\u0060\u0060\u0060\r\nYou can also share some XAML:\r\n\u0060\u0060\u0060xaml\r\n\u003C!-- xaml code here --\u003E\r\n\u0060\u0060\u0060\r\n\u003CWindow\r\n    x:Class=\u0022WINUI_SkiaSharp_SKSwap_Test.MainWindow\u0022\r\n    xmlns=\u0022http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0022\r\n    xmlns:x=\u0022http://schemas.microsoft.com/winfx/2006/xaml\u0022\r\n    xmlns:local=\u0022using:WINUI_SkiaSharp_SKSwap_Test\u0022\r\n    xmlns:d=\u0022http://schemas.microsoft.com/expression/blend/2008\u0022\r\n    xmlns:mc=\u0022http://schemas.openxmlformats.org/markup-compatibility/2006\u0022\r\n    xmlns:skia=\u0022using:SkiaSharp.Views.Windows\u0022\r\n    mc:Ignorable=\u0022d\u0022\u003E\r\n\r\n    \u003CGrid Name=\u0022mygrid\u0022\u003E\r\n        \u003CStackPanel\u003E\r\n            \u003Cskia:SKSwapChainPanel Name=\u0022canvas\u0022 Height=\u0022200\u0022 Width=\u0022200\u0022/\u003E\r\n        \u003C/StackPanel\u003E\r\n        \u003CStackPanel Orientation=\u0022Horizontal\u0022 HorizontalAlignment=\u0022Center\u0022 VerticalAlignment=\u0022Center\u0022\u003E\r\n            \u003CButton x:Name=\u0022myButton\u0022 Click=\u0022myButton_Click\u0022\u003EClick Me\u003C/Button\u003E\r\n        \u003C/StackPanel\u003E\r\n    \u003C/Grid\u003E\r\n\u003C/Window\u003E\r\n\r\n\r\n### Expected Behavior\r\n\r\nI should not throw an expception\r\n\r\n### Actual Behavior\r\n\r\nThrows an exception\r\n\r\n### Version of SkiaSharp\r\n\r\n3.x (Alpha)\r\n\r\n### Last Known Good Version of SkiaSharp\r\n\r\n2.88.2 (Previous)\r\n\r\n### IDE / Editor\r\n\r\nVisual Studio (Windows)\r\n\r\n### Platform / Operating System\r\n\r\nWindows\r\n\r\n### Platform / Operating System Version\r\n\r\nWindows 10\r\n\r\n### Devices\r\n\r\nWindows 10 Laptop\r\n\r\n### Relevant Screenshots\r\n\r\n_No response_\r\n\r\n### Relevant Log Output\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project\u0027s Code of Conduct",
  "author": {
    "login": "AmitParmar2005",
    "type": "User"
  },
  "labels": [
    {
      "name": "type/bug",
      "color": "fc2929"
    },
    {
      "name": "status/needs-attention",
      "color": "B8EC4A"
    }
  ],
  "assignees": [],
  "createdAt": "2024-03-23T00:35:46",
  "updatedAt": "2025-05-07T06:29:05",
  "commentCount": 14,
  "reactionCount": 0
}