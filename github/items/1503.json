{
  "number": 1503,
  "type": "issue",
  "state": "closed",
  "title": "[BUG] SKImageSourceHandler throws when using a decoded image",
  "body": "**Description**\r\n\r\n\u0060\u0060\u0060\r\nImage loading: Image load failed: System.NullReferenceException: Object reference not set to an instance of an object.\r\n  at SkiaSharp.Views.Android.AndroidExtensions.ToBitmap (SkiaSharp.SKPixmap skiaPixmap) [0x00000] in \u003C2240341f42164adf9675613a7d38e6a2\u003E:0 \r\n  at SkiaSharp.Views.Android.AndroidExtensions.ToBitmap (SkiaSharp.SKImage skiaImage) [0x00007] in \u003C2240341f42164adf9675613a7d38e6a2\u003E:0 \r\n  at SkiaSharp.Views.Forms.SKImageSourceHandler.LoadImageAsync (Xamarin.Forms.ImageSource imagesource, Android.Content.Context context, System.Threading.CancellationToken cancelationToken) [0x00016] in \u003Cb18b65b5182d4b478f3930a96bea5d85\u003E:0 \r\n  at Xamarin.Forms.Platform.Android.ResourceManager.GetFormsBitmapAsync (Android.Content.Context context, Xamarin.Forms.ImageSource imageSource, System.Threading.CancellationToken cancellationToken) [0x00045] in D:\\a\\1\\s\\Xamarin.Forms.Platform.Android\\ResourceManager.cs:148 \r\n\u0060\u0060\u0060\r\n\r\nThis is because a freshly decoded image does not have pixel data yet. This can be detected with the \u0060IsLazyGenerated\u0060 property and then using \u0060.ToRasterImage(true)\u0060 to ensure that the result has pixels. It may or may not be a new object.\r\n\r\n**Code**\r\n\r\n\u0060\u0060\u0060csharp\r\nImage = new SKImageImageSource\r\n{\r\n\tImage = SKImage.FromEncodedData(imageStream)\r\n};\r\n\u0060\u0060\u0060\r\n\r\n**Expected Behavior**\r\n\r\nNo exception.\r\n\r\n**Actual Behavior**\r\n\r\nException.\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  \u003C!-- the version of SkiaSharp that has the issue --\u003E\r\n- Last known good version:  \u003C!-- the version of SkiaSharp that still working --\u003E\r\n- IDE:  \u003C!-- Visual Studio / Visual Studio for Mac / MonoDevelop / Visual Studio Code --\u003E\r\n- Platform Target Frameworks: \u003C!-- all that apply, remove the platforms that aren\u0027t broken or haven\u0027t had any testing --\u003E\r\n  - Android: \u003C!-- the version of the Android SDK you are compiling against, e.g. 7.1 --\u003E \r\n  - iOS:  \u003C!-- the version of the iOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Linux:  \u003C!-- The version and distro of linux that you are building for, e.g. Ubuntu 16.04 --\u003E\r\n  - macOS:  \u003C!-- The version of macOS you are building for, e.g. 10.10 --\u003E\r\n  - Tizen:  \u003C!-- the version of the Tizen SDK you are compiling against, e.g. 4.0 --\u003E \r\n  - tvOS:  \u003C!-- the version of the tvOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - UWP:  \u003C!-- the version of the UWP SDK you are compiling against, e.g. 16299 --\u003E \r\n  - watchOS:  \u003C!-- the version of the watchOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Windows Classic:  \u003C!-- the version of Windows you are building for, e.g. Windows 7 --\u003E\r\n- Target Devices:   \u003C!-- the devices that you noticed this on, e.g. iPhone X --\u003E\r\n  - \u003C!-- Google Pixel 4 XL --\u003E\r\n  - \u003C!-- iPhone 11 --\u003E\r\n  \r\n\u003Cdetails\u003E\r\n  \u003Csummary\u003EDetailed IDE/OS information (click to expand)\u003C/summary\u003E\r\n  \r\n\u0060\u0060\u0060\r\n\r\nPASTE ANY DETAILED VERSION INFO HERE\r\n\r\n\u0060\u0060\u0060\r\n\u003C/details\u003E\r\n\r\n\r\n**Screenshots**\r\n\r\n\u003C!-- if the issue is a visual issue, please include screenshots showing the problem if possible --\u003E\r\n\r\n**Reproduction Link**\r\n\r\n\u003C!-- please upload or provide a link to a reproduction case --\u003E\r\n\r\n",
  "author": {
    "login": "mattleibow",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2020-09-18T23:39:23",
  "updatedAt": "2022-08-19T03:01:50",
  "closedAt": "2021-03-14T11:46:54",
  "commentCount": 0,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T20:54:06.2597778Z",
    "reactions": [],
    "comments": []
  }
}