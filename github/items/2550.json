{
  "number": 2550,
  "type": "issue",
  "state": "open",
  "title": "[BUG] SKGLView doesn\u0027t repaint if it\u0027s in a TabBar",
  "body": "**Description**\r\n\r\nSKGLView doesn\u0027t repaint if it\u0027s in a TabBar.\r\n\r\n**Code**\r\n\r\nAppShell.xaml - puts the MainPage with the MySKGLView in a tab bar.  When the tabs switch, the MySKGLView doesn\u0027t redraw\r\n\u0060\u0060\u0060xml\r\n    \u003CTabBar x:Name=\u0022SKGLViewTabs\u0022\u003E\r\n        \u003CTab Title=\u0022Tab1\u0022\u003E\r\n            \u003CShellContent\r\n                Title=\u0022Home\u0022\r\n                ContentTemplate=\u0022{DataTemplate local:MainPage}\u0022\r\n                Route=\u0022MainPage\u0022 /\u003E\r\n        \u003C/Tab\u003E\r\n        \u003CTab Title=\u0022Tab2\u0022\u003E\r\n        ...\r\n        \u003C/Tab\u003E\r\n    \u003C/TabBar\u003E\r\n\u0060\u0060\u0060\r\n\r\nMainPage.xaml - contains the MySKGLView\r\n\u0060\u0060\u0060xml\r\n\u003CContentPage xmlns=\u0022http://schemas.microsoft.com/dotnet/2021/maui\u0022\r\n             xmlns:x=\u0022http://schemas.microsoft.com/winfx/2009/xaml\u0022\r\n             xmlns:local=\u0022clr-namespace:TestTabsMauiApp2\u0022\r\n             x:Class=\u0022TestTabsMauiApp2.MainPage\u0022\u003E\r\n\r\n    \u003CScrollView\u003E\r\n        \u003CVerticalStackLayout\r\n            Spacing=\u002225\u0022\r\n            Padding=\u002230,0\u0022\r\n            VerticalOptions=\u0022Center\u0022\u003E\r\n\r\n            \u003Clocal:MySKGLView\r\n                x:Name=\u0022MySKGLView1\u0022\r\n                SemanticProperties.Description=\u0022MySKGLView\u0022\r\n                HeightRequest=\u0022200\u0022\r\n                HorizontalOptions=\u0022Center\u0022\r\n            /\u003E\r\n...\r\n\u0060\u0060\u0060\r\n\r\nMySKGLView.cs - this draws a gradient filled rectangle usually\r\n\u0060\u0060\u0060csharp\r\npublic class MySKGLView : SKGLView\r\n{\r\n    protected override void OnPaintSurface(SKPaintGLSurfaceEventArgs e)\r\n    {\r\n        base.OnPaintSurface(e);\r\n        SKCanvas canvas = e.Surface.Canvas;\r\n        canvas.Clear();\r\n        SKRectI rect = new SKRectI(0, 0, (int)CanvasSize.Width, (int)CanvasSize.Height);\r\n\r\n        // Create linear gradient from upper-left to lower-right\r\n        using SKPaint paint = new SKPaint();\r\n        paint.Shader = SKShader.CreateLinearGradient(\r\n                            new SKPoint(rect.Left, rect.Top),\r\n                            new SKPoint(rect.Right, rect.Bottom),\r\n                            new SKColor[] { SKColors.Red, SKColors.Blue },\r\n                            new float[] { 0, 1 },\r\n                            SKShaderTileMode.Repeat);\r\n\r\n        // Draw the gradient on the rectangle\r\n        canvas.DrawRect(rect, paint);\r\n    }\r\n}\r\n\u0060\u0060\u0060\r\n\r\n\r\n\r\n\r\n\r\n**Expected Behavior**\r\n\r\n1. Click Tab1, the SKGLView draws\r\n2. Click Tab2, the second tab draws\r\n3. Click back to Tab1, the SKGLView is blank.  It should redraw [BUG]\r\n\r\n\r\n**Basic Information**\r\n\r\n- Version with issue:  SkiaSharp.Views.Maui.Controls.Compatibility 2.88.3\r\n- Last known good version:  No previous version tested\r\n- IDE:  Microsoft Visual Studio Community 2022 (64-bit) Version 17.6.5\r\n- Platform Target Frameworks:\r\n  - Android: Android SDK Platform 33, Android 12.0 - S\r\n- Target Devices:   \r\n  - Android Emulator 32.1.14\r\n  - Google Pixel 5 - API 31\r\n  \r\n**Screenshots**\r\n\r\n**Reproduction Link**\r\n\r\n[TestTabsMauiApp2.zip](https://github.com/mono/SkiaSharp/files/12311115/TestTabsMauiApp2.zip)\r\n\r\n",
  "author": {
    "login": "noelbk",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2023-08-10T09:17:38",
  "updatedAt": "2025-07-21T16:53:52",
  "commentCount": 16,
  "reactionCount": 1
}