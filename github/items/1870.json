{
  "number": 1870,
  "type": "issue",
  "state": "open",
  "title": "SKCanvas PaintSurface with Rotation very slow with UWP",
  "body": "I\u0027m following up https://github.com/mono/SkiaSharp/issues/758\r\nThe issue is closed, but I dont know, if it was fixed or if there is a workaround.\r\n\r\nAnyway, I have it and it makes the UWP-App unusable.\r\n\r\nThe following code takes 500ms with Rotation != 0, and 50ms with no Rotation on UWP.\r\nWith Android 100ms with and 70ms without, with iOS no difference, 70ms with or without rotation.\r\n\r\nSo whats wrong with rotation with UWP? \r\n\r\n\u0060\u0060\u0060\r\n     async void MapView_PaintSurface(object sender, SKPaintSurfaceEventArgs e)\r\n     {\r\n            var t1 = new QvX.Helper.MeasureElapsedTime();\r\n            CurrentView.Width = e.Info.Width;\r\n            CurrentView.Height = e.Info.Height;\r\n\r\n           foreach (var l in _layer)\r\n                await l.ViewHasChanged(CurrentView, _layer[0], CancellationToken.None );\r\n\r\n            var canvas = e.Surface.Canvas;\r\n            canvas.Clear(SKColors.GreenYellow);\r\n\r\n            using (new SKAutoCanvasRestore(canvas))\r\n            {\r\n                canvas.RotateDegrees((float)CurrentView.Rotation, (float)CurrentView.Width / 2, (float)CurrentView.Height / 2);\r\n\r\n                var orderedlayer = _layer.Where(l =\u003E l.IsVisible).OrderBy(l =\u003E l.DrawOrder).ToList();\r\n                foreach (var l in _layer)\r\n                {\r\n                    if (l.Surface != null)\r\n                        canvas.DrawSurface(l.Surface, SKPoint.Empty);\r\n                }\r\n            }\r\n            \r\n            _statusBar .Text= CurrentView .ToString () \u002B \u0022 \u0022 \u002B t1.ElapsedTimeToString;\r\n        }\r\n\u0060\u0060\u0060\r\n\r\nMy system:\r\n\r\n\r\nMicrosoft Visual Studio Community 2019\r\nVersion 16.11.3\r\nVisualStudio.16.Release/16.11.3\u002B31702.278\r\nMicrosoft .NET Framework\r\nVersion 4.8.04084\r\n\r\nInstalled Version: Community\r\n\r\nVisual C\u002B\u002B 2019   00435-60000-00000-AA686\r\nMicrosoft Visual C\u002B\u002B 2019\r\n\r\n.NET Core Debugging with WSL   1.0\r\n.NET Core Debugging with WSL\r\n\r\nASP.NET and Web Tools 2019   16.11.75.64347\r\nASP.NET and Web Tools 2019\r\n\r\nASP.NET Web Frameworks and Tools 2019   16.11.75.64347\r\nFor additional information, visit https://www.asp.net/\r\n\r\nAzure App Service Tools v3.0.0   16.11.75.64347\r\nAzure App Service Tools v3.0.0\r\n\r\nAzure Functions and Web Jobs Tools   16.11.75.64347\r\nAzure Functions and Web Jobs Tools\r\n\r\nC# Tools   3.11.0-4.21403.6\u002Bae1fff344d46976624e68ae17164e0607ab68b10\r\nC# components used in the IDE. Depending on your project type and settings, a different version of the compiler may be used.\r\n\r\nCommon Azure Tools   1.10\r\nProvides common services for use by Azure Mobile Services and Microsoft Azure Tools.\r\n\r\nExtensibility Message Bus   1.2.6 (master@34d6af2)\r\nProvides common messaging-based MEF services for loosely coupled Visual Studio extension components communication and integration.\r\n\r\nGitHub.VisualStudio   2.11.106.19330\r\nA Visual Studio Extension that brings the GitHub Flow into Visual Studio.\r\n\r\nIntelliCode Extension   1.0\r\nIntelliCode Visual Studio Extension Detailed Info\r\n\r\nMicrosoft Azure Tools for Visual Studio   2.9\r\nSupport for Azure Cloud Services projects\r\n\r\nMicrosoft Continuous Delivery Tools for Visual Studio   0.4\r\nSimplifying the configuration of Azure DevOps pipelines from within the Visual Studio IDE.\r\n\r\nMicrosoft JVM Debugger   1.0\r\nProvides support for connecting the Visual Studio debugger to JDWP compatible Java Virtual Machines\r\n\r\nMicrosoft Library Manager   2.1.113\u002Bg422d40002e.RR\r\nInstall client-side libraries easily to any web project\r\n\r\nMicrosoft MI-Based Debugger   1.0\r\nProvides support for connecting Visual Studio to MI compatible debuggers\r\n\r\nMicrosoft Visual C\u002B\u002B Wizards   1.0\r\nMicrosoft Visual C\u002B\u002B Wizards\r\n\r\nMicrosoft Visual Studio Tools for Containers   1.2\r\nDevelop, run, validate your ASP.NET Core applications in the target environment. F5 your application directly into a container with debugging, or CTRL \u002B F5 to edit \u0026 refresh your app without having to rebuild the container.\r\n\r\nMicrosoft Visual Studio VC Package   1.0\r\nMicrosoft Visual Studio VC Package\r\n\r\nMono Debugging for Visual Studio   16.10.15 (552afdf)\r\nSupport for debugging Mono processes with Visual Studio.\r\n\r\nNuGet Package Manager   5.11.0\r\nNuGet Package Manager in Visual Studio. For more information about NuGet, visit https://docs.nuget.org/\r\n\r\nProjectServicesPackage Extension   1.0\r\nProjectServicesPackage Visual Studio Extension Detailed Info\r\n\r\nRazor (ASP.NET Core)   16.1.0.2122504\u002B13c05c96ea6bdbe550bd88b0bf6cdddf8cde1725\r\nProvides languages services for ASP.NET Core Razor.\r\n\r\nSQL Server Data Tools   16.0.62107.28140\r\nMicrosoft SQL Server Data Tools\r\n\r\nTest Adapter for Boost.Test   1.0\r\nEnables Visual Studio\u0027s testing tools with unit tests written for Boost.Test.  The use terms and Third Party Notices are available in the extension installation directory.\r\n\r\nTest Adapter for Google Test   1.0\r\nEnables Visual Studio\u0027s testing tools with unit tests written for Google Test.  The use terms and Third Party Notices are available in the extension installation directory.\r\n\r\nTypeScript Tools   16.0.30526.2002\r\nTypeScript Tools for Microsoft Visual Studio\r\n\r\nVisual Basic Tools   3.11.0-4.21403.6\u002Bae1fff344d46976624e68ae17164e0607ab68b10\r\nVisual Basic components used in the IDE. Depending on your project type and settings, a different version of the compiler may be used.\r\n\r\nVisual F# Tools   16.11.0-beta.21322.6\u002B488cc578cafcd261d90d748d8aaa7b8b091232dc\r\nMicrosoft Visual F# Tools\r\n\r\nVisual Studio Code Debug Adapter Host Package   1.0\r\nInterop layer for hosting Visual Studio Code debug adapters in Visual Studio\r\n\r\nVisual Studio Container Tools Extensions   1.0\r\nView, manage, and diagnose containers within Visual Studio.\r\n\r\nVisual Studio Tools for CMake   1.0\r\nVisual Studio Tools for CMake\r\n\r\nVisual Studio Tools for Containers   1.0\r\nVisual Studio Tools for Containers\r\n\r\nVisualStudio.DeviceLog   1.0\r\nInformation about my package\r\n\r\nVisualStudio.Foo   1.0\r\nInformation about my package\r\n\r\nVisualStudio.Mac   1.0\r\nMac Extension for Visual Studio\r\n\r\nXamarin   16.11.000.175 (d16-11@e140e23)\r\nVisual Studio extension to enable development for Xamarin.iOS and Xamarin.Android.\r\n\r\nXamarin Designer   16.11.0.17 (remotes/origin/11e0001f0b17269345e80b58fb3adf1ba4efe2cd@11e0001f0)\r\nVisual Studio extension to enable Xamarin Designer tools in Visual Studio.\r\n\r\nXamarin Templates   16.10.5 (355b57a)\r\nTemplates for building iOS, Android, and Windows apps with Xamarin and Xamarin.Forms.\r\n\r\nXamarin.Android SDK   11.4.0.5 (d16-11/7776c9f)\r\nXamarin.Android Reference Assemblies and MSBuild support.\r\n    Mono: c633fe9\r\n    Java.Interop: xamarin/java.interop/d16-11@48766c0\r\n    ProGuard: Guardsquare/proguard/v7.0.1@912d149\r\n    SQLite: xamarin/sqlite/3.35.4@85460d3\r\n    Xamarin.Android Tools: xamarin/xamarin-android-tools/d16-11@683f375\r\n\r\n\r\nXamarin.iOS and Xamarin.Mac SDK   14.20.0.25 (3b53e529b)\r\nXamarin.iOS and Xamarin.Mac Reference Assemblies and MSBuild support.\r\n\r\n",
  "author": {
    "login": "TomQv",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2021-11-21T20:22:21",
  "updatedAt": "2021-11-22T19:05:49",
  "commentCount": 0,
  "reactionCount": 0
}