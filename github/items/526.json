{
  "number": 526,
  "type": "issue",
  "state": "closed",
  "title": "SkiaSharp vs System.Drawing DrawRectangle and AddArc",
  "body": "### Description\r\n\r\nPath -\u003E DrawArc and SKRect seems not working as they should if compared to System.Drawing\r\n\r\n### Code\r\nLinqPad File:\r\n\r\n[SkiaSharp.zip](https://github.com/mono/SkiaSharp/files/2032574/SkiaSharp.zip)\r\n\r\n\u0060\u0060\u0060csharp\r\n\tint Width = 300;\r\n\tint Height = 200;\r\n\tint x = 2;\r\n\tint y = 3;\r\n\tint GapSize = 6;\r\n\tint width = Width - x * 2;\r\n\tint height = Height - y * 2;\r\n\tfloat MinValue = 0;\r\n\tfloat MaxValue = 100;\r\n\tfloat fromAngle = 135F;\r\n\tfloat toAngle = 405F;\r\n\r\n\tSystem.Drawing.Bitmap bmps = new System.Drawing.Bitmap(Width, Height);\r\n\tSystem.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bmps);\r\n\tSystem.Drawing.Rectangle rectImg = new System.Drawing.Rectangle(x, y, width, height);\r\n\tg.FillRectangle(new System.Drawing.SolidBrush(System.Drawing.Color.Aqua), 0, 0, bmps.Width, bmps.Height);\r\n\tfloat recommendedValueGreen = 85;\r\n\tfloat thresholdGreen = 30;\r\n\tGapSize = 15;\r\n\r\n\tSystem.Drawing.Pen Pen_color = new System.Drawing.Pen(System.Drawing.Color.FromArgb(100, System.Drawing.Color.LawnGreen), (float)(width * .06));\r\n\tSystem.Drawing.Rectangle rectg = new System.Drawing.Rectangle(rectImg.X \u002B GapSize, rectImg.Y \u002B GapSize, rectImg.Width - GapSize * 2, rectImg.Height - GapSize * 2);\r\n\t\r\n\tfloat val = MaxValue - MinValue;\r\n\tval = (100 * (recommendedValueGreen - MinValue)) / val;\r\n\tval = ((toAngle - fromAngle) * val) / 100;\r\n\tval \u002B= fromAngle;\r\n\tfloat stAngle = val - ((270 * thresholdGreen) / 200);\r\n\tif (stAngle \u003C= 135) stAngle = 135;\r\n\tfloat sweepAngle = ((270 * thresholdGreen) / 100);\r\n\tif (stAngle \u002B sweepAngle \u003E 405) sweepAngle = 405 - stAngle;\r\n\r\n\tg.DrawArc(Pen_color, rectg, stAngle, sweepAngle);\r\n\tConsole.WriteLine(\u0022X:\u0022 \u002B rectg.X \u002B \u0022, Y:\u0022 \u002B rectg.Y \u002B \u0022, W:\u0022 \u002B rectg.Width \u002B \u0022, H:\u0022 \u002B rectg.Height \u002B \u0022, SA:\u0022 \u002B stAngle \u002B \u0022, SW:\u0022 \u002B sweepAngle);\r\n\tMemoryStream ms = new MemoryStream();\r\n\tbmps.Save(ms, System.Drawing.Imaging.ImageFormat.Png);\r\n\r\n\tUtil.Image(ms.GetBuffer()).Dump();\r\n\u0060\u0060\u0060\r\n\r\nSKIA\r\n\u0060\u0060\u0060cs\r\n\tSKImageInfo image = new SKImageInfo(Width, Height);\r\n\tSKBitmap bmp = SKBitmap.FromImage(SKImage.Create(image));\r\n\tSKSurface surface = SKSurface.Create(image);\r\n\tSKCanvas canvas = surface.Canvas;\r\n\tcanvas.Clear(SKColors.Aqua);\r\n\r\n\trecommendedValueGreen = 85;\r\n\tthresholdGreen = 30;\r\n\tGapSize = 15;\r\n\tSKRect rect = new SKRect(rectImg.X \u002B GapSize, rectImg.Y \u002B GapSize, rectImg.Width - GapSize * 2, rectImg.Height - GapSize * 2);\r\n\t//rect.Size = new SKSize() { Height = rect.Size.Height \u002B rect.Location.Y, Width = rect.Size.Width \u002B rect.Location.X};\r\n\tConsole.WriteLine(\u0022X:\u0022 \u002B rect.Location.X \u002B \u0022, Y:\u0022 \u002B rect.Location.Y \u002B \u0022, W:\u0022 \u002B rect.Width \u002B \u0022, H:\u0022 \u002B rect.Height \u002B \u0022, SA:\u0022 \u002B stAngle \u002B \u0022, SW:\u0022 \u002B sweepAngle);\r\n\tval = MaxValue - MinValue;\r\n\tval = (100 * (recommendedValueGreen - MinValue)) / val;\r\n\tval = ((toAngle - fromAngle) * val) / 100;\r\n\tval \u002B= fromAngle;\r\n\tstAngle = val - ((270 * thresholdGreen) / 200);\r\n\tif (stAngle \u003C= 135) stAngle = 135;\r\n\tsweepAngle = ((270 * thresholdGreen) / 100);\r\n\tif (stAngle \u002B sweepAngle \u003E 405) sweepAngle = 405 - stAngle;\r\n\r\n\tcanvas.DrawArc(rect, stAngle, sweepAngle, new SKPaint()\r\n\t{\r\n\t Color = SKColors.LawnGreen.SetAlpha(100),\r\n\t Style = SKPaintStyle.Stroke,\r\n\t StrokeWidth = (float)(width * .06)\r\n\t});\r\n\r\n\t// save the file\r\n\tSKImage img = surface.Snapshot();\r\n\tSKData data = img.Encode(SKEncodedImageFormat.Png, 100);\r\n\r\n\tMemoryStream stream = new MemoryStream();\r\n\r\n\tUtil.Image(data.ToArray()).Dump();\r\n\u0060\u0060\u0060\r\n\r\n### Expected Behavior\r\n\r\nThe sweepAngle of the Path.AddArc is sometime shorter/smaller or larger than the one in \r\nSystem.Drawing for example if set start angle at 90 with 45 sweepangle\r\n\r\nThe SkRect rectangle is smaller than the Rectangle in System.Drawing have to resize it manually such as \r\nrect.Size = new SKSize() { Height = rect.Size.Height \u002B rect.Location.Y, Width = rect.Size.Width \u002B rect.Location.X};\r\n\r\n### Actual \r\n\r\nNot able to draw an Arc identical to the one in System.Drawing\r\n\r\nNot able to draw a rectangle of the same size as in System.Drawing without resizing the SKRect with new SKSize \r\n\r\n### Basic Information\r\n\r\n- Version with issue:  1.60.1\r\n- Last known good version:  \u003C!-- the version of SkiaSharp that still working --\u003E\r\n- IDE:  Visual Studio , LinqPad\r\n- Platform Target Frameworks: 4.5\r\n  - Android: \u003C!-- the version of the Android SDK you are compiling against, e.g. 7.1 --\u003E \r\n  - iOS:  \u003C!-- the version of the iOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Linux:  \u003C!-- The version and distro of linux that you are building for, e.g. Ubuntu 16.04 --\u003E\r\n  - macOS:  \u003C!-- The version of macOS you are building for, e.g. 10.10 --\u003E\r\n  - Tizen:  \u003C!-- the version of the Tizen SDK you are compiling against, e.g. 4.0 --\u003E \r\n  - tvOS:  \u003C!-- the version of the tvOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - UWP:  \u003C!-- the version of the UWP SDK you are compiling against, e.g. 16299 --\u003E \r\n  - watchOS:  \u003C!-- the version of the watchOS SDK you are compiling against, e.g. 11.1 --\u003E\r\n  - Windows Classic:  Windows 10\r\n- Target Devices:\r\n  -   Windows .Net Framework 4.5 and dotnet core 2.1\r\n\r\n### Screenshots\r\n\r\n![skia](https://user-images.githubusercontent.com/1870894/40447327-dcc8e63c-5eda-11e8-94fb-4411ad68857d.png)\r\n![skia2](https://user-images.githubusercontent.com/1870894/40448384-0ac68258-5ede-11e8-9081-0045f5a77473.png)\r\n![skia3](https://user-images.githubusercontent.com/1870894/40448385-0aed138c-5ede-11e8-8c10-cf498dee56af.png)\r\n\r\n\r\n\r\n### Reproduction Link\r\n\u003C!-- please upload or provide a link to a reproduction case --\u003E\r\n\r\n\u003E VS bug [#736292](https://devdiv.visualstudio.com/DevDiv/_workitems/edit/736292)",
  "author": {
    "login": "CyrusJoudieh",
    "type": "User"
  },
  "labels": [
    {
      "name": "status/wontfix",
      "color": "B8EC4A"
    }
  ],
  "assignees": [
    {
      "login": "mattleibow",
      "type": "User"
    }
  ],
  "createdAt": "2018-05-23T20:11:12",
  "updatedAt": "2022-08-19T15:02:29",
  "closedAt": "2020-04-26T05:56:17",
  "commentCount": 2,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T20:41:57.168193Z",
    "reactions": [],
    "comments": [
      {
        "id": 442116309,
        "author": "mattleibow",
        "createdAt": "2018-11-27T16:09:34",
        "reactions": []
      },
      {
        "id": 619487898,
        "author": "mattleibow",
        "createdAt": "2020-04-26T05:56:17",
        "reactions": []
      }
    ]
  }
}