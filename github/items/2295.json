{
  "number": 2295,
  "type": "issue",
  "state": "open",
  "title": "[QUESTION WinUI] Canvas is stretching when size changed then normalize",
  "body": "There is a looping storyboard that changes the width of a second element in the grid and Skia canvas is stretching and shrinking while its available size changing\r\n\r\nVideo: https://user-images.githubusercontent.com/6670150/197959916-15d49d7d-f724-4566-b89f-d55ffcb18450.mp4\r\n\r\nXaml\r\n\u0060\u0060\u0060\r\n\u003CGrid\u003E\r\n        \u003CGrid.RowDefinitions\u003E\r\n            \u003CRowDefinition Height=\u0022*\u0022 /\u003E\r\n            \u003CRowDefinition Height=\u0022Auto\u0022 /\u003E\r\n        \u003C/Grid.RowDefinitions\u003E\r\n        \u003CGrid.ColumnDefinitions\u003E\r\n            \u003CColumnDefinition Width=\u0022*\u0022 /\u003E\r\n            \u003CColumnDefinition Width=\u0022Auto\u0022 /\u003E\r\n        \u003C/Grid.ColumnDefinitions\u003E\r\n        \u003Cskia:SKXamlCanvas\r\n            Grid.Row=\u00220\u0022\r\n            Grid.Column=\u00220\u0022\r\n            PaintSurface=\u0022SKXamlCanvas_PaintSurface\u0022 /\u003E\r\n        \u003CBorder\r\n            x:Name=\u0022border\u0022\r\n            Grid.Row=\u00220\u0022\r\n            Grid.Column=\u00221\u0022\r\n            Width=\u00220\u0022\r\n            BorderBrush=\u0022Green\u0022\r\n            BorderThickness=\u00221\u0022 /\u003E\r\n\r\n        \u003CButton\r\n            Grid.Row=\u00221\u0022\r\n            Grid.Column=\u00220\u0022\r\n            Grid.ColumnSpan=\u00222\u0022\r\n            Margin=\u002210\u0022\r\n            HorizontalAlignment=\u0022Center\u0022\r\n            Click=\u0022Button_Click\u0022\r\n            Content=\u0022Start/Stop animation\u0022 /\u003E\r\n    \u003C/Grid\u003E\r\n\u0060\u0060\u0060\r\n\r\nCode behind\r\n\u0060\u0060\u0060\r\n        Storyboard storyboard = new Storyboard();\r\n\r\n        DoubleAnimation anim = new DoubleAnimation()\r\n        {\r\n            AutoReverse = true,\r\n            EnableDependentAnimation = true,\r\n            RepeatBehavior = RepeatBehavior.Forever,\r\n            Duration = TimeSpan.FromMilliseconds(100),\r\n            From = 0,\r\n        };\r\n\r\n        public SkiaStretchIssue()\r\n        {\r\n            this.InitializeComponent();\r\n\r\n            Storyboard.SetTarget(anim, border);\r\n            Storyboard.SetTargetProperty(anim, \u0022Width\u0022);\r\n            storyboard.Children.Add(anim);\r\n\r\n            Loaded \u002B= SkiaStretchIssue_Loaded;\r\n        }\r\n\r\n        private void SkiaStretchIssue_Loaded(object sender, RoutedEventArgs e)\r\n        {\r\n            anim.To = ActualWidth / 2;\r\n            storyboard.Begin();\r\n        }\r\n\r\n        private void Button_Click(object sender, RoutedEventArgs e)\r\n        {\r\n            if (storyboard.GetCurrentState() != ClockState.Active)\r\n            {\r\n                anim.To = ActualWidth / 2;\r\n                storyboard.Begin();\r\n            }\r\n            else\r\n            {\r\n                storyboard.Stop();\r\n            }\r\n        }\r\n\r\n        private SKPaint paint = new SKPaint()\r\n        {\r\n            TextSize = 28f,\r\n            Style = SKPaintStyle.Fill,\r\n            Color = SKColors.Red\r\n        };\r\n\r\n        private void SKXamlCanvas_PaintSurface(object sender, SkiaSharp.Views.Windows.SKPaintSurfaceEventArgs e)\r\n        {\r\n            var canvas = e.Surface.Canvas;\r\n\r\n            canvas.Clear();\r\n\r\n            canvas.DrawText(\u0022TEST TEST TESTTESTTEST TEST \u0022, 5f, e.Info.Height / 2, paint);\r\n        }\r\n\u0060\u0060\u0060\r\n\r\nIs there anyway I can prevent this hapenning ?\r\n\r\nRepro\r\n[SkiaStretchIssue.zip](https://github.com/mono/SkiaSharp/files/9867051/SkiaStretchIssue.zip)\r\n",
  "author": {
    "login": "FrozDark",
    "type": "User"
  },
  "labels": [],
  "assignees": [],
  "createdAt": "2022-10-26T07:21:49",
  "updatedAt": "2022-10-26T07:22:45",
  "commentCount": 0,
  "reactionCount": 0,
  "engagement": {
    "syncedAt": "2026-02-04T20:29:35.2627153Z",
    "reactions": [],
    "comments": []
  }
}